"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5710],{65618:function(e,t,n){n.d(t,{T:function(){return f}});var r=n(20406),o=n(28526),i=n.n(o),s=n(2784),a=n(28811),c=n(36157),l=n(57560),d=n(17349),u=n(48842),f=function(){var e,t=(0,u._)().editor,n=null==t?void 0:t.gammaDocId,o=(0,l.vi)({docId:n,editor:t}).updateDocThemeWithAccentImages,f=(0,c.CG)(d.F_),p=(0,s.useCallback)(function(e){return f===e},[f]),h=(0,a.WQq)();return{setThemeWithAccentImages:o,isThemeApplied:p,currentThemeId:f,isValidTheme:(0,s.useCallback)((e=(0,r.Z)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.query({query:a.vGj,variables:{id:t},returnPartialData:!1});case 3:return n=e.sent.data,e.abrupt("return",(null==n?void 0:n.theme)!==null);case 8:return e.prev=8,e.t0=e.catch(0),console.warn("[useThemeModificationController.isValidTheme] Error checking if theme is valid",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(t){return e.apply(this,arguments)}),[h])}}},75851:function(e,t,n){n.d(t,{D:function(){return r},N:function(){return o}});var r="Made with Gamma. A new medium for presenting ideas, powered by AI.",o=300},75213:function(e,t,n){n.d(t,{U:function(){return o},V:function(){return i}});var r=n(75851),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e||"Untitled":e?"".concat(e," | Gamma"):"Gamma"},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||(t?"":r.D)}},7954:function(e,t,n){n.d(t,{z:function(){return g}});var r=n(96412),o=n(13089),i=n(41701),s=n(90129),a=n(29017),c=n(48200),l=n(95235),d=n(30733),u=n.n(d),f=n(12436),p=n.n(f),h=n(2784),m=function(e){(0,s.Z)(d,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,c.Z)(d);if(t){var r=(0,c.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,a.Z)(this,e)});function d(){var e;return(0,r.Z)(this,d),e=n.call(this),(0,l.Z)((0,i.Z)(e),"throttled",void 0),e.throttled=p()(function(t){e.emit("move",t)},200,{leading:!0}),document.addEventListener("mousemove",e.throttled),e}return(0,o.Z)(d,[{key:"cleanup",value:function(){document.removeEventListener("mousemove",this.throttled)}}]),d}(n(37438).v),x=u()(function(){return new m}),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=x(),r=(0,h.useState)(!1),o=r[0],i=r[1],s=(0,h.useRef)(t);return(0,h.useEffect)(function(){s.current=t},[t]),(0,h.useEffect)(function(){return n.on("move",function(t){s.current||i(e(t))})},[n,e]),o}},14549:function(e,t,n){n.d(t,{Av:function(){return S},U8:function(){return k}});var r=n(95235),o=n(393),i=n(11919),s=n(2784),a=n(43997),c=n(2104),l=n(36157),d=n(3360),u=n(70957),f=n(53738),p=n(12436),h=n.n(p),m=n(3588),x=n(52322);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=e.setWidth,n=e.width,r=e.position,o=e.onClose,a=e.panelRef,l=e.initialWidth,d=e.isDragging,u=e.setIsDragging,p=(0,s.useMemo)(function(){return(0,m.n)()},[])>0&&"right"===r,g=(0,s.useState)(n),j=g[0],b=g[1],y=(0,s.useState)(null),C=y[0],w=y[1],O=h()(function(e){var t,n=Math.min(Math.max(t="left"===r?e.clientX:-((e.clientX-C)*1)+j,c.pn),c.ZQ);t<=c.Nh?(a.current.style.transitionProperty="width",a.current.style.transitionDuration="var(--chakra-transition-duration-normal)",n=0):n>c.pn&&(a.current.style.transitionProperty="",a.current.style.transitionDuration=""),a.current.style.width="".concat(n,"px")},30),k=function e(){u(!1),w(null);var n=a.current.style.width;"0px"===n?(o(),t(l)):t(parseInt(n.replace("px",""),10)),a.current.style.transitionProperty="",a.current.style.transitionDuration="",window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",e)};(0,s.useEffect)(function(){return C&&(window.addEventListener("mousemove",O),window.addEventListener("mouseup",k)),function(){window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",k)}},[C]);var S={};return S="left"===r?{right:-4,position:"absolute"}:p?{position:"relative"}:{left:-4,position:"absolute"},(0,x.jsx)(i.k,v(v({h:"100%",bg:p?"gray.200":d?"blackAlpha.200":"rgba(0,0,0,0)",w:p?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:p?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:function(e){e.preventDefault(),u(!0),w(e.clientX),b(n)},position:"absolute",display:["none","none","none","flex"]},S),{},{children:!p&&(0,x.jsx)(f.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:d?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})}))},b=n(40723);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={ifPanelHasRoomToOpen:function(e,t){return{base:t,xl:e}}},O=function(e){var t,n=e.position,f=e.panelLifecycle,p=(0,s.useRef)(),h=(0,s.useState)(!1),m=h[0],g=h[1],v=(0,a.I0)(),y=(0,l.CG)((0,b.SL)(n)),O=(0,l.CG)((0,b.Fw)(n)),k=(0,l.CG)((0,b.CO)(n)),S=(0,l.CG)((0,b.eh)(n)),I=null!==(t=null==S?void 0:S.canCollapse)&&void 0!==t&&t,E=(0,s.useCallback)(function(){v((0,b.sR)({position:n}))},[v,n]),P=(0,s.useCallback)(function(){v((0,b.Yp)({component:S}))},[S,v]),D=(0,s.useCallback)(function(e){v((0,b.UG)({width:e,position:n})),f.emit("resize",{})},[v,f,n]),A=(0,r.Z)({zIndex:Number((0,o.dQ)("zIndices","overlay"))+1,position:w.ifPanelHasRoomToOpen("relative","fixed"),height:"100%",top:0,bottom:0},n,0);O||m||(A.transitionProperty="width",A.transitionDuration="normal"),(0,s.useEffect)(function(){var e=function(e){"width"===e.propertyName&&f.emit("resize",{})};return p.current.addEventListener("transitionend",e),function(){p.current&&p.current.removeEventListener("transitionend",e)}},[f,p]);var T=(0,d.i)(w.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,s.useEffect)(function(){y&&!T&&I&&E()},[T,y,E,I]),(0,x.jsxs)(i.k,C(C({ref:p},A),{},{style:{width:y||I?k:0},maxW:"100%","data-print-hidden":!0,children:[y&&"right"===n&&(0,x.jsx)(j,{isDragging:m,setIsDragging:g,position:n,width:k,setWidth:D,panelRef:p,onClose:E,initialWidth:c.Ld}),(0,x.jsx)(u.Mn.Provider,{value:f,children:S&&(y||I)&&(0,x.jsx)(S,{isDragging:m,isOpen:y,closePanel:E,openPanel:P,panelRef:p,lifecycle:f,hasRoomToOpen:T})}),y&&"left"===n&&(0,x.jsx)(j,{isDragging:m,setIsDragging:g,position:n,width:k,setWidth:D,panelRef:p,onClose:E,initialWidth:c.X9})]}))},k=(0,s.memo)(function(e){return(0,x.jsx)(O,C({position:"right"},e))});k.displayName="RightPanelContainer";var S=(0,s.memo)(function(e){return(0,x.jsx)(O,C({position:"left"},e))});S.displayName="LeftPanelContainer"},34972:function(e,t,n){n.d(t,{_i:function(){return _._},eT:function(){return et}});var r,o,i,s,a,c=n(95235),l=n(81333),d=n(55452),u=n(55479),f=n(5632),p=n(2784),h=n(88914),m=n(28811),x=n(35243),g=n(57848),v=n(25232),j=n(36157),b=n(5945),y=n(16467),C=n(57262),w=function(e){var t=(0,j.TL)(),n=(0,b.SE)().currentWorkspace;(0,p.useEffect)(function(){if(e)return y.VH.updateWorkspaceInLdContext(e).then(function(){t((0,C.vH)({isDocWorkspaceSet:!0}))}),function(){y.VH.updateWorkspaceInLdContext(n).then(function(){t((0,C.vH)({isDocWorkspaceSet:!1}))})}},[n,t,e])},O=n(56969),k=n(7328),S=n(57981),I=(0,S.Ps)(r||(r=(0,k.Z)(["\n  fragment DefaultCardFields on Card {\n    id\n    archived\n    docId\n    title\n    text\n    previewUrl\n    createdTime\n    updatedTime\n  }\n"])));(0,S.Ps)(o||(o=(0,k.Z)(["\n  mutation CreateCard($id: ID!, $docId: ID!) {\n    createCard(id: $id, docId: $docId) {\n      id\n    }\n  }\n"]))),(0,S.Ps)(i||(i=(0,k.Z)(["\n  ","\n  query GetCard($id: ID!, $docId: ID!) {\n    card(id: $id, docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),I),(0,S.Ps)(s||(s=(0,k.Z)(["\n  ","\n  query GetCards($docId: ID!) {\n    docCards(docId: $docId, archived: false) {\n      ...DefaultCardFields\n    }\n  }\n"])),I);var E=(0,S.Ps)(a||(a=(0,k.Z)(["\n  ","\n  subscription SubscribeToCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),I),P=n(29407),D=n(60883),A=n(54714),T=n(21260),R=n(38404),_=n(48842),L=n(75944),M=n(63331),z=n(20010),N=n(56915),Z=n(48273),G=n(92619),F=n(64827),W=n(2167),U=n(71354),V=n(91012),H=n(80353),q=n(76648),B=n(45650),K=n(52322),Y=n(2252),J=function(e){var t,n=(null===(t=(0,j.CG)((0,M.oH)(e||"")))||void 0===t?void 0:t.status)==="running",r=(0,p.useRef)(n);r.current=n;var o=(0,p.useState)(function(){return new Y.B}),i=o[0],s=o[1],a=(0,p.useCallback)(function(){i.resolve()},[i]),c=(0,L.q)(),l=c.isOpen,d=c.onOpen,u=c.onClose;return{confirmNavigationFn:(0,p.useCallback)(function(){if(!r.current)return Promise.resolve();var e=new Y.B;return s(e),d(),e.promise},[d]),confirmNavigationModalProps:{isOpen:l,onClose:u,onConfirm:a}}},X=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm;return(0,K.jsxs)(z.u_,{onClose:n,isOpen:t,isCentered:!0,children:[(0,K.jsx)(N.Z,{}),(0,K.jsxs)(Z.h,{children:[(0,K.jsx)(G.x,{children:(0,K.jsx)(d.cC,{id:"YeK6T+"})}),(0,K.jsx)(F.o,{}),(0,K.jsx)(W.f,{children:(0,K.jsxs)(U.K,{spacing:4,children:[(0,K.jsx)(V.x,{fontWeight:"bold",children:(0,K.jsx)(d.cC,{id:"Wr6Y7m"})}),(0,K.jsx)(V.x,{children:(0,K.jsx)(d.cC,{id:"n0Fn6S"})})]})}),(0,K.jsx)(H.m,{children:(0,K.jsxs)(q.h,{children:[(0,K.jsx)(B.z,{variant:"ghost",onClick:n,children:(0,K.jsx)(d.cC,{id:"dEgA5A"})}),(0,K.jsx)(B.z,{variant:"ghost",color:"red.600",onClick:r,children:(0,K.jsx)(d.cC,{id:"QxM8i/"})})]})})]})]})};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee=function(e){var t=e.children,n=(0,v.ye)("docEditorForcePublicStatic"),r=(0,u.p)(),o=(0,b.we)(),i=(0,j.CG)(R.XV),s=(0,b.SE)(),a=s.user,c=s.userStatus,y=(0,p.useRef)(null),C=(0,j.TL)(),k=(0,f.useRouter)(),S=k.push,I=k.replace,L=(0,j.CG)(R.yx),M=(0,D.Pi)(),z=(0,l.Z)(M,2),N=z[0],Z=z[1],G=Z&&Z.match(D.sg),F=G?G[0]:null,W=J(F),U=W.confirmNavigationFn,V=W.confirmNavigationModalProps,H=(0,p.useState)({isUnauthorized:void 0,setCollaborativeEditorInstance:function(e){y.current=e,B(function(t){return $($({},t),{},{editor:e})})},getCollaborativeEditorInstance:function(){return y.current},confirmNavigation:U,editor:void 0}),q=H[0],B=H[1];(0,x.ts)(L),w(null==L?void 0:L.organization);var Y=(0,m.WMx)({variables:{id:F},returnPartialData:!0,nextFetchPolicy:"cache-only"}),Q=(0,l.Z)(Y,2),ee=Q[0],et=Q[1],en=et.data,er=et.loading,eo=et.called,ei=et.subscribeToMore,es=(0,b.py)("view",null==en?void 0:en.doc);(0,b.$K)(ee),(0,p.useEffect)(function(){if(ei&&q.docId&&eo)return ei({document:T.dU,variables:{id:q.docId},updateQuery:function(e,t){var n=t.subscriptionData;return n.data&&n.data.doc&&e.doc?{doc:$($($({},e.doc),n.data.doc),{},{__typename:"Doc"})}:e}})},[q.docId,ei,eo]);var ea=(0,m.WBF)({variables:{docId:F},returnPartialData:!0,nextFetchPolicy:"cache-only"}),ec=(0,l.Z)(ea,2),el=ec[0],ed=ec[1],eu=ed.data,ef=ed.called,ep=ed.subscribeToMore;return((0,g.p)(null==eu?void 0:eu.docCards,q.editor),(0,p.useEffect)(function(){if(ep&&q.docId&&ef)return ep({document:E,variables:{docId:q.docId},updateQuery:function(e,t){var n=t.subscriptionData;return n.data&&n.data.docCards?n.data:e}})},[q.docId,ep,ef]),(0,p.useEffect)(function(){if(!q.docId&&Z){if(!F){r({id:"invalid_doc_id_error",title:(0,K.jsx)(d.cC,{id:"742lf1"}),description:"",status:"error",position:"top",isClosable:!1,duration:null});return}ee(),el(),B(function(e){return e.docId==F?e:$($({},e),{},{docId:F})})}},[q.docId,Z,F,ee,el,C,r]),(0,p.useEffect)(function(){if("loading"!==c&&eo&&!er&&Z){if(!en||!en.doc||!1===es){"loggedOut"===c&&S("/signin?redirect_to=".concat(encodeURIComponent(window.location.href))),B(function(e){return $($({},e),{},{isUnauthorized:!0})});return}var e,t,r=o.can(m.y3$.View,en.doc)&&o.cannot(m.y3$.Comment,en.doc)&&o.cannot(m.y3$.Edit,en.doc)&&o.cannot(m.y3$.Manage,en.doc),s=null===(e=en.doc.accessLinks)||void 0===e?void 0:null===(t=e.find(function(e){return e.token===h.v.SHARE_TOKEN}))||void 0===t?void 0:t.permission,a=s&&[m.y3$.Edit,m.y3$.Comment].includes(s),l=new URLSearchParams(window.location.search),d=l.get("following_id")&&l.get("follow_on_start"),u=i&&r&&!d&&!a,f=i&&n;if(u||f){C((0,R.R8)({docEditorType:A.Z.PUBLIC_STATIC}));return}if(!i&&en.doc.archived){I("/");return}B(function(e){return!1===e.isUnauthorized?e:$($({},e),{},{isUnauthorized:!1})}),C((0,R.pl)({doc:en.doc}))}},[o,es,en,er,Z,eo,i,n,c,S,C,I,a]),(0,p.useEffect)(function(){return function(){C((0,R.mc)())}},[C]),(0,p.useEffect)(function(){if(L&&F){var e="".concat(L.title?"".concat((0,P.l)(L.title),"-"):"").concat(F);Z!==e&&(0,O.lO)({pathname:"/".concat(N,"/").concat(e),emitChange:!1})}},[L,F,Z,N]),q.docId)?(0,K.jsxs)(_.r.Provider,{value:q,children:[t,(0,K.jsx)(X,$({},V))]}):(0,K.jsx)(K.Fragment,{})};function et(e){return(0,p.memo)(function(t){return(0,K.jsx)(ee,{children:(0,K.jsx)(e,$({},t))})})}},82779:function(e,t,n){n.d(t,{m:function(){return F}});var r=n(81333),o=n(55452),i=n(87254),s=n(11919),a=n(53738),c=n(94659),l=n(36895),d=n(50390),u=n(91012),f=n(97261),p=n(2784),h=n(28811),m=n(64914),x=n(66397),g=n(36157),v=n(68722),j=n(43512),b=n(17349),y=n(5945),C={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},w=n(63730),O=n(83906),k=n(9088),S=n(30893),I=n(45650),E=n(40771),P=n(63849),D=n(2575),A=n(97907),T=n(65903),R=n.n(T),_=n(52322),L=function(e){var t=e.count,n=e.onClose,r=e.commentStatusFilter,a=e.setCommentStatusFilter,c=r===h.Ux9.Open?i.ag._({id:"Kz1TxG"}):i.ag._({id:"kywJax"});return(0,_.jsxs)(s.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,_.jsx)(d.X,{size:"md",flex:1,noOfLines:1,children:(0,_.jsx)(o.cC,{id:"eiUA4k",values:{count:t}})}),(0,_.jsxs)(k.v,{closeOnSelect:!0,children:[(0,_.jsx)(S.j,{as:I.z,size:"sm",rightIcon:(0,_.jsx)(O.v,{}),mr:8,children:R()(c)}),(0,_.jsx)(E.q,{zIndex:3,children:(0,_.jsxs)(P._,{defaultValue:r,title:i.ag._({id:"0cVgUw"}),type:"radio",children:[(0,_.jsx)(D.i,{onClick:function(){return a(h.Ux9.Open)},value:"open",children:(0,_.jsx)(o.cC,{id:"1TNIig"})}),(0,_.jsx)(D.i,{onClick:function(){return a(h.Ux9.Closed)},value:"closed",children:(0,_.jsx)(o.cC,{id:"D87pha"})})]})})]}),(0,_.jsx)(A.P,{position:"absolute",top:2,right:2,onClick:n,"data-comment-feed-close-button":!0})]})},M=n(95235),z=n(16257);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=function(e){var t=e.user,n=e.editor,r=(0,p.useState)(function(){var e=(0,v.W1)(n,z.Et);return e&&e.length?e[0]:(0,v.xN)(function(){return z.Et},n,"")}),o=r[0],i=r[1];(0,p.useEffect)(function(){if(o&&n)return function(){var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,o)}},[o,n]);var s=(0,v.iZ)({draftComment:o,clearDraftComment:function(){o&&(null===(r=(s=n.commands).removeDraftComments)||void 0===r||r.call(s,[o]));var e,t,r,s,a=(0,v.xN)(function(){return z.Et},n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,a),i(a)},editor:n}),a=(0,p.useCallback)(function(e){var t=e.editor;i(function(e){return e?Z(Z({},e),{},{json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}):e})},[]);return(0,_.jsx)(v.Ag,{draftComment:o,user:t,onCommentDraftUpdate:a,onCommentSave:s,commentIdToHighlight:null})},F=function(e){var t,n=e.onClose,O=e.editor,k=(0,g.CG)(b.yx),S=(0,h.$gs)().isConnected,I=(0,p.useState)(h.Ux9.Open),E=I[0],P=I[1],D=null==k?void 0:k.comments,A=null==k?void 0:null===(t=k.comments)||void 0===t?void 0:t.filter(function(e){return e.status===E}),T=(0,g.CG)(b.gh),R=(0,y.py)("comment",k)&&S,M=(0,y.SE)().user,z=(0,m.$m)(k,M),N=(0,p.useMemo)(function(){return(0,w.yd)({items:A||[],sortBy:w.Yz,latestTimeGetterFn:w.z3})},[A]);return D&&k&&O?(0,_.jsxs)(s.k,{direction:"column",h:"100%",overflowX:"hidden",className:j.G,w:"100%",children:[(0,_.jsx)(L,{commentStatusFilter:E,setCommentStatusFilter:P,count:(null==A?void 0:A.length)||0,onClose:n}),(0,_.jsxs)(s.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,_.jsx)(x.V,{label:(0,_.jsx)(o.cC,{id:"pQvCbR"}),isConnected:S,mx:6}),z&&!M&&k&&(0,_.jsx)(v.IZ,{doc:k,accessLink:z}),R&&(0,_.jsx)(a.xu,{px:6,py:2,children:(0,_.jsx)(G,{user:M,editor:O})}),!(null!=A&&A.length)&&(0,_.jsxs)(c.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,_.jsx)(a.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,_.jsx)(l.E,{src:C.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,_.jsxs)(a.xu,{children:[(0,_.jsx)(d.X,{size:"xs",mb:2,children:"open"===E?(0,_.jsx)(o.cC,{id:"W7i5f5"}):(0,_.jsx)(o.cC,{id:"mpDN1V"})}),(0,_.jsx)(u.x,{fontSize:"sm",children:(0,_.jsx)(o.cC,{id:"iB9OEi"})})]})]}),Object.entries(N).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e){var t=(0,r.Z)(e,2),o=t[0],a=t[1];return(0,_.jsxs)(s.k,{direction:"column",children:[(0,_.jsx)(f.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:{today:i.ag._({id:"ecUA8p"}),thisWeek:i.ag._({id:"yByRxz"}),earlier:i.ag._({id:"HPqZkW"})}[o]}),(0,_.jsx)(s.k,{direction:"column",children:a.map(function(e){return(0,_.jsx)(v.q5,{instanceType:"feed",userCanComment:R,editor:O,comment:e,selfUser:M,docId:null==k?void 0:k.id,editorMode:T,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id)})})]},o)})]})]}):null}},67004:function(e,t,n){n.d(t,{s:function(){return m}});var r=n(95235),o=n(82269),i=n(2784),s=n(31358),a=n(91437),c=n(93848),l=n(48842),d=n(82779),u=n(52322),f=["closePanel"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){var t=e.closePanel,n=(0,o.Z)(e,f),r=(0,l._)().editor;return(0,i.useEffect)(function(){var e=function(e){e.open&&t()};return c.pw.on(c.TI.POPUP_COMMENT_TOGGLED,e),function(){c.pw.on(c.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,i.useEffect)(function(){return s.F7.on("keydown","COMMENT_FEED_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&t(),!0)})},[t]),(0,u.jsx)(a.s,h(h({},n),{},{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,u.jsx)(d.m,{onClose:t,editor:r})}))};m.panelPosition="right"},60394:function(e,t,n){n.d(t,{xg:function(){return ej},rN:function(){return eg},r8:function(){return ex}});var r=n(11919),o=n(71354),i=n(25925),s=n(2784),a=n(67218),c=n(55452),l=n(87254),d=n(91012),u=n(16979),f=n(71812),p=n(45393),h=n.n(p),m=n(94659),x=n(45650),g=n(52322),v=function(e){var t=e.sendMessage,n=(0,s.useState)(h()([l.ag._({id:"91gjMr"}),l.ag._({id:"PHyjBQ"}),l.ag._({id:"zhFV/H"}),l.ag._({id:"4ReFRy"}),l.ag._({id:"aepNQh"}),l.ag._({id:"fr8euV"}),l.ag._({id:"+TEOEl"}),l.ag._({id:"gQIRQv"}),l.ag._({id:"pbDMHv"}),l.ag._({id:"LP7cSD"}),l.ag._({id:"ugneAh"})],4).concat(h()([l.ag._({id:"DZ/eyq"}),l.ag._({id:"S2U0+k"}),l.ag._({id:"YZJ7kT"}),l.ag._({id:"fLq3m1"}),l.ag._({id:"1nrH2R"})],2)))[0];return(0,g.jsx)(m.g,{spacing:2,align:"flex-start",children:n.map(function(e,n){return(0,g.jsx)(x.z,{variant:"unstyled",bg:"white",borderRadius:"md",size:"sm",px:2,border:"1px solid",borderColor:"gray.200",color:"orchid.400",fontWeight:"500",_hover:{bg:"trueblue.50",color:"trueblue.700"},onClick:function(){t(e)},children:e},n)})})},j=function(e){var t,n=e.sendMessage,r=e.hideSuggestions,o=(0,u.SE)().user;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.K,{from:"Designer",children:(t=null==o?void 0:o.firstName,{from:"Designer",type:"text",message:l.ag._({id:"q65R55",values:{userName:t}}),timestamp:Date.now()}).message}),!(void 0!==r&&r)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.x,{color:"gray.500",fontSize:"sm",children:(0,g.jsx)(c.cC,{id:"MVir6z"})}),(0,g.jsx)(v,{sendMessage:n})]})]})},b=n(30299),y=n(13813),C=n(40110),w=n(8283),O=n(53738),k=n(15110),S=n(49929),I=n(65618),E=n(36157),P=n(74358),D=n(17349),A=n(2032),T=n(54073),R=n.n(T);function _(e,t,n){var r;return null!==(r=n.find(function(n){return n.modification.isApplied(e,t)}))&&void 0!==r?r:null}function L(e,t){var n=(0,E.CG)(D.Pu),r=(0,I.T)(),o=(0,s.useState)(function(){return e?_(e,r,t):null}),i=o[0],a=o[1],c=(0,s.useCallback)(function(){e&&a(_(e,r,t))},[e,t,r]);return(0,s.useEffect)(function(){if(e){var n=R()(function(){a(_(e,r,t))},1e3);return e.on("update",n),function(){e.off("update",n)}}},[e,t,r]),(0,s.useEffect)(function(){c()},[c,n]),{activeSuggestion:i,forceUpdate:c}}var M=n(20280),z=n(30628),N=n(55479),Z=n(93319),G=n(76648),F=n(67887),W=n(49747),U=n(25793),V=n(97261),H=n(36188),q=(0,s.memo)(function(e){var t=e.message,n=(0,N.p)(),r=(0,H.z$)(),i=ex().scrollToBottom,a=(0,s.useRef)(null),d=(0,s.useState)(!1),u=d[0],f=d[1],p=(0,s.useState)(null),h=p[0],m=p[1];(0,s.useEffect)(function(){if(u){var e;null===(e=a.current)||void 0===e||e.focus(),null==i||i()}},[u,i,r]);var v=t.interactionId,j=t.type,b=(0,s.useCallback)(function(e){m(e),f(!0),null==r||r.track(H.AA.AI_SUGGESTION_FEEDBACK,{interactionId:v,rating:e,type:j})},[r,v,j]),y=(0,s.useCallback)(function(){var e;f(!1),null==r||r.track(H.AA.AI_SUGGESTION_FEEDBACK,{interactionId:v,rating:h,type:j,feedback:null===(e=a.current)||void 0===e?void 0:e.value}),a.current&&(a.current.value=""),n({title:(0,g.jsx)(c.cC,{id:"d6N994"}),description:(0,g.jsx)(c.cC,{id:"s/fQ3s"}),status:"success",duration:5e3,isClosable:!0})},[n,r,v,h,j]);return(0,g.jsxs)(o.K,{width:"100%",children:[(0,g.jsxs)(w.U,{children:[(0,g.jsx)(Z.L,{}),(0,g.jsxs)(G.h,{size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:[(0,g.jsx)(V.kH,{label:(0,g.jsx)(c.cC,{id:"kR82DG"}),placement:"top",children:(0,g.jsx)(F.h,{"aria-label":"thumbs down",color:"poor"===h?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===h?"red.600":"transparent",bg:"poor"===h?"red.100":void 0,_hover:{bg:"poor"===h?"red.200":"blackAlpha.100"},icon:(0,g.jsx)(S.G,{icon:z.b}),onClick:function(){b("poor")}})}),(0,g.jsx)(V.kH,{label:(0,g.jsx)(c.cC,{id:"y1GvbS"}),placement:"top",children:(0,g.jsx)(F.h,{"aria-label":"thumbs up",color:"good"===h?"green.600":void 0,borderWidth:"1px",borderColor:"good"===h?"green.600":"transparent",bg:"good"===h?"green.100":void 0,_hover:{bg:"good"===h?"green.200":"blackAlpha.100"},icon:(0,g.jsx)(S.G,{icon:M.u8}),onClick:function(){b("good")}})})]})]}),(0,g.jsx)(W.U,{in:u,children:(0,g.jsxs)(o.K,{children:[(0,g.jsx)(U.g,{ref:a,bg:"white",size:"sm",placeholder:l.ag._({id:"ZVGh9y"})}),(0,g.jsxs)(G.h,{children:[(0,g.jsx)(Z.L,{}),(0,g.jsx)(x.z,{onClick:function(){return f(!1)},size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:(0,g.jsx)(c.cC,{id:"6Uau97"})}),(0,g.jsx)(x.z,{onClick:y,size:"xs",variant:"plain",children:(0,g.jsx)(c.cC,{id:"RoafuO"})})]})]})})]})});q.displayName="SuggestionFeedback";var B=(0,s.memo)(function(e){var t=e.message,n=e.editor,r=(0,A.E)(),i=(0,I.T)(),a=L(n,t.suggestions),c=a.activeSuggestion,l=a.forceUpdate,u=(0,s.useCallback)(function(e){n&&(r.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:e.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(n,i),l())},[n,l,t.interactionId,i,r]);return n?(0,g.jsx)(f.K,{children:(0,g.jsxs)(o.K,{divider:(0,g.jsx)(C.i,{borderColor:"blackAlpha.200"}),children:[(0,g.jsx)(d.x,{children:t.message||"How's this?"}),t.suggestions.map(function(e,t){return(0,g.jsx)(K,{isSelected:e.label===(null==c?void 0:c.label),jsonContentPreview:e.jsonContentPreview,label:e.label,modification:e.modification,onClick:function(){u(e.modification)}},t)}),(0,g.jsx)(q,{message:t})]})}):null});B.displayName="SuggestContent";var K=function(e){var t=e.label,n=e.modification,o=e.jsonContentPreview,i=e.isSelected,a=e.onClick,c=(0,E.CG)(D.Pu);console.debug("[".concat(t,"] jsonContentPreview"),o,n);var l=(0,s.useCallback)(function(){i||a()},[i,a]);return(0,g.jsxs)(w.U,{onClick:l,cursor:"pointer",px:2,py:1,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:i?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",spacing:4,children:[o&&(0,g.jsx)(r.k,{sx:{"mask-image":"linear-gradient(to bottom, black 75%, transparent 100%)"},children:(0,g.jsx)(r.k,{sx:P.n,justifyContent:"center",alignItems:"top",width:"150px",h:16,children:(0,g.jsx)(O.xu,{transformOrigin:"top",transform:"scale(0.15)",pointerEvents:"none",children:(0,g.jsx)(P.m,{content:o,theme:c})})})}),(0,g.jsx)(d.x,{flex:1,fontSize:"sm",children:t}),(0,g.jsx)(k.M,{in:i,children:(0,g.jsx)(S.G,{icon:y.LE,fixedWidth:!0})})]})},Y=n(75652),J=n.n(Y),X=n(5766),Q=n(36895),$=n(11558),ee=n(85745),et=n(97443),en=(0,s.memo)(function(e){var t=e.message,n=e.editor,r=t.suggestions.slice(0,8),i=J()(r.map(function(e){return e.query})),s=0===i.length?l.ag._({id:"QICyFn"}):1==i.length?l.ag._({id:"x/YBq7",values:{0:i[0].toLowerCase()}}):2==i.length?l.ag._({id:"Tn1hkb",values:{0:i[0].toLowerCase(),1:i[1].toLowerCase()}}):l.ag._({id:"Z918ro",values:{0:i[0].toLowerCase(),1:i[1].toLowerCase(),2:i[2].toLowerCase()}});return(0,g.jsx)(f.K,{children:(0,g.jsxs)(o.K,{align:"start",children:[(0,g.jsxs)(d.x,{children:[s," ",(0,g.jsx)(c.cC,{id:"CvUN7V"})]}),(0,g.jsx)(d.x,{color:"gray.500",textAlign:"center",fontSize:"xs",children:(0,g.jsx)(c.cC,{id:"fg3FfA"})}),(0,g.jsx)(X.M,{columns:2,spacing:2,w:"100%",children:r.map(function(e){var t=e.image,r=e.query,o=e.provider,i=(0,et.SN)(t.thumbnailUrl,{width:250,height:250});return(0,g.jsx)(Q.E,{src:i,fallbackSrc:t.thumbnailUrl,onDragStart:function(){n&&(0,ee.UV)(n,{type:"image",attrs:(0,$.C)(t,r,o)})},h:24,draggable:!0,w:"100%",borderRadius:"md",transitionDuration:"normal",transitionProperty:"common",objectFit:"cover",cursor:"grab",_hover:{shadow:"outline"}},t.id)})}),(0,g.jsx)(q,{message:t})]})})});en.displayName="SuggestImage";var er=(0,s.memo)(function(e){var t=e.message,n=e.editor,r=(0,A.E)(),o=(0,I.T)(),i=L(n,t.suggestions),s=i.activeSuggestion,a=i.forceUpdate;return(0,g.jsx)(f.K,{from:t.from,children:(0,g.jsxs)(m.g,{spacing:2,align:"start",children:[(0,g.jsx)(d.x,{children:t.message||"Here are some ideas:"}),t.suggestions.map(function(e,i){return(0,g.jsx)(eo,{value:e,isSelected:e===s,onClick:function(){if(n){var i=e.modification;r.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:i.type,suggestionLabel:i.description,suggestionContent:i.getContentForTracking()}),i.apply(n,o),a()}}},i)}),(0,g.jsx)(q,{message:t})]})})}),eo=function(e){var t=e.value,n=e.isSelected,r=e.onClick,o=(0,s.useCallback)(function(){n||r()},[n,r]);return(0,g.jsxs)(w.U,{onClick:o,cursor:"pointer",p:4,borderRadius:"xl",_hover:{bg:"whiteAlpha.600"},bg:"white",transitionProperty:"common",transitionDuration:"normal",spacing:4,shadow:"md",align:"start",children:[(0,g.jsxs)(O.xu,{children:[(0,g.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:t.reason}),(0,g.jsx)(d.x,{fontSize:"sm",noOfLines:3,children:t.value.replace(/(<([^>]+)>)/gi,"")})]}),(0,g.jsx)(k.M,{in:n,children:(0,g.jsx)(S.G,{icon:y.LE,fixedWidth:!0})})]})};er.displayName="SuggestText";var ei=n(18504),es=n(42353),ea=n(57560),ec=n(88550),el=(0,s.memo)(function(e){var t=e.message,n=e.editor,r=ex().onClose,i=(0,A.E)(),a=(0,I.T)(),l=L(n,t.suggestions).activeSuggestion,u=(0,s.useCallback)(function(e){n&&(i.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:t.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(n,a))},[n,i,t,a]);return(0,g.jsx)(f.K,{children:(0,g.jsxs)(o.K,{children:[(0,g.jsx)(d.x,{children:t.message}),t.suggestions.map(function(e){var t=e.themeId,n=e.label,r=e.isOriginal;return(0,g.jsxs)(s.Fragment,{children:[r&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C.i,{borderColor:"blackAlpha.200"}),(0,g.jsxs)(d.x,{children:[n,": "]})]}),(0,g.jsx)(ed,{themeId:t,onClick:function(){return u(e.modification)},isSelected:(null==l?void 0:l.themeId)===t})]},t)}),(0,g.jsx)(d.x,{children:(0,g.jsx)(c.cC,{id:"eVMeEi"})}),(0,g.jsx)(x.z,{leftIcon:(0,g.jsx)(S.G,{icon:ei.q2}),w:"100%",onClick:function(){r(),ec.T.emit("toggleThemeBlock",!0)},children:(0,g.jsx)(c.cC,{id:"ni+gIz"})}),(0,g.jsx)(q,{message:t})]})})});el.displayName="SuggestThemes";var ed=(0,s.memo)(function(e){var t=e.themeId,n=e.onClick,r=e.isSelected,o=(0,ea.c2)(t);return"new"===o.id?null:(0,g.jsxs)(m.g,{onClick:n,cursor:"pointer",p:2,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:r?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",children:[(0,g.jsx)(O.xu,{borderRadius:"lg",overflow:"hidden",w:"100%",children:(0,g.jsx)(es.n,{theme:o,variant:"outline"})}),(0,g.jsxs)(w.U,{alignSelf:"flex-start",color:r?"trueblue.700":void 0,children:[(0,g.jsx)(k.M,{in:r,unmountOnExit:!0,children:(0,g.jsx)(S.G,{icon:y.LE,fixedWidth:!0})}),(0,g.jsx)(d.x,{fontSize:"sm",fontWeight:r?"semibold":void 0,children:o.name})]})]})});ed.displayName="ThemeMessageThumbnailPreview";var eu=n(29705),ef=n(84103),ep=(0,s.memo)(function(e){var t=e.message,n=e.sendMessage;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.K,{children:t.message&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(d.x,{children:[(0,g.jsx)("span",{className:"emoji",role:"img","aria-label":"sorry",children:"\uD83D\uDE14"})," ",t.message," ",t.learnMoreLink&&(0,g.jsxs)(ef.r,{href:t.learnMoreLink,textDecoration:"underline",isExternal:!0,children:["Learn more ",(0,g.jsx)(eu.h,{mx:"2px",fontSize:"sm"})]})]})})}),(0,g.jsx)(d.x,{color:"gray.500",fontSize:"sm",children:"Here are some other things I can do:"}),(0,g.jsx)(v,{sendMessage:n})]})});ep.displayName="UnsupportedTask";var eh=(0,s.memo)(function(e){var t=e.message;return(0,g.jsx)(f.K,{warning:t.warning,from:t.from,children:t.message})});eh.displayName="UserDesignerMessage";var em=s.createContext({scrollToBottom:function(){},onClose:function(){}}),ex=function(){return s.useContext(em)},eg=function(e){var t=e.messages,n=e.scrollSelector,c=e.editor,l=e.sendMessage,d=e.isLoading,u=e.onClose,f=(0,a.q)(),p=f.hasEnoughCreditsToChat,h=f.isCreditsReady&&!p,m=(0,s.useCallback)(function(){var e=n&&document.querySelector(n);e&&setTimeout(function(){requestAnimationFrame(function(){e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})},400)},[n]),x=(0,s.useRef)({scrollToBottom:m,onClose:u});return x.current.scrollToBottom=m,(0,g.jsx)(em.Provider,{value:x.current,children:(0,g.jsx)(r.k,{flex:1,flexDirection:"column",justifyContent:"flex-end",children:(0,g.jsx)(o.K,{pt:12,spacing:2,children:(0,g.jsxs)(i.M,{children:[(0,g.jsx)(j,{sendMessage:l,hideSuggestions:h}),t.map(function(e,t){return"text"===e.type?(0,g.jsx)(eh,{message:e},e.timestamp):"suggestImages"===e.type?(0,g.jsx)(en,{message:e,editor:c},e.timestamp):"suggestText"===e.type?(0,g.jsx)(er,{message:e,editor:c},e.timestamp):"suggestThemes"===e.type?(0,g.jsx)(el,{message:e,editor:c},e.timestamp):"suggestContent"===e.type?(0,g.jsx)(B,{message:e,editor:c},e.timestamp):"unsupported"===e.type?(0,g.jsx)(ep,{message:e,sendMessage:l},e.timestamp):(console.warn("[MessageList] Message type not found",e),null)}),h&&(0,g.jsx)(b.x,{}),d&&(0,g.jsx)(ev,{},"loading")]})})})})},ev=function(){return(0,g.jsx)(f.K,{from:"Designer",children:(0,g.jsx)(ej,{})})},ej=function(){return(0,g.jsxs)(r.k,{className:"bouncing-loader",justify:"center",children:[(0,g.jsx)("div",{}),(0,g.jsx)("div",{}),(0,g.jsx)("div",{})]})}},2032:function(e,t,n){n.d(t,{E:function(){return a}});var r=n(2784),o=n(64805),i=n(36157),s=n(61926),a=function(){var e=(0,i.qr)(),t=(0,i.TL)(),n=(0,r.useCallback)(function(e,n){t((0,s.Cj)({taskContext:e,provider:n})),(0,o.hq)({interactionId:e.interactionId,interface:"chat",inputMessage:e.message,docId:e.docId,cardId:e.editorContext.card.cardId,provider:n})},[t]),a=(0,r.useCallback)(function(e){t((0,s.z5)(e))},[t]),c=(0,r.useCallback)(function(e){t((0,s.zw)(e))},[t]),l=(0,r.useCallback)(function(n){t((0,s._M)(n));var r=n.taskContext,i=(0,s.FK)(r.interactionId)(e.getState());if(!i){console.error("[trackRequestComplete] no data found for interactionId",r.interactionId);return}(0,o.gb)({interactionId:r.interactionId,interface:"chat",docId:r.docId,cardId:i.cardId,classification:i.classification,provider:i.provider,inputMessage:r.message,inputContent:i.inputContent,rawResponse:n.resp,outputMessage:i.outputMessage,outputContent:i.outputContent,latency:performance.now()-r.startTime,timeToComplete:performance.now()-r.startTime})},[t,e]),d=(0,r.useCallback)(function(t){var n=t.outputMessage,r=t.errorMessage,i=t.errorCode,a=t.interactionId,c=t.resp,l=t.errorName,d=(0,s.FK)(a)(e.getState());if(!d){console.error("[trackRequestError] no data found for interactionId",a);return}(0,o.pQ)({interactionId:a,interface:"chat",docId:d.docId,cardId:d.cardId,classification:d.classification,provider:d.provider,inputMessage:d.message,inputContent:d.inputContent,outputMessage:n,errorName:l,errorMessage:r,errorCode:i,rawResponse:c,latency:performance.now()-d.startTime})},[e]),u=(0,r.useCallback)(function(t){var n=t.interactionId,r=t.retriesRemaining,i=t.resp,a=(0,s.FK)(n)(e.getState());if(!a){console.error("[trackRequestRetry] no data found for interactionId",n);return}(0,o.Wf)({interactionId:n,interface:"chat",classification:a.classification,docId:a.docId,cardId:a.cardId,provider:a.provider,inputMessage:a.message,inputContent:a.inputContent,rawResponse:i,retriesRemaining:r})},[e]),f=(0,r.useCallback)(function(t){var n=t.interactionId,r=t.suggestionContent,i=t.suggestionType,a=t.suggestionLabel,c=t.autoApplied,l=(0,s.FK)(n)(e.getState());if(!l){console.error("[trackSuggestionApplied] no data found for interactionId",n);return}var d="string"==typeof r?r:"html"===r.type?r.html:"json"===r.type?r.json:void 0;(0,o.vL)({interactionId:n,interface:"chat",docId:l.docId,cardId:l.cardId,classification:l.classification,provider:l.provider,inputMessage:l.message,inputContent:l.inputContent,outputMessage:l.outputMessage,outputContent:l.outputContent,suggestionType:i,suggestionLabel:a,suggestionContent:d,autoApplied:!!c})},[e]);return(0,r.useMemo)(function(){return{trackClassification:a,trackRequestComplete:l,trackInputContent:c,trackRequestSent:n,trackRequestError:d,trackRequestRetry:u,trackSuggestionApplied:f}},[a,c,l,n,d,u,f])}},71812:function(e,t,n){n.d(t,{K:function(){return g}});var r=n(95235),o=n(82269),i=n(11919),s=n(34638),a=n(72360),c=n(48322),l=n(76360),d=n(75342),u=n(73137),f=n(52322),p=["children","from","warning","cardStyleOverrides","error"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=(0,u.E)(i.k),g=function(e){var t=e.children,n=e.from,r=e.warning,i=void 0!==r&&r,u=e.cardStyleOverrides,h=e.error,g=void 0!==h&&h,v=(0,o.Z)(e,p),j=(0,s.ff)("orchid.400","blue.700"),b=(0,s.ff)("trueblue.50","sunglow.700"),y=(0,s.ff)("red.100","red.500"),C="User"===(void 0===n?"Designer":n),w=C?m({bg:j,borderBottomRightRadius:0,color:"white"},u):m({bg:i?void 0:g?y:b,borderBottomLeftRadius:0},u);return(0,f.jsx)(x,m(m({justify:C?"flex-end":"flex-start",initial:{opacity:0,translateX:-20},animate:{opacity:1,translateX:0}},v),{},{children:i?(0,f.jsxs)(a.b,m(m({status:"warning",borderColor:"orange.200",borderWidth:"1px",fontSize:"inherit"},w),{},{children:[(0,f.jsx)(c.z,{}),t]})):(0,f.jsx)(l.Z,m(m({size:"sm",shadow:"sm",borderRadius:"xl",variant:"filled",minH:0,borderColor:g?"red.200":"blackAlpha.200"},w),{},{children:(0,f.jsx)(d.e,{py:2,px:2,children:t})}))}))}},30299:function(e,t,n){n.d(t,{x:function(){return m}});var r=n(55452),o=n(87254),i=n(11919),s=n(45650),a=n(2784),c=n(50646),l=n(61166),d=n(77399),u=n(36157),f=n(71812),p=n(52322),h=function(){var e=Date.now();return{from:"Designer",type:"text",message:o.ag._({id:"ftZED+"}),timestamp:e}},m=(0,a.memo)(function(e){var t=e.cardStyleOverrides,n=(0,d.M)({id:"ai-credits-modal-in-message"}),o=n.isOpen,m=n.onOpen,x=n.onClose,g=(0,u.CG)(l.Lj),v=(0,a.useMemo)(function(){return h().message},[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(f.K,{from:"Designer",error:!0,cardStyleOverrides:t,children:[(0,p.jsx)("strong",{children:v})," ",(0,p.jsx)(r.cC,{id:"//XCY6"}),(0,p.jsx)(i.k,{pt:3,children:(0,p.jsx)(s.z,{onClick:m,leftIcon:(0,p.jsx)("span",{role:"img","aria-label":"credits",children:"\uD83D\uDCB0"}),children:(0,p.jsx)(r.cC,{id:"89ftLJ"})})})]}),(0,p.jsx)(c.H,{credits:g,onClose:x,isOpen:o,onOpen:m})]})})},94603:function(e,t,n){n.d(t,{Rr:function(){return tq},QK:function(){return tH}});var r,o,i=n(95235),s=n(82269),a=n(11919),c=n(87202),l=n(2784),d=n(25232),u=n(31358),f=n(91437),p=n(36157),h=n(93848),m=n(17349),x=n(48842),g=n(64629),v=n(55452),j=n(71354),b=n(67887),y=n(49929),C=n(97261),w=n(65358),O=n(90090),k=n(36188),S=n(58166),I=n(86733),E=n(36895),P=n(91012),D=n(45650),A=n(72360),T=n(66724),R=n(18751),_=n(71812),L=n(52322),M=function(e){var t=e.onClose;return(0,L.jsxs)(j.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,L.jsx)(E.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,L.jsx)(_.K,{children:(0,L.jsx)(P.x,{children:(0,L.jsx)(v.cC,{id:"jVQv+Q"})})}),(0,L.jsx)(D.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,L.jsx)(y.G,{icon:I.faXmark}),onClick:t,children:(0,L.jsx)(v.cC,{id:"pqZJT2"})})]})},z=function(){return(0,L.jsxs)(A.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,L.jsx)(T.C,{children:(0,L.jsx)(v.cC,{id:"rvbk/4"})}),(0,L.jsx)(R.X,{children:(0,L.jsx)(v.cC,{id:"XNkIFY"})})]})},N=n(12677),Z=n(87254),G=n(8283),F=n(21891),W=n(25793),U=n(94659),V=n(27191),H=n(51495),q=n(67218),B=n(22550),K=n(28339),Y="40px",J=function(e){var t=e.value,n=e.onChange,r=e.onSubmit,o=e.isLoading,i=e.editor;e.resetMessages,(0,K.F1)(i);var s=i.state,a=s.selection,c=s.doc.textBetween(a.from,a.to,"\n"),d=(0,q.q)().hasEnoughCreditsToChat,u=(0,B.fg)(),f=(0,l.useRef)(null),p=(0,l.useState)(!1),h=p[0],m=p[1],x=a instanceof V.qv,g=a instanceof V.Bs,v=x&&"card"===a.node.type.name,j=a.empty||v?Z.ag._({id:"XrfE9D"}):x?Z.ag._({id:"CsUli9"}):g&&c?Z.ag._({id:"+NPPZN",values:{0:c.length>50?c.slice(0,50)+"...":c}}):Z.ag._({id:"/fY1js"}),w=(0,l.useCallback)(function(){f.current&&(f.current.style.height=Y,f.current.style.height="".concat(f.current.scrollHeight,"px"))},[]);return(0,l.useEffect)(function(){return i.on("selectionUpdate",w),function(){i.off("selectionUpdate",w)}},[i,w]),(0,l.useEffect)(function(){h?w():setTimeout(function(){m(!0),w()},400)},[h,j,w,t]),(0,L.jsxs)(G.U,{align:"end",children:[(0,L.jsx)(F.B,{size:"md",children:(0,L.jsx)(W.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:Y,minH:Y,ref:f,resize:"none",maxH:h?32:Y,bg:"white",shadow:"md",autoFocus:!0,isDisabled:!d,placeholder:j,value:t,onKeyPress:function(e){"Enter"===e.key&&t.length>0&&!o&&(e.preventDefault(),r())},onChange:function(e){return n(e.target.value)},pr:12})}),(0,L.jsx)(C.kH,{placement:"top",label:(0,L.jsxs)(U.g,{spacing:0,children:[(0,L.jsx)(P.x,{children:"Send request"}),!u&&(0,L.jsxs)(P.x,{color:"gray.400",children:[(0,L.jsx)(H.J,{type:"chatSuggestion",ml:0})," if successful"]}),(0,L.jsx)(C.f2,{shortcut:"Enter"})]}),children:(0,L.jsx)(b.h,{"aria-label":"Send message",isDisabled:!t||o,size:"sm",h:Y,w:Y,variant:"solid",icon:(0,L.jsx)(y.G,{icon:N.Fz,fixedWidth:!0}),onClick:r})})]})},X=n(60394),Q=n(31355),$=n(20406),ee=n(28526),et=n.n(ee),en=n(12483),er=n(58872),eo=n(26909),ei=n(28811),es=n(96412),ea=n(13089),ec=n(41701),el=n(90129),ed=n(29017),eu=n(48200),ef=n(53418),ep=n(86615),eh=n(16467),em=n(55304),ex=n(9433),eg=[new(function(e){(0,el.Z)(s,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(s);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function s(e){var t;return(0,es.Z)(this,s),t=o.call(this,e),(0,i.Z)((0,ec.Z)(t),"prompt",void 0),t.prompt=e.prompt,t}return(0,ea.Z)(s,[{key:"runPrompt",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.input,r=t.context,o=t.variables,i=t.trackFns,a=void 0===(s=t.retries)?2:s,e.next=3,(0,ep.I)(n,r.interactionId,{timeout:eh.VH.get("aiRequestTimeouts").basicReply});case 3:if(c=e.sent){e.next=6;break}throw Error("Couldn't get response from prompt");case 6:if(!((0,em.y)(c)||null!=c&&c.includes("```"))){e.next=11;break}if(!(a<=0)){e.next=9;break}throw new er.eo("Did not receive proper response after retries",{chatMessage:"Sorry, I am having trouble understanding. Could you try asking in a different way?",inputMessage:r.message,resp:c,interactionId:r.interactionId});case 9:return i.trackRequestRetry({interactionId:r.interactionId,retriesRemaining:a,resp:c}),e.abrupt("return",this.runPrompt({input:n,context:r,variables:o,trackFns:i,retries:a-1}));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"run",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.context,r=t.addMessage,o=t.history,i=t.trackFns,s=t.provider,a={message:n.message},c=(0,ex.x)(o||[]),l=this.prompt.prepare({variables:a,history:c,params:{provider:s},interactionId:n.interactionId}),e.next=6,this.runPrompt({input:l,context:n,variables:a,trackFns:i,retries:1});case 6:d=e.sent,i.trackRequestComplete({taskContext:n,outputMessage:d}),r({from:"Designer",type:"text",message:d,resp:d,interactionId:n.interactionId});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),s}(ef.B))({key:"CHAT",description:"A general chat message, or a request that doesn't fit any of the previous categories",classifyExamples:["hi how are you","hdfoho;safjw","help there are bees everywhere","great job!","this looks ugly"],prompt:new eo.V({systemPromptOperation:ei.Run.BasicReplyChatSystem,userPromptOperation:ei.Run.BasicReplyChatUser,variables:["message"],params:{maxTokens:150,temperature:0}})})],ev=function(e){return eg.find(function(t){return t.key===e})},ej=function(e){return!!eg.find(function(t){return t.key===e})},eb=n(12741),ey=n(81161),eC=n(80389),ew=n(62142),eO=n(22681),ek=n(9850),eS=n.n(ek),eI=n(86482),eE=n(37057),eP=n(38105),eD=n(44719),eA=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","insert-card"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),(0,i.Z)(this,"afterCardId",void 0),(0,i.Z)(this,"content",void 0),this.description=t.description,this.cardId=t.cardId,this.afterCardId=t.afterCardId,this.content=t.content}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){return!!(0,eE.Bw)(e,this.cardId)}},{key:"getPreviewJson",value:function(e){var t=e.state.tr;this.transact(e,t);var n=eS()(t.doc.toJSON());return(0,eD.Y0)(n,this.cardId)}},{key:"apply",value:function(e){if(this.isApplied(e)){console.debug("[InsertCardModification] NOT applying modification, card already exists with cardId=".concat(this.cardId),{modification:this});return}var t=e.state.tr;this.transact(e,t),console.debug("[InsertCardModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,eI.YS)({editor:e,cardId:this.cardId})}},{key:"transact",value:function(e,t){var n=(0,eE.Bw)(e,this.afterCardId);if(!n)return null;var r=(0,eD.Fr)(e,this.content),o=n.pos+n.node.nodeSize;t.insert(o,r.content.firstChild);var i=(0,eP.t)(t.doc.resolve(o),1);return t.setSelection(i),{from:o,to:o+t.doc.nodeAt(o).nodeSize}}},{key:"getContentForTracking",value:function(){return this.content}}]),e}(),eT=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","remove-card"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),this.description=t.description,this.cardId=t.cardId}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){return!(0,eE.Bw)(e,this.cardId)}},{key:"getPreviewJson",value:function(e){return null}},{key:"apply",value:function(e){var t=e.state.tr,n=(0,eE.Bw)(e,this.cardId);n&&(t.delete(n.pos,n.pos+n.node.nodeSize),console.debug("[RemoveCardModification] Applying modification",{modification:this}),e.view.dispatch(t))}},{key:"getContentForTracking",value:function(){return this.cardId}}]),e}(),eR=n(26349),e_=function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p,h,m,x;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,i=(o=t.response).suggestion,s=o.message,a=o.raw,i){e.next=3;break}throw new er.$D("No card content returned",{interactionId:r.interactionId,resp:a,chatMessage:s||(0,eR.az)(),inputMessage:r.message});case 3:return e.next=5,(0,ey.y)(i);case 5:return c=e.sent.content,l=ew.C2.generate(),d=(0,eO.W3)((0,eO.VA)(n)),u=(0,eC.S)({bodyContent:c.toJSON(),index:1,docFormatKey:d.key,theme:r.editorContext.theme,cardId:l}),x={from:"Designer",type:"suggestContent",resp:a,message:s||"How about this?",suggestions:[p={label:"New card",modification:f=new eA({description:"New Card",content:{type:"json",json:[u]},cardId:l,afterCardId:r.editorContext.card.cardId}),jsonContentPreview:f.getPreviewJson(n)},m={label:"Remove card",modification:h=new eT({description:"Remove card",cardId:l}),jsonContentPreview:h.getPreviewJson(n)}],interactionId:r.interactionId},console.debug("[addCard]",{insert:p,remove:m,message:s,html:i,cardLayout:u,content:c}),e.abrupt("return",{messages:[x],suggestionToApply:p});case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6),eL=new eo.V({systemPromptOperation:ei.Run.AddCardSystem,userPromptOperation:ei.Run.AddCardUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}}),eM=new e_({key:"ADD_CARD",description:"Add a new card after the current one",classifyExamples:["add a new slide","add a card describing our mission","i want a new section for leadership development","make another card","on a new card compare the two options in a table"],classifyReply:"Ok, I'll start writing a new card...",prompt:eL}),ez=n(67397),eN=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","set-card-layout"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),(0,i.Z)(this,"layout",void 0),this.description=t.description,this.cardId=t.cardId,this.layout=t.layout}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){var t=(0,eE.Bw)(e,this.cardId);return t?t.node.attrs.layout===this.layout:(console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted")),!1)}},{key:"getPreviewJson",value:function(e){var t=e.state.tr;this.transact(e,t);var n=eS()(t.doc.toJSON()),r=(0,eD.Y0)(n,this.cardId);return console.debug("[SetCardLayoutModification.getPreviewJson] result",r),r}},{key:"apply",value:function(e){if(this.isApplied(e)){console.debug("[SetCardLayoutModification] NOT applying modification, card already has layout=".concat(this.layout),{modification:this});return}var t=e.state.tr;this.transact(e,t),console.debug("[SetCardLayoutModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,eI.YS)({editor:e,cardId:this.cardId})}},{key:"transact",value:function(e,t){var n=(0,eE.Bw)(e,this.cardId);if(!n){console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted"));return}(0,ez.G)(e,t,n.pos,this.layout)}},{key:"getContentForTracking",value:function(){return this.layout}}]),e}(),eZ=function(){return Z.ag._({id:"ppX7+s"})},eG=new(function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,t.rangeId,i=(o=t.response).suggestion,s=o.raw,a=o.message,i){e.next=3;break}throw new er.$D("No card layout returned",{resp:s,chatMessage:eZ(),inputMessage:r.message,interactionId:r.interactionId});case 3:if((0,eE.ol)(i)){e.next=6;break}throw console.error("Invalid card layout:",i),new er.$D("Invalid card layout: ".concat(i),{resp:s,chatMessage:eZ(),inputMessage:r.message,interactionId:r.interactionId});case 6:return c=new eN({description:Z.ag._({id:"nyQWMb"}),cardId:r.editorContext.card.cardId,layout:i}),l={label:Z.ag._({id:"nyQWMb"}),modification:c,jsonContentPreview:c.getPreviewJson(n)},d=new eN({description:Z.ag._({id:"HxF6Fk"}),cardId:r.editorContext.card.cardId,layout:r.editorContext.card.attrs.layout}),u={label:Z.ag._({id:"HxF6Fk"}),modification:d,jsonContentPreview:d.getPreviewJson(n)},f={from:"Designer",type:"suggestContent",resp:s,message:a||Z.ag._({id:"pMSbe+"}),interactionId:r.interactionId,suggestions:[l,u]},e.abrupt("return",{messages:[f],suggestionToApply:l});case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6))({key:"MOVE_ACCENT_IMAGE",description:"Move or remove the accent image of the card. Use ADD_IMAGE to add accent images.",classifyExamples:["move the sand dune to the left","remove the cover photo"],classifyReply:"Ok, I will move the accent image to the left...",getTaskTarget:function(e){return e.card},prompt:new eo.V({systemPromptOperation:ei.Run.ChangeAccentImageLayoutSystem,userPromptOperation:ei.Run.ChangeAccentImageLayoutUser,variables:["html","message"],params:{temperature:.2,maxTokens:100}}),checkEnabled:function(e){return"blank"!==e.card.attrs.layout}}),eF=new eo.V({systemPromptOperation:ei.Run.ChangeContentSystem,userPromptOperation:ei.Run.ChangeContentUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}}),eW=new eR.w6({key:"CHANGE_CONTENT",description:"Rephrase, summarize, expand, change text formatting, add content, or express ideas differently.",classifyExamples:["condense this to just the key points","say this like a pirate","make this more formal","add a box about health benefits","add more text please","make the bullets red","make the text bigger","fill in the last  column","write something about ___","add ___ to the table"],classifyReply:"Ok, I'll try making it shorter...",prompt:eF}),eU=n(62670),eV=n(81333),eH=n(40163),eq=n(31470),eB=n(11558),eK=new eo.V({systemPromptOperation:ei.Run.RateImagesSystem,userPromptOperation:ei.Run.RateImagesUser,variables:["dataset"],params:{temperature:.1,maxTokens:100}}),eY=(r=(0,$.Z)(et().mark(function e(t,n){var r,o,i;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e,t){var n=e.description,r=e.query;return"".concat(t+1,": ").concat(n,": ").concat(r)}).join("\n"),o=eK.prepare({variables:{dataset:r},history:[]}),e.next=4,(0,ep.I)(o,n,{timeout:eh.VH.get("aiRequestTimeouts").rateImages});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="";case 7:return i=e.t0,e.abrupt("return",i.split("\n").map(function(e){var t=e.split("-");return Number((0,eV.Z)(t,2)[1].trim())}));case 9:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});function eJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eJ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eQ={GOOGLE:"google",UNSPLASH:"unsplash",GIPHY:"giphy"},e$=new(function(e){(0,el.Z)(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(i);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function i(){return(0,es.Z)(this,i),o.apply(this,arguments)}return(0,ea.Z)(i,[{key:"getResponseData",value:(n=(0,$.Z)(et().mark(function e(t,n){var r,o,i,s;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.replaceAll(this.key,"").split("\n").map(function(){var e=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split(": "),o=(r=(0,eV.Z)(n,2))[0],i=r[1].split(",").map(function(e){return e.trim()}).slice(0,2),a="google"===(s=eQ[o.trim()]||"web")?"web":s,e.next=6,(0,eH.J)({queries:i,count:eq.x.count,provider:a,prefetch:!0,options:{gammaFeature:"aiChat"}});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return console.debug("[SuggestImagesTask][getResponseData] allResults",r=e.sent.flat()),console.debug("[SuggestImagesTask][imageRatingData]",{imagesToRate:o=r.map(function(e){var t=e.image,n=e.query,r=e.provider,o=(0,eB.C)(t,n,r);return{description:(0,eB.K)(o)||"",query:n}})}),e.prev=6,e.next=9,eY(o,n);case 9:if(console.debug("[SuggestImagesTask][imageRatingValues]",{imageRatingValues:i=e.sent}),!(i.length!==r.length)){e.next=13;break}throw Error("Image rating values length does not match allResults length");case 13:return console.debug("[SuggestImagesTask][allResultsSorted]",{allResultsSorted:s=r.map(function(e,t){return eX(eX({},e),{},{rating:i[t]})}).sort(function(e,t){return t.rating-e.rating})}),e.abrupt("return",s);case 19:e.prev=19,e.t0=e.catch(6),console.warn("[SuggestImagesTask] Error rating images. Returing unsorted results.",e.t0);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}},e,this,[[6,19]])})),function(e,t){return n.apply(this,arguments)})},{key:"getResponseMessages",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.context,o=(r=t.response).message,i=r.raw,s=r.suggestion){e.next=3;break}throw new er.$D("No image results were returned",{resp:i,inputMessage:n.message,chatMessage:o||"I'm sorry, I wasn't able to find any images for this.",interactionId:n.interactionId});case 3:return e.next=5,this.getResponseData(s,n.interactionId);case 5:return a={from:"Designer",type:"suggestImages",suggestions:e.sent,resp:i,interactionId:n.interactionId,message:o||"Here are some suggestions:"},e.abrupt("return",{messages:[a]});case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),i}(eR.w6))({key:"ADD_IMAGE",description:"Add images, or replace an existing image. Do not use for moving or removing images.",classifyExamples:["add a picture of a bus","find some different images","this needs a pic","show me dolphins","find a meme of stonks","give me more images","add a background image","i need a graph of population over time"],classifyReply:"Let me look for some good bus pictures...",getTaskTarget:function(e){return e.defaultRange},prompt:new eo.V({systemPromptOperation:ei.Run.SuggestImagesSystem,userPromptOperation:ei.Run.SuggestImagesUser,variables:["html","message"],params:{temperature:.7,maxTokens:500}})}),e0=n(75248);function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var e3=new(function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseData",value:function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return e5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e5(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e.matchAll(/^\/\/\s*(.*)$\n(.*)$/gm));try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o[1],s=o[2];n.push({reason:i,value:s})}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,o=t.rangeId,s=(i=t.response).suggestion,a=i.message,c=i.raw,s){e.next=3;break}throw new er.$D("No suggestions found in response",{interactionId:r.interactionId,inputMessage:r.message,chatMessage:a||Z.ag._({id:"7KKeOM"})});case 3:return l=this.getResponseData(s).map(function(e){var t=new e0.O(n,{description:e.reason,content:{type:"html",html:e.value},rangeId:o});return e2(e2({},e),{},{modification:t})}),d=this.determineTaskTarget(r.editorContext).html,u=new e0.O(n,{description:Z.ag._({id:"HxF6Fk"}),content:{type:"html",html:d},rangeId:o}),f={reason:Z.ag._({id:"HxF6Fk"}),value:d,modification:u},p={from:"Designer",type:"suggestText",message:a||Z.ag._({id:"3YHvwF"}),resp:c,suggestions:[].concat((0,eb.Z)(l),[f]),interactionId:r.interactionId},e.abrupt("return",{messages:[p]});case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6))({key:"SUGGEST_TEXT",description:"Open-ended request to rephrase a sentence or paragraph",classifyExamples:["write a better headline","How else could i say this?","this feels too corporate","suggest a more engaging way to say this","give me a more interesting description"],classifyReply:"Let me think of some other headlines...",getTaskTarget:function(e){return e.selectionRange},prompt:new eo.V({systemPromptOperation:ei.Run.SuggestTextSystem,userPromptOperation:ei.Run.SuggestTextUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),checkEnabled:function(e){var t=e.selection,n=t instanceof V.Bs,r=t.$from.parent.eq(t.$to.parent);return n&&!t.empty&&t.to-t.from<800&&r}}),e6=function(){function e(t,n){(0,es.Z)(this,e),(0,i.Z)(this,"type","change-theme"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"themeId",void 0),this.description=n.description,this.themeId=n.themeId}return(0,ea.Z)(e,[{key:"apply",value:function(e,t){t.setThemeWithAccentImages(this.themeId)}},{key:"isApplied",value:function(e,t){return t.isThemeApplied(this.themeId)}},{key:"getPreviewJson",value:function(){return null}},{key:"getContentForTracking",value:function(){return this.themeId}}]),e}(),e4=function(e){(0,el.Z)(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(i);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function i(){return(0,es.Z)(this,i),o.apply(this,arguments)}return(0,ea.Z)(i,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p,h;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editor,r=t.context,i=(o=t.response).raw,s=o.suggestion,a=o.message,l=(c=t.themeModificationController).currentThemeId,d=c.isValidTheme,u=null==s?void 0:s.split("\n"),e.next=5,this.getFilteredSuggestions({ids:u,idToRemove:l,editor:n,isValid:d});case 5:if(0!==(f=e.sent).length){e.next=8;break}throw new er.$D("[SuggestContentTask] No themes provided in prompt response",{resp:i,chatMessage:Z.ag._({id:"GNHk+9"}),inputMessage:r.message,interactionId:r.interactionId});case 8:return p={label:Z.ag._({id:"HxF6Fk"}),themeId:l,modification:new e6(n,{description:Z.ag._({id:"HxF6Fk"}),themeId:l}),isOriginal:!0},h={from:"Designer",type:"suggestThemes",resp:i,message:a||Z.ag._({id:"pMSbe+"}),suggestions:[].concat((0,eb.Z)(f),[p]),interactionId:r.interactionId},e.abrupt("return",{messages:[h],suggestionToApply:f[0]});case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getFilteredSuggestions",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ids,r=t.idToRemove,o=t.editor,i=t.isValid,!(!n||0===n.length)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,Promise.all(n.map(function(e){return i(e).then(function(t){return t?e:null})}));case 5:return s=e.sent.filter(function(e){return null!==e}).filter(function(e){return e!==r}).map(function(e){var t=new e6(o,{description:Z.ag._({id:"nyQWMb"}),themeId:e});return{label:Z.ag._({id:"nyQWMb"}),themeId:e,modification:t}}),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})}]),i}(eR.w6),e8=new eo.V({systemPromptOperation:ei.Run.SuggestThemeSystem,userPromptOperation:ei.Run.SuggestThemeUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:100,model:"gpt-4"}}),e7=new e4({key:"SUGGEST_THEME",description:"Suggest a theme for the deck. This task will suggest themes based on the deck content or the prompt",classifyExamples:["change the theme","give me a blue theme","change the color palette","make this a dark theme","use a more colorful theme","let's change the look and the feel","change the theme to lilac and periwinkle","i'd like it to look more cheerful and welcoming"],classifyReply:"Let me find some themes...",prompt:e8}),e9=[eG,eU.a,eW,e3,e$,eM,e7],te=function(e){return e9.find(function(t){return t.key===e})},tt=function(e){return!!e9.find(function(t){return t.key===e})},tn=function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(e){var t;return(0,es.Z)(this,o),t=r.call(this,e),(0,i.Z)((0,ec.Z)(t),"apology",void 0),(0,i.Z)((0,ec.Z)(t),"apologyLink",void 0),t.apology=e.apology,t.apologyLink=e.apologyLink,t}return(0,ea.Z)(o,[{key:"run",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.classificationResult,r=t.addMessage,o=t.context,i=t.trackFns,r({from:"Designer",type:"unsupported",task:n.classification,message:this.apology,learnMoreLink:this.apologyLink,resp:n.resp,interactionId:o.interactionId}),i.trackRequestComplete({taskContext:o,outputMessage:this.apology});case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),o}(ef.B),tr=new tn({key:"CHANGE_CARD_BACKGROUND",description:"Change the background of the entire section.",classifyExamples:["make the background red","put a tunnel in the background","remove the background","get rid of the image in the background"],apology:"Sorry, I can't change backgrounds yet, but you can click on a card and change the background yourself. You can also change the doc background by clicking the Theme button."}),to=new tn({key:"CHANGE_FONT",description:"Change the font family or font style.",classifyExamples:["give me a more playful font","make the headings use arial","change the font to be more readable"],apology:"Sorry, I can't change fonts yet. But you can edit them yourself by creating a custom theme.",apologyLink:"https://gamma.app/public/o2he6ual8noal7u#card-82e40n78edir2x8"}),ti=new tn({key:"RESIZE_IMAGE",description:"Change the size of an image (its dimensions), or crop an image",classifyExamples:["make the image smaller","can you make the cat bigger","crop it so it's just the face","I want the disposition of the photos for more portrait instead of landscape"],apology:"Sorry, I can't resize images yet. But you can do it yourself by clicking on the image and dragging the boxes on the corners, or pressing the crop button above the image."}),ts=new tn({key:"EXPORT",description:"Export or download the deck into a different a format.",classifyExamples:["download as ppt","make a pdf","export to google slides"],apology:"Sorry, I can't export files yet. However, you can download a PDF yourself by using the Share menu."}),ta=new tn({key:"SPLIT_CARD",description:"Split a card into multiple cards, or move content between cards.",classifyExamples:["break this into two cards","split this up as multiple slides","put the gallery on the next card"],apology:"Sorry, I can't split cards or move things between them yet. However, you can split cards yourself by typing /split inside a card."}),tc=new tn({key:"NEW_DECK",description:"Create a whole new deck",classifyExamples:["i need a presentation about [topic]","write a whole document about animal","make me a landing page about this"],apology:"To make a new deck, go back to the home screen and click New with AI."}),tl=new tn({key:"CHANGE_MULTIPLE_CARDS",description:"Make changes across multiple cards at once",classifyExamples:["I want this entire deck to be summarized","combine the cards together in one","make the whole doc sound more professional","make the deck more consistent"],apology:"Sorry, I can only change one card at a time right now."}),td=new tn({key:"ADD_VIDEO",description:"Add a video or replace an existing video",classifyExamples:["add a youtube video about scrum","find videos of cats","i need more videos"],apology:"Sorry, I can't search for videos yet. You can embed video by copying the URL and pasting it into the card directly."}),tu=new tn({key:"ADD_FOOTNOTE",description:"Add a footnote to a card, or change footnotes",classifyExamples:["add a biography for him in a footnote","put the details into footnotes"],apology:"Sorry, I haven't learned to add footnotes yet. You can make footnotes by highlighting text and clicking the footnote button in the menu."}),tf=[tr,to,ti,ts,ta,new tn({key:"MOVE_CARD",description:"Move a card to a different position in the deck",classifyExamples:["shift the slide to the top","move this card to the bottom"],apology:"Sorry, I haven't learned to move cards yet. You can move them by hovering on the table of contents on the left side of the screen and dragging them around."}),tc,tl,td,tu,new tn({key:"ADD_CHART",description:"Add a chart, diagram, or graph",classifyExamples:["put this information into a scatter plot","add a card about market share using a pie chart","i need to display this as a flow chart","create a diagram illustrating the interactions and relationships","can you change the card to have a line graph","turn this into a gantt chart","could you do this as a funnel diagram"],apology:"Sorry, Gamma doesn't support charts yet. You can paste in images of charts from other tools, or type /diagram in the editor to draw your own."}),new tn({key:"ANIMATION",description:"Add animations to a card or edit animations",classifyExamples:["animate transitions","make the text appear one by one","fade in the images","make the bullets fly in"],apology:'Sorry, Gamma doesn\'t support custom animations yet. You can animate line by line by going into Present mode and pressing S for "spotlight".'}),new tn({key:"FOLLOW_LINK",description:"Read content from an external website",classifyExamples:["go to this website and add the content to this card http://www.example.com/","here is his linkedin page now add the details https://www.linkedin.com/...","add the images from https://medium.com/posts/2022/9/6/..."],apology:"Sorry, I'm not able to open links and read the content."})],tp=function(e){return tf.find(function(t){return t.key===e})},th=new eo.V({variables:["message","taskList","ackExamples","html","cardHtml"],systemPromptOperation:ei.Run.ClassifySystem,userPromptOperation:ei.Run.ClassifyUser,params:{maxTokens:100,temperature:.2}}),tm=[].concat((0,eb.Z)(e9),(0,eb.Z)(tf),(0,eb.Z)(eg)),tx="\uD83D\uDE14 Sorry, I didn't understand your request. Could you please try asking a different way?",tg=(o=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,u,f,p,h;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.context,o=t.history,i=t.provider,a=(s=tb(tm,r.editorContext)).ackExamples,c=s.taskList,l=s.enabledTasks,u=ty(o),f=th.prepare({variables:{message:n,ackExamples:a,taskList:c,html:r.editorContext.defaultRange.html,cardHtml:r.editorContext.card.html},params:{provider:i},history:u}),console.debug("[AIChat classify] Getting classification",{classifyHistory:u,input:f}),e.next=7,(0,ep.I)(f,r.interactionId,{timeout:d.VH.get("aiRequestTimeouts").classify});case 7:if(h=tj(p=e.sent,l)){e.next=15;break}return console.debug("Failed classification, trying again...",{resp:p,parsedResp:h}),e.next=13,(0,ep.I)(f,r.interactionId);case 13:h=tj(p=e.sent,l);case 15:if(h){e.next=17;break}return e.abrupt("return",{type:"UNKNOWN",classification:"UNKNOWN",ack:tx,resp:p||""});case 17:return console.debug("[AIChat classify] Got classification",{resp:p,parsedResp:h}),e.abrupt("return",h);case 19:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),tv="Ok, I'll get right on it.",tj=function(e,t){if(e){var n,r=e.split("\n"),o=null===(n=r[0])||void 0===n?void 0:n.trim().toUpperCase();if(t.find(function(e){return e.key===o})){var i=r[1];return{classification:o.trim(),ack:i.includes(o.trim())?tv:i||("UNKNOWN"!==o?tv:tx),resp:e,type:"CLASSIFICATION"}}}},tb=function(e,t){var n=e.filter(function(e){return!t||!e.checkEnabled||e.checkEnabled(t)});return{taskList:n.map(function(e){var t;return"".concat(e.key,": ").concat(e.description,"\n").concat(null===(t=e.classifyExamples)||void 0===t?void 0:t.map(function(e){return"- ".concat(e)}).join("\n"))}).join("\n\n"),ackExamples:n.filter(function(e){return e.classifyExamples&&e.classifyExamples.length>0&&e.classifyReply}).map(function(e){return"Request:\n".concat(e.classifyExamples[0],"\nResponse:\n").concat([e.key,e.classifyReply].join("\n"))}).join("\n\n"),enabledTasks:n}},ty=function(e){return e.slice(-7).map(function(e){return"User"===e.from?{role:ei.XaP.User,content:e.message}:e.isClassification?{role:ei.XaP.Assistant,content:e.resp}:null}).filter(function(e){return!!e})},tC=n(84426),tw=n(64805),tO=n(65618),tk=n(12132),tS=n(44934),tI=n(25478),tE=n(78985),tP=n(78871),tD=n(76085),tA=function(e,t){var n=e.state.doc.slice(t.from,t.to).content;return(0,tI.c)(e,n)},tT=function(e,t){var n=e.state.selection,r=(0,tP.Ru)(n.$from,eE.KH)[0],o=r&&(0,S.NE)(r.node,r.pos);if(!r||!o)throw Error("Cant find parent card for selection ".concat(n));var i={from:r.pos,to:r.pos+r.node.nodeSize},s={from:o.pos+1,to:o.pos+o.node.nodeSize-1},a=n.$from.blockRange(n.$to),c={from:a.start,to:a.end},l={range:(0,tD.bb)(e.state,s),html:tA(e,s)},d={range:(0,tD.bb)(e.state,n),html:tA(e,n)},u={range:(0,tD.bb)(e.state,c),html:tA(e,c)},f=n instanceof V.qv&&(0,eE.KH)(n.node)||n.empty||0===d.html.trim().length||n instanceof V.qv&&n.node.isAtom,p=!n.$from.parent.eq(n.$to.parent)||0===a.$from.parentOffset&&a.$to.parentOffset===a.$to.parent.content.size,h=d,x="selectionRange";f?(h=l,x="cardContent"):p&&(h=u,x="blockRange");var g=tR(t),v=(0,m.Pu)(t.getState());return{card:{cardId:r.node.attrs.id,range:(0,tD.bb)(e.state,i),html:tA(e,i),attrs:r.node.attrs},cardContent:l,blockRange:u,selectionRange:d,defaultRange:h,selection:n,outline:g,selectedDefaultRange:x,theme:v}},tR=function(e){var t=e.getState(),n=(0,m.X9)(t),r=(0,tE.mT)(t);return Object.keys(n.tree).map(function(e){var t;return null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.title}).filter(function(e){return!!e}).join("\n")},t_=n(2032),tL=function(e){var t,n=e.editor,r=e.addMessage,o=e.getMessageHistory,i=(0,l.useState)("idle"),s=i[0],a=i[1],c=(0,p.qr)(),d=(0,t_.E)(),u=(0,q.q)().hasEnoughCreditsToChat,f=(0,tO.T)(),h=(0,tk.g5)();return{sendMessage:(0,l.useCallback)((t=(0,$.Z)(et().mark(function e(t){var i,s,l,p,m,x,g,v,j,b,y,C,w;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.message,n){e.next=3;break}return e.abrupt("return");case 3:if(s=void 0,l=void 0,p=void 0,m=(0,tw.nZ)(),e.prev=7,s=tT(n,c),console.debug("[AIChat] starting interaction",l={interactionId:m,startTime:performance.now(),message:i,editorContext:s,docId:n.gammaDocId}),x=o(),r({from:"User",type:"text",message:i,interactionId:m}),d.trackRequestSent(l,h),u){e.next=16;break}return e.abrupt("return");case 16:return a("classifying"),e.next=19,tg({message:i,context:l,history:x,provider:h});case 19:if(g=e.sent,d.trackClassification({taskContext:l,classification:g.classification}),a("fetching"),console.debug("[AIChat] Starting task",{taskContext:l,classification:g.classification,history:x}),"UNKNOWN"!==g.type){e.next=28;break}r({from:"Designer",type:"text",message:g.ack,resp:g.resp,isClassification:!0,interactionId:m}),d.trackRequestComplete({taskContext:l,outputMessage:g.ack}),e.next=47;break;case 28:if(!ej(g.classification)){e.next=34;break}return v=ev(g.classification),e.next=32,v.run({editor:n,addMessage:r,context:l,classificationResult:g,history:x,trackFns:d,themeModificationController:f,provider:h});case 32:case 38:e.next=47;break;case 34:if(!tp(g.classification)){e.next=40;break}return j=tp(g.classification),e.next=38,j.run({editor:n,context:l,addMessage:r,classificationResult:g,history:x,trackFns:d,themeModificationController:f,provider:h});case 40:if(!tt(g.classification)){e.next=47;break}return r({from:"Designer",type:"text",message:g.ack||"Sure, let me see what I can do...",resp:g.resp,isClassification:!0}),b=o(),y=te(g.classification),e.next=46,y.run({editor:n,context:l,addMessage:r,classificationResult:g,history:b,trackFns:d,themeModificationController:f,provider:h});case 46:p="chatSuggestion";case 47:e.next=54;break;case 49:e.prev=49,e.t0=e.catch(7),console.log("[AIChat.sendMessage] ERROR: ".concat(e.t0.message,"}"),{err:e.t0,taskContext:l}),C="Sorry, something unexpected happened. Please try again.",e.t0 instanceof er.Og?(r({from:"Designer",type:"text",message:w=e.t0.opts.chatMessage||C,resp:e.t0.opts.resp,interactionId:m}),d.trackRequestError({errorName:e.t0.name,interactionId:m,outputMessage:w,errorMessage:e.t0.message,resp:e.t0.opts.resp})):(en.Tb(e.t0),r({from:"Designer",type:"text",message:C,interactionId:m}),d.trackRequestError({errorName:e.t0.name,interactionId:m,outputMessage:C,errorMessage:e.t0.message,errorCode:(0,tC.uc)(e.t0)[0]}));case 54:p&&(0,tS.d)(p),a("idle");case 56:case"end":return e.stop()}},e,null,[[7,49]])})),function(e){return t.apply(this,arguments)}),[n,c,o,r,d,u,f,h]),status:s}};function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tz=function(e){var t=e.editor,n=e.scrollSelector,r=e.onClose,o=(0,l.useState)(""),s=o[0],c=o[1],u=(0,d.ye)("openAiStatus"),f=(0,p.TL)(),h=(0,O.As)("editor"),m=(0,p.qr)(),x=(0,p.CG)(Q.AZ),I=(0,p.CG)(Q.Q_),E=(0,l.useState)(null),P=E[0],D=E[1],A=(0,l.useCallback)(function(){return(0,Q.AZ)(m.getState())},[m]),T=(0,l.useCallback)(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tM(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({timestamp:Date.now()},e);f((0,Q.Hz)({message:t}))},[f]),R=(0,l.useCallback)(function(){f((0,Q.mc)())},[f]),_=tL({addMessage:T,getMessageHistory:A,editor:t}),N=_.status,Z=_.sendMessage;(0,l.useEffect)(function(){var e=n&&document.querySelector(n);e&&requestAnimationFrame(function(){e.scrollTop=e.scrollHeight})},[n,x]);var G="idle"!==N;(0,l.useEffect)(function(){if(I.length&&!G){var e=I[0],t=e.task,n=e.id;!1===t.submit?c(t.message):Z({message:t.message}),f((0,Q.VB)({id:n}))}},[G,Z,f,I]);var F=(0,l.useCallback)(function(){if(P&&t){var e=document.querySelector('[data-card-id="'.concat(P,'"]')),n=(0,O.v4)(e,100);null!=n&&n.yAxisInView||h.scrollElementIntoView({element:e})}},[t,h,P]),W=(0,l.useCallback)(function(e){F(),Z({message:e})},[F,Z]),U=(0,l.useCallback)(function(){W(s),c("")},[W,s]);return((0,l.useEffect)(function(){if(t){var e=function(){var e=(0,S.AQ)(t,t.state.selection.from);e&&D(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),function(){t.off("selectionUpdate",e)}}},[t]),t)?"DOWN"===u?(0,L.jsx)(M,{onClose:r}):(0,L.jsxs)(a.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===u&&(0,L.jsx)(z,{}),(0,L.jsx)(X.rN,{scrollSelector:n,messages:x,editor:t,sendMessage:W,isLoading:G,onClose:r}),(0,L.jsxs)(j.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,L.jsx)(J,{editor:t,value:s,onChange:c,onSubmit:U,isLoading:G,resetMessages:R}),(0,L.jsx)(w.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:k.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,L.jsx)(C.kH,{label:(0,L.jsx)(v.cC,{id:"5eg0kp"}),placement:"top",children:(0,L.jsx)(b.h,{variant:"ghost",colorScheme:"blackAlpha",color:"currentColor","aria-label":"reset-chat",icon:(0,L.jsx)(y.G,{icon:g.Yc}),onClick:R,position:"absolute",left:4,top:1,isRound:!0})})]}):null},tN=n(23026),tZ=n(97907),tG=function(e){var t=e.onClose;return(0,L.jsx)(a.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,L.jsx)(tZ.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},tF=["closePanel"];function tW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tV="design-partner-panel-wrapper",tH=function(e){var t=e.toggleDesignPartnerPanel,n=e.isDesignPartnerPanelOpen,r=e.editor,o=(0,d.ye)("aiChat"),i=(0,p.TL)();(0,l.useEffect)(function(){return function(){i((0,Q.mc)())}},[]);var s=(0,p.CG)(m.hN);(0,l.useEffect)(function(){!s&&n&&t()},[s,n,t]),(0,l.useEffect)(function(){var e,t;r&&(null===(e=(t=r.commands).setSalOpen)||void 0===e||e.call(t,n))},[r,n]),(0,l.useEffect)(function(){if(o)return tN.T.on("toggle",function(e){t(e.config)})},[t,o]),(0,l.useEffect)(function(){if(o)return h.pw.on("queueDesignPartnerTask",function(e){i((0,Q.Lj)({task:e})),t({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[i,o,t]),(0,l.useEffect)(function(){if(o&&s){var e=(0,c.ZP)("mod+shift+S");return u.F7.on("keydown","DESIGN_PARTNER_PANEL",function(n){return!!e(n)&&(t(),!0)})}},[t,o,s])},tq=function(e){var t=e.closePanel,n=(0,s.Z)(e,tF),r=(0,x._)().editor;return(0,l.useEffect)(function(){return u.F7.on("keydown","DESIGN_PARTNER_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)})},[t]),(0,L.jsx)(f.s,tU(tU({},n),{},{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,L.jsxs)(a.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:tV,w:"100%",children:[(0,L.jsx)(tG,{onClose:t}),(0,L.jsx)(tz,{editor:r,scrollSelector:".".concat(tV),onClose:t})]})}))};tq.panelPosition="right"},81510:function(e,t,n){n.d(t,{m:function(){return b}});var r=n(95235),o=n(55452),i=n(11919),s=n(45650),a=n(84103),c=n(36895),l=n(97261),d=n(2784),u=n(95828),f=n(22550),p=n(36188),h=n(57560),m=n(34972),x=n(61528),g=n(52322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(e){var t=(0,m._i)().docId,n=(0,h.Yy)(),r=(0,p.z$)(),v=(0,d.useCallback)(function(){null==r||r.track(p.AA.MADE_WITH_GAMMA_CLICKED,{doc_id:t})},[r,t]),b=(0,f.dU)();return void 0===b||b?null:(0,g.jsx)(i.k,j(j(j({},(0,x.s2)()?{display:"flex",justifyContent:"center",m:6,position:"relative"}:{position:"fixed",right:[1,6],bottom:[1,4]}),e),{},{children:(0,g.jsx)(l.Wk,{isDark:n,children:(0,g.jsx)(s.z,{as:a.r,onClick:v,variant:"plain",target:"_blank",href:"https://gamma.app",textDecoration:"none !important",leftIcon:(0,g.jsx)(c.E,{src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",h:"1em"}),size:"sm",children:(0,g.jsx)(o.cC,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:u.N6}})})})}))}},75393:function(e,t,n){n.d(t,{VN:function(){return f},rJ:function(){return d},us:function(){return u}});var r=n(2784),o=n(25232),i=n(36157),s=n(86482),a=n(17349),c=n(33932),l="disable-card-size-animations",d=function(){var e=(0,o.ye)("autoZoomToFit"),t=(0,i.CG)(a.Kk);return null!=t?t:e},u=function(){var e=(0,i.CG)(a.i2),t=(0,r.useRef)(),n=d(),o=!c.Pv&&n;(0,r.useEffect)(function(){var n=!t.current;t.current=e;var r=n?s.nY:s.id/4;e&&o&&setTimeout(function(){document.body.classList.add(l),f(),setTimeout(function(){document.body.classList.remove(l)},s.id/2)},r)},[e,o])},f=function(){var e=(0,i.bh)(),t=document.documentElement.clientHeight,n=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');n&&(e.dispatch((0,a.Ic)({zoomLevel:1})),setTimeout(function(){var r=n.scrollHeight,o=t/r;if(c.QX)o=Math.max(t/r,.7);else{if(o<.7)return;o=Math.floor(10*o)/10}e.dispatch((0,a.Ic)({zoomLevel:o})),console.debug("[zoomPresentModeToFit] zooming",JSON.stringify({viewportHeight:t,cardHeight:r,targetZoom:o}))}))}},88550:function(e,t,n){n.d(t,{T:function(){return r}});var r=new(n(37438)).v},7399:function(e,t,n){n.d(t,{o:function(){return iq}});var r,o,i,s=n(95235),a=n(20406),c=n(81333),l=n(28526),d=n.n(l),u=n(53738),f=n(1472),p=n(11919),h=n(8283),m=n(93319),x=n(73137),g=n(25925),v=n(2784),j=n(68650),b=n(25232),y=n(7954),C=n(36157),w=n(91128),O=n(55452),k=n(45650),S=n(49929),I=n(28811),E=n(33837),P=n(65987),D=n(5945),A=n(52322),T=function(e){var t,n=e.doc,r=(0,v.useState)(!1),o=r[0],i=r[1],s=null==n?void 0:n.id,c=null==n?void 0:null===(t=n.organization)||void 0===t?void 0:t.id,l=(0,D.py)("manage",n),u=(0,I.bBo)({variables:{workspaceId:c},skip:!c||!l}).data,f=(0,P.uK)({doc:n,sites:null==u?void 0:u.sites}),p=(0,P.Yu)({site:f,docId:s}),h=(0,E.q)({doc:n,site:f,path:p}).publishAndDeploy,m=(0,v.useCallback)((0,a.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,h();case 3:i(!1);case 4:case"end":return e.stop()}},e)})),[h]);return f?(0,A.jsx)(k.z,{size:"sm",variant:"solid",fontWeight:"400",leftIcon:(0,A.jsx)(S.G,{icon:w.A$}),onClick:m,isLoading:o,children:(0,A.jsx)(O.cC,{id:"EEYbdt"})}):null},R=n(27231),_=n(17349),L=n(35710),M=n(54714),z=n(38404),N=n(3360),Z=n(61528),G=n(60883),F=n(92743),W=n(87254),U=n(97261),V=n(7099),H=n(20010),q=n(56915),B=n(48273),K=n(40110),Y=n(80353),J=n(12741),X=n(20412),Q=n(60577),$=n(2167),ee=n(71354),et=n(50390),en=n(81927),er=n(94659),eo=n(91012),ei=n(72360),es=n(66724),ea=n(18751),ec=n(3002),el=n(1243),ed=n(56695),eu=n(89727),ef=n(36188),ep="gray.700",eh=n(82269),em=n(48322),ex=["error","refetch"];function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ej=function(e){var t=e.error,n=e.refetch,r=(0,eh.Z)(e,ex);return(0,A.jsx)(u.xu,ev(ev({px:6,py:4},r),{},{children:(0,A.jsxs)(ei.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,A.jsx)(em.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,A.jsx)(es.C,{mt:4,mb:2,fontSize:"md",children:(0,A.jsx)(O.cC,{id:"uNQm3r"})}),(0,A.jsx)(ea.X,{maxWidth:"md",children:t.message}),(0,A.jsx)(k.z,{mt:4,onClick:function(){return n()},children:(0,A.jsx)(O.cC,{id:"6gRgw8"})})]})}))},eb=n(19664),ey=n(97269),eC=n(92619),ew=n(85982),eO=n(64827),ek=function(){return W.ag._({id:"QbrUIo"})},eS=function(){return W.ag._({id:"FbBkvL"})},eI=function(e){var t=e.isAnalyticsLoading,n=e.hasError,r=e.view,o=e.setView,i=e.description;return n?(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"ZlwDi6"})}):(0,A.jsxs)(p.k,{direction:"column",flex:1,children:[(0,A.jsx)(eC.x,{children:t?(0,A.jsx)(eE,{}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(O.cC,{id:"ZlwDi6"}),(0,A.jsxs)(er.g,{align:"stretch",spacing:4,children:[(0,A.jsx)(eo.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:i}),(0,A.jsxs)(ew.E,{children:[(0,A.jsx)(ew.U,{children:(0,A.jsx)(k.z,{leftIcon:(0,A.jsx)(S.G,{icon:ey.M,"aria-label":ek()}),variant:"ghost",fontWeight:"600",bg:"deckView"===r?"trueblue.50":"transparent",color:"deckView"===r?"trueblue.500":ep,onClick:function(){return o("deckView")},children:ek()})}),(0,A.jsx)(ew.U,{children:(0,A.jsx)(k.z,{leftIcon:(0,A.jsx)(S.G,{icon:eb.AG,"aria-label":eS()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===r?"trueblue.50":"transparent",color:"cardEngagement"===r?"trueblue.500":ep,onClick:function(){return o("cardEngagement")},children:eS()})})]})]})]})}),(0,A.jsx)(eO.o,{})]})},eE=function(){return(0,A.jsxs)(er.g,{align:"stretch",spacing:4,children:[(0,A.jsx)(en.O,{h:12,width:"30%"}),(0,A.jsx)(en.O,{h:4,width:"80%"})]})},eP=n(74373),eD=n(68871),eA=n(98621),eT=n.n(eA),eR=n(68964),e_=function(e){var t=e.degree,n=e.alpha,r=e.startColor,o=void 0===r?"#ECC94B":r,i=e.endColor,s=void 0===i?"#38A169":i;if(Number.isNaN(t))return eT()("#e5e0df").toHex8String();var a=eT()(o).toHsl(),c=eT()(s).toHsl();return eT()({h:(0,eR.t7)(a.h,c.h,t),s:(0,eR.t7)(a.s,c.s,t),l:(0,eR.t7)(a.l,c.l,t),a:void 0===n?1:n}).toHex8String()},eL=function(e,t){return e.reduce(function(e,n){return e[n.cardId]=n[t],e},{})},eM=function e(t,n){var r,o=0;for(var i in t)o+=(null!==(r=n[i])&&void 0!==r?r:0)+e(t[i],n);return o},ez=function(e,t){var n,r=0;for(var o in e)r=Math.max((null!==(n=t[o])&&void 0!==n?n:0)+eM(e[o],t),r);return r},eN=n(56623),eZ=n(51068),eG=n(67784),eF=n(67887),eW=n(49747),eU=n(62642),eV=n(29600),eH=n(21875),eq=n(15767),eB=n(23769),eK=n(13813),eY=n(16844),eJ=n(62349),eX=n.n(eJ);function eQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e0=function(e){var t=e.cardsViewed,n=e.totalCards,r=e_({degree:t/n}),o=n>0;return(0,A.jsxs)(h.U,{spacing:3,children:[(0,A.jsxs)(p.k,{flex:1,position:"relative",children:[(0,A.jsx)(eY.E,{h:4,flex:1,borderRadius:"sm",value:t,max:o?n:void 0,bg:"gray.200",sx:{"> div":{bg:r}}}),o&&t===n&&(0,A.jsx)(e2,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,A.jsx)(eo.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:o?"".concat(t,"/").concat(n):(0,A.jsx)(O.cC,{id:"8Va3Pt"})})]})},e1=function(e){var t=e.cardCount,n=(0,v.useMemo)(function(){return eX()(1,t)},[t]);return(0,A.jsxs)(h.U,{spacing:3,filter:"blur(3px)",children:[(0,A.jsx)(p.k,{flex:1,position:"relative",children:(0,A.jsx)(eY.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,A.jsxs)(eo.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},e2=function(e){var t=(0,eB.Z)({},e);return(0,A.jsx)(u.Cd,e$(e$({bg:"green.500",size:"18px",border:"2px solid white",color:"white"},t),{},{children:(0,A.jsx)(S.G,{icon:eK.LE,"aria-label":W.ag._({id:"y886Ns"}),size:"xs"})}))};function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e6=function(e){var t,n=e.cards,r=e.isColorized,o=void 0!==r&&r,i=e.scaleToMax,s=void 0!==i&&i,a=e.includeChildren,l=e.showViewersPercent,d=void 0!==l&&l,f=e.leftLabel,p=e.rightLabel,x=e.tooltipLabel,g=e.cardLookupTable,j=e.onAnalyticsPanelClose,b=(t=a?ez(n,g):Math.max.apply(Math,(0,J.Z)(Object.values(g))),function(e){return(0,eR.t7)(0,100,e/t)}),y=(0,v.useCallback)(function(e){return b(e)},[b]);return(0,A.jsxs)(u.xu,{mt:6,mb:4,children:[(0,A.jsxs)(h.U,{mb:3,children:[(0,A.jsx)(h.U,{children:(0,A.jsx)(U.NZ,{children:f})}),(0,A.jsx)(m.L,{}),(0,A.jsx)(h.U,{children:(0,A.jsx)(U.kH,{placement:"top",label:x,children:(0,A.jsx)(h.U,{children:(0,A.jsx)(U.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:p})})})})]}),(0,A.jsx)(u.xu,{width:"100%",children:Object.entries(n).map(function(e){var t,n=(0,c.Z)(e,2),r=n[0],i=n[1];return(0,A.jsx)(e4,{id:r,childCards:i,percentage:null!==(t=g[r])&&void 0!==t?t:0,calculatePercentageScale:y,isColorized:o,cardLookupTable:g,scaleToMax:s,includeChildren:a,showViewersPercent:d,onAnalyticsPanelClose:j},r)})})]})},e4=function e(t){var n=t.id,r=t.cardLookupTable,o=t.childCards,i=t.percentage,s=t.calculatePercentageScale,a=t.isColorized,l=t.scaleToMax,d=t.includeChildren,f=t.showViewersPercent,x=t.onAnalyticsPanelClose,g=(0,b.ye)("screenshotsEnabled"),j=(0,v.useState)(!1),y=j[0],C=j[1],w=(0,eq.Ux)({placement:"top",gutter:12,enterDelay:200}),k=w.referenceRef,I=w.popperRef,E=w.isHovering,P=w.getPopperProps,D=w.onMouseOver,T=w.onMouseOut,R=(0,v.useCallback)(function(){C(!y)},[y]),_=(0,v.useCallback)(function(){(0,eH.D)({cardId:n}),x()},[n,x]),L=(0,eV.c)(n),M=(0,eV.T)({cardId:n}).title,z=Object.values(o).length>0,N=0===i,Z=d?i+eM(o,r):i,G=y?Z:0,F=l?s(Z):Math.min(100,G),W=y?i:Z,V=l?s(W):Math.min(100,W),H={startColor:"#F6AD55",endColor:"#68D391"},q=a?e_(e3({degree:F/100},H)):"trueblue.50",B=a?e_(e3({degree:V/100},H)):"trueblue.100";return(0,A.jsxs)(ee.K,{children:[(0,A.jsxs)(p.k,{direction:"column",onMouseOver:D,onMouseOut:T,children:[(0,A.jsxs)(p.k,{ref:k,h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,A.jsxs)(h.U,{pos:"absolute",zIndex:1,children:[z&&(0,A.jsx)(eF.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,A.jsx)(S.G,{icon:eG._t}),transform:y?"rotate(90deg)":"",onClick:R,_focus:{shadow:"none"}}),!z&&(0,A.jsx)(p.k,{w:6,justifyContent:"center",alignItems:"center",children:N?(0,A.jsx)(U.kH,{label:(0,A.jsx)(O.cC,{id:"s+PDNe"}),children:(0,A.jsx)(u.xu,{color:"blackAlpha.500",children:(0,A.jsx)(S.G,{icon:eZ.Aq,size:"sm"})})}):(0,A.jsx)(u.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,A.jsx)(S.G,{icon:eN.nZ,size:"sm"})})}),(0,A.jsx)(eo.x,{color:N?"blackAlpha.500":void 0,noOfLines:1,children:M||(0,A.jsx)(O.cC,{id:"wja8aL"})})]}),(0,A.jsxs)(u.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,A.jsx)(u.xu,{position:"absolute",h:"100%",bg:N?"blackAlpha.200":q,w:"".concat(F,"%")}),(0,A.jsx)(u.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:N?"blackAlpha.300":B,w:"".concat(V,"%")})]}),a&&100===i&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.L,{}),(0,A.jsx)(e2,{alignSelf:"center",zIndex:1})]})]}),E&&(0,A.jsx)(U.qh,e3({ref:I,src:g?null==L?void 0:L.previewUrl:eU.Z.src,fallbackSrc:eU.Z.src,shouldShow:E,onClick:_,tooltip:(0,A.jsx)(O.cC,{id:"3YmIR6"}),label:f?(0,A.jsx)(O.cC,{id:"wmqtMZ",values:{percentage:i}}):void 0},P()))]}),(0,A.jsx)(u.xu,{pl:8,children:z&&Object.entries(o).map(function(t){var n,o=(0,c.Z)(t,2),i=o[0],u=o[1];return(0,A.jsx)(eW.U,{in:y,children:(0,A.jsx)(e,{id:i,childCards:u,percentage:null!==(n=r[i])&&void 0!==n?n:0,cardLookupTable:r,calculatePercentageScale:s,scaleToMax:l,isColorized:a,includeChildren:d,showViewersPercent:f,onAnalyticsPanelClose:x})},i)})})]})},e8=function(){return(0,A.jsx)(ee.K,{spacing:2,children:(0,A.jsx)(O.cC,{id:"QXJTby",components:{0:(0,A.jsx)(eo.x,{}),1:(0,A.jsx)(eo.x,{}),2:(0,A.jsx)(eo.x,{})}})})},e7=function(e){var t=e.timeInMS;return void 0===t?(0,A.jsx)(A.Fragment,{}):(0,A.jsx)(O.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},e9=function(e){var t=e.docId,n=e.viewerFilter,r=e.currentViewerFilterCount,o=e.onAnalyticsPanelClose,i=(0,C.qr)().getState(),s=(0,_.X9)(i),a=(0,I.IrH)({variables:{docId:t}}),c=a.data,l=a.error,d=a.loading,f=a.refetch,p=(0,v.useState)("viewTimePercent"),m=p[0],x=p[1],g="viewTimePercent"===m?{chartDescription:(0,A.jsx)(O.cC,{id:"dpTE1c",values:{viewerCount:r}}),leftLabel:(0,A.jsx)(O.cC,{id:"ml51m3"}),rightLabel:(0,A.jsx)(O.cC,{id:"8R7bfR"})}:{chartDescription:(0,A.jsx)(O.cC,{id:"b2VMTo",values:{viewerCount:r}}),leftLabel:(0,A.jsx)(O.cC,{id:"kTgCTO"}),rightLabel:(0,A.jsx)(O.cC,{id:"AKDcmS"})},j=g.chartDescription,y=g.rightLabel,w=g.leftLabel,E="viewersOnly"===n?"viewers":"everyone",P=(0,b.ye)("cardViewedThreshold"),D=(0,v.useMemo)(function(){var e;return(null==c?void 0:null===(e=c.docCardsStats)||void 0===e?void 0:e[E])||[]},[null==c?void 0:c.docCardsStats,E]),T=(0,v.useMemo)(function(){return eL(D,m)},[D,m]),R=(0,v.useCallback)(function(){return x("viewTimePercent")},[]),L=(0,v.useCallback)(function(){return x("viewersPercent")},[]);return(0,A.jsxs)(u.xu,{children:[(0,A.jsxs)(h.U,{my:4,children:[(0,A.jsx)(k.z,{leftIcon:(0,A.jsx)(S.G,{icon:eD.SZ,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===m?"trueblue.50":"transparent",color:"viewTimePercent"===m?"trueblue.500":ep,onClick:R,children:(0,A.jsx)(O.cC,{id:"XyvAeS"})}),(0,A.jsx)(k.z,{leftIcon:(0,A.jsx)(S.G,{icon:eP.jG,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===m?"trueblue.50":"transparent",color:"viewersPercent"===m?"trueblue.500":ep,onClick:L,children:(0,A.jsx)(O.cC,{id:"vXtpAZ"})})]}),(0,A.jsx)(tt,{description:j}),l&&(0,A.jsx)(ej,{error:l,refetch:f}),d&&!l&&(0,A.jsx)(te,{}),!d&&!l&&(0,A.jsx)(e6,{cards:s.tree,cardLookupTable:T,scaleToMax:"viewTimePercent"===m,isColorized:"viewersPercent"===m,includeChildren:"viewTimePercent"===m,showViewersPercent:"viewersPercent"===m,rightLabel:y,leftLabel:w,tooltipLabel:"viewTimePercent"===m?(0,A.jsx)(e8,{}):(0,A.jsx)(e7,{timeInMS:P}),onAnalyticsPanelClose:o})]})},te=function(e){var t=e.includeDescription;return(0,A.jsx)(p.k,{direction:"column",mt:6,mb:4,children:(0,A.jsxs)(er.g,{align:"stretch",children:[void 0!==t&&t&&(0,A.jsx)(en.O,{h:5,mb:3,w:"70%"}),(0,J.Z)([,,,,,]).map(function(e,t){return(0,A.jsx)(en.O,{h:8},t)})]})})},tt=function(e){var t=e.description;return(0,A.jsx)(eo.x,{color:ep,children:t})},tn=n(89364),tr=n(73851),to=n(36258),ti=n(19875),ts=n(77525),ta=n(74642),tc=n(35319),tl=n(27912),td=n(12221),tu=n(13061),tf=n(65903),tp=n.n(tf),th=n(829),tm=n.n(th),tx=n(95828),tg=n(63730),tv=["name","profileImg","email","isCreator","isContributor","isAnonymous"];function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ty=function(e){var t=e.uniqueViewers,n=e.docCreatedDate,r=(0,b.ye)("cardViewedThreshold");return(0,A.jsx)(tr.h,{children:(0,A.jsxs)(to.Tr,{children:[(0,A.jsx)(tC,{label:(0,A.jsx)(O.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,A.jsx)(O.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,A.jsx)(tC,{label:(0,A.jsx)(O.cC,{id:"pRGfP3"}),width:"35%"}),(0,A.jsx)(tC,{label:(0,A.jsx)(O.cC,{id:"QfqHuz"}),tooltip:(0,A.jsx)(e7,{timeInMS:r}),width:"25%"})]})})},tC=function(e){var t=e.label,n=e.width,r=e.tooltip,o=(0,A.jsx)(ti.Th,{w:n,children:(0,A.jsx)(eo.x,{display:"inline",borderBottom:r?"0.125em dashed":void 0,borderBottomColor:r?"gray.400":void 0,children:t})});return r?(0,A.jsx)(U.kH,{placement:"top",label:r,children:o}):o},tw=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],tO=function(e){var t=e.viewers,n=e.currentViewerFilterCount,r=e.docCreatedDate,o=e.creatorId,i=e.contributors,s=e.cardCount,a=e.handleTableRowClick,c=e.hasIndividualAnalytics,l=(0,D.SE)().user,d=c?t:tm()(t,function(e){var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==l?void 0:l.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,A.jsx)(ts.x,{children:(0,A.jsxs)(ta.i,{colorScheme:"blackAlpha",children:[(0,A.jsx)(ty,{uniqueViewers:n,docCreatedDate:r}),(0,A.jsx)(tc.p,{children:d.map(function(e,n){var r=e.user,d=e.lastOpened,u=e.visitorId,f=(null==r?void 0:r.id)===o,p=i.some(function(e){return e.user.id===(null==r?void 0:r.id)}),h=r?r.displayName+(r.id===(null==l?void 0:l.id)?" "+W.ag._({id:"dDUgzP"}):"")||"":W.ag._({id:"VmjbJY"}),m=d?tp()((0,tg.P9)(d)):W.ag._({id:"/JO3xr"}),x={name:h,id:(null==r?void 0:r.id)||u||"",email:null==r?void 0:r.email,isCreator:f,isContributor:p,profileImg:null==r?void 0:r.profileImageUrl,lastOpened:m},g=n===t.length-1,v=(null==r?void 0:r.id)===(null==l?void 0:l.id),j=!c&&!v;return(0,A.jsxs)(to.Tr,{cursor:"pointer",onClick:function(){return a(x)},_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,A.jsx)(tl.Td,{borderBottom:g?"0 none":void 0,children:(0,A.jsx)(tk,{name:h,email:null==r?void 0:r.email,profileImg:null==r?void 0:r.profileImageUrl,isContributor:p,isCreator:f,isAnonymous:!r})}),(0,A.jsx)(tl.Td,{borderBottom:g?"0 none":void 0,children:j?(0,A.jsx)(eo.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:tw[n%tw.length]}):(0,A.jsx)(eo.x,{fontSize:"sm",children:m})}),(0,A.jsx)(tl.Td,{borderBottom:g?"0 none":void 0,children:j?(0,A.jsx)(e1,{cardCount:s}):(0,A.jsx)(e0,{cardsViewed:e.cardsViewed||0,totalCards:s||0})})]},(null==r?void 0:r.id)||u)})})]})})},tk=function(e){var t=e.name,n=e.profileImg,r=e.email,o=e.isCreator,i=void 0!==o&&o,s=e.isContributor,a=e.isAnonymous,c=(0,eh.Z)(e,tv);return(0,A.jsxs)(h.U,tb(tb({},c),{},{children:[(0,A.jsx)(td.q,{size:"sm",name:t,src:n}),(0,A.jsxs)(ee.K,{spacing:.5,children:[(0,A.jsxs)(eo.x,{children:[t,void 0!==a&&a&&(0,A.jsx)(U.Yq,{label:(0,A.jsx)(O.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}}),ml:2})]}),(0,A.jsxs)(h.U,{mt:1,children:[(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:void 0===r?"":r}),(i||void 0!==s&&s)&&(0,A.jsx)(tu.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:i?(0,A.jsx)(O.cC,{id:"UE2beD"}):(0,A.jsx)(O.cC,{id:"3L51iw"})})]})]})]}))},tS=function(e){var t,n,r,o,i=e.user,s=e.onBackClick,a=e.docId,c=e.onAnalyticsPanelClose,l=(0,C.qr)().getState(),d=(0,_.X9)(l),f=(0,I.IrH)({variables:{docId:a,userId:i.id},skip:!a||!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),p=f.data,h=f.error,m=f.loading,x=f.refetch,g=null!==(t=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:null===(r=n.everyone)||void 0===r?void 0:r.length)&&void 0!==t?t:0,j=null==p?void 0:null===(o=p.docCardsStats)||void 0===o?void 0:o.cardCount,b=(0,v.useMemo)(function(){var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),y=(0,v.useMemo)(function(){return eL(b,"viewTimePercent")},[b]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(eC.x,{children:(0,A.jsx)(k.z,{"aria-label":"Back",leftIcon:(0,A.jsx)(tn.R,{}),variant:"ghost",onClick:s,children:(0,A.jsx)(O.cC,{id:"iH8pgl"})})}),(0,A.jsx)(eO.o,{}),(0,A.jsx)(K.i,{}),(0,A.jsx)($.f,{children:(0,A.jsxs)(u.xu,{children:[(0,A.jsx)(tI,{user:i,showLastOpened:!0}),j&&(0,A.jsx)(tt,{description:(0,A.jsx)(O.cC,{id:"YJOrjl",values:{cardsViewed:g,totalCards:j}})}),m&&!h&&(0,A.jsx)(te,{includeDescription:!0}),h&&(0,A.jsx)(ej,{error:h,refetch:x}),!h&&!m&&(0,A.jsx)(e6,{cards:d.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,A.jsx)(O.cC,{id:"ml51m3"}),rightLabel:(0,A.jsx)(O.cC,{id:"8R7bfR"}),cardLookupTable:y,tooltipLabel:(0,A.jsx)(e8,{}),onAnalyticsPanelClose:c})]})})]})},tI=function(e){var t=e.user,n=e.showLastOpened;return(0,A.jsxs)(h.U,{align:"center",my:6,children:[(0,A.jsx)(tk,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,A.jsxs)(er.g,{align:"flex-start",spacing:0,children:[(0,A.jsx)(U.NZ,{children:(0,A.jsx)(O.cC,{id:"pRGfP3"})}),(0,A.jsx)(eo.x,{children:t.lastOpened})]})]})},tE=n(87567),tP=n(47299),tD=n(81295),tA=n(26673),tT=n(9088),tR=n(30893),t_=n(40771),tL=n(63849),tM=n(2575),tz=function(e,t,n){return"everyone"===e?W.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?W.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):W.ag._({id:"V9JX7d"})},tN={everyone:tD.Nd,viewersOnly:tP.Md,accessLinkOnly:tE.uW},tZ=function(e){var t=e.selected,n=e.handleMenuItemChange,r=e.everyoneCount,o=e.viewersOnlyCount;return(0,A.jsxs)(tT.v,{children:[(0,A.jsx)(tR.j,{leftIcon:(0,A.jsx)(S.G,{size:"xs",icon:tN[t]}),as:k.z,size:"md",rightIcon:(0,A.jsx)(S.G,{size:"xs",icon:tA.pt}),children:tz(t,r,o)}),(0,A.jsx)(t_.q,{zIndex:2,maxW:"380px",children:(0,A.jsxs)(tL._,{defaultValue:t,value:t,onChange:function(e){Array.isArray(e)||n(e)},children:[(0,A.jsx)(tM.i,{value:"everyone",isDisabled:0===r,children:(0,A.jsxs)(p.k,{align:"center",children:[(0,A.jsx)(S.G,{icon:tN.everyone,size:"xs"}),(0,A.jsxs)(u.xu,{ml:3,children:[(0,A.jsx)(eo.x,{children:tz("everyone",r,o)}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}})})]})]})}),(0,A.jsx)(tM.i,{value:"viewersOnly",isDisabled:0===o,children:(0,A.jsxs)(p.k,{align:"center",children:[(0,A.jsx)(S.G,{icon:tN.viewersOnly,size:"xs"}),(0,A.jsxs)(u.xu,{ml:3,children:[(0,A.jsx)(eo.x,{children:tz("viewersOnly",r,o)}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}})})]})]})}),!1]})})]})},tG=n(46102),tF=n(6802),tW=n(70258),tU=n(80237),tV=n(59309),tH=n(2574),tq=n(92638),tB=n(33951),tK=n(10897),tY=n(14582),tJ=n(75715),tX=n(96492),tQ=n(14141),t$=n(40837),t0=["chartTitle","TooltipInner","showZero","shouldRoundYValues","showMaxAndMiddle","data","barColor","customTooltipStyles","onClick"];function t1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t1(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var t5={top:55,right:20,bottom:40,left:24},t3=function(e){return Math.round(e).toString()},t6={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1.5)",paddingLeft:"var(--chakra-space-1.5)",paddingTop:"var(--chakra-space-0.5)",paddingBottom:"var(--chakra-space-0.5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},t4="var(--chakra-colors-gray-500)",t8="var(--chakra-colors-gray-200)",t7=function(e){var t,n=e.width,r=e.height,o=e.margin,i=void 0===o?t5:o,s=e.chartData,a=e.TooltipInner,c=e.showZero,l=e.shouldRoundYValues,d=e.showMaxAndMiddle,f=e.barColor,p=e.customTooltipStyles,h=e.onClick,m=void 0===h?function(){}:h,x=(0,tX.Z)(),g=x.showTooltip,j=x.tooltipOpen,b=x.tooltipLeft,y=x.tooltipTop,C=x.tooltipData,w=x.hideTooltip,O=(0,v.useRef)(),k=(0,v.useRef)();(0,v.useEffect)(function(){return function(){O.current&&clearTimeout(O.current),k.current&&clearTimeout(k.current)}},[]);var S=s.map(function(e){return e.y}),I=Math.max.apply(Math,(0,J.Z)(S)),E=[I,Math.round(I/2)],P=(t=d?E:S,Math.max.apply(Math,(0,J.Z)(t.map(function(e){return(0,tJ.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0})))),D=i.left+P,T=n-D-i.right,R=r-i.top-i.bottom,_=t2(t2(t2({},tQ.j),t6),p),L=(0,v.useMemo)(function(){return(0,tq.Z)({range:[0,T],domain:s.map(function(e){return e.x}),padding:.3})},[T,s]),M=(0,v.useMemo)(function(){return(0,tB.Z)({range:[R,0],round:!0,domain:[0,I]})},[R,I]),z=c?M(Math.min.apply(Math,(0,J.Z)(S.filter(function(e){return 0!==e})))):R,N=c&&R-z>6;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(u.xu,{children:(0,A.jsxs)("svg",{width:n,height:r,children:[(0,A.jsx)("rect",{x:0,y:0,rx:4,width:n,height:r,fill:"var(--chakra-colors-gray-100)"}),(0,A.jsx)(tV.Z,{top:i.top,left:D,children:s.map(function(e){var t,n,r=e.y,o=e.x,i="bar-".concat(o,"-").concat(r),s=L.bandwidth(),a=R-(null!==(t=M(r))&&void 0!==t?t:0),l=N&&0===a?6:a,d=null!==(n=L(o))&&void 0!==n?n:0,u=R-l;return(0,A.jsxs)(tV.Z,{children:[(0,A.jsx)(tK.Z,{x:d,y:u,width:s,height:l,radius:5,topLeft:!0,topRight:!0,fill:c&&0===r?t8:f,onMouseLeave:function(){O.current=window.setTimeout(function(){w()},300)},onMouseMove:function(t){O.current&&clearTimeout(O.current);var n=(0,tU.Z)(t);g({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:function(t){return m(t,e)}}),(0,A.jsx)(tY.Z,{x:d,y:0,width:s,height:Math.max(0,R-l),opacity:0,onMouseLeave:function(){k.current=window.setTimeout(function(){w()},300)},onMouseMove:function(t){k.current&&clearTimeout(k.current);var n=(0,tU.Z)(t);g({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},i)})}),(0,A.jsx)(tF.Z,{top:i.top,left:D,scale:M,stroke:t8,strokeWidth:2,tickValues:d?E:void 0,numTicks:d?void 0:2,hideZero:!0,tickFormat:l?t3:void 0,tickLength:6,tickStroke:t8,tickLabelProps:function(){return{fill:t4,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4}}}),(0,A.jsx)(tW.Z,{top:R+i.top,left:D,scale:L,stroke:t8,numTicks:4,tickStroke:t8,tickLabelProps:function(){return{fill:t4,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}},strokeWidth:2,tickLength:6})]})}),j&&C&&(0,A.jsx)(t$.Z,{top:y,left:b,style:_,children:(0,A.jsx)(a,{x:C.x,y:C.y})})]})},t9=function(e){var t=e.chartTitle,n=e.TooltipInner,r=e.showZero,o=void 0===r||r,i=e.shouldRoundYValues,s=void 0===i||i,a=e.showMaxAndMiddle,c=void 0===a||a,l=e.data,d=e.barColor,f=void 0===d?"var(--chakra-colors-trueblue-200)":d,p=e.customTooltipStyles,h=e.onClick,m=void 0===h?function(){}:h,x=(0,eh.Z)(e,t0);return(0,A.jsxs)(u.xu,t2(t2({position:"relative",height:"300px"},x),{},{children:[(0,A.jsx)(eo.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,A.jsx)(tH.Z,{children:function(e){var t=e.width,r=e.height;return t<10?null:(0,A.jsx)(t7,{width:t,height:r,showZero:o,chartData:l,barColor:f,customTooltipStyles:p,onClick:m,TooltipInner:n,shouldRoundYValues:s,showMaxAndMiddle:c})}})]}))},ne=function(e,t){var n="LLL d",r=new Date;r.setDate(r.getDate()-t+1);for(var o=[],i=0;i<t;i++)!function(t){var i=new Date(r);i.setDate(i.getDate()+t);var s=(0,tG.Z)(i,{representation:"date"}),a=e.find(function(e){return e.date===s});a?o.push({x:(0,ec.p6)(a.date,n),y:a.uniqueVisitors?a.uniqueVisitors:0}):o.push({x:(0,ec.p6)(s,n),y:0})}(i);return o},nt=function(e){var t=ne(e.viewData,e.dayCount);return(0,A.jsx)(t9,{data:t,my:3,chartTitle:(0,A.jsx)(O.cC,{id:"mSEibf"}),TooltipInner:nn})},nn=function(e){var t=e.x,n=e.y;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(eo.x,{children:t}),(0,A.jsx)(eo.x,{children:(0,A.jsx)(O.cC,{id:"6MKtHx",values:{y:n}})})]})},nr=function(e,t,n){if(!n)return 0;var r,o,i,s=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,a=null!==(o=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return"everyone"===t?s:"viewersOnly"===t?Math.max(0,s-a):0},no=function(e){var t,n,r,o=e.doc,i=e.handleSharePanelOpen,s=e.onAnalyticsPanelClose,a=(0,I.xls)({variables:{memoId:o.id},skip:!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),c=a.loading,l=a.data,d=a.error,u=a.refetch,f=(0,D.SE)().user,h=(0,v.useState)("deckView"),m=h[0],x=h[1],g=(0,v.useState)(null),j=g[0],b=g[1],y=(0,v.useState)("everyone"),C=y[0],w=y[1],S=(0,ec.p6)(o.createdTime,"PPP"),E=o.title||(0,A.jsx)(O.cC,{id:"wja8aL"}),P=(null==l?void 0:l.memoStats.viewers)||[],T=(null==l?void 0:null===(n=l.memoStats.dailyViews)||void 0===n?void 0:n.dayCount)||0,R=(t=null==l?void 0:l.memoStats)&&t.dailyViews?"everyone"===C?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===C&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],_=(0,el.Y)("individual_analytics",o.organization),L=(0,eu.zc)().openUpsellModal,M=R.every(function(e){return 0===e.uniqueVisitors}),z=P.filter(function(e){var t;return"everyone"===C||!(null!==(t=o.editors)&&void 0!==t&&t.some(function(t){var n,r;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(r=t.user)||void 0===r?void 0:r.id)}))}),N=nr(o,C,null==l?void 0:l.memoStats),Z=(0,v.useCallback)(function(e){w(e)},[]),G=(0,v.useCallback)(function(e){x(e)},[]),F=(0,v.useCallback)(function(e){if(!_&&e.id!==(null==f?void 0:f.id)){L({segmentEvent:ef.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}b(e)},[L,_,f]),U=(0,v.useCallback)(function(){b(null)},[]),V=void 0!==d;return(0,A.jsxs)(A.Fragment,{children:[j&&(0,A.jsx)(tS,{user:j,onBackClick:U,docId:o.id,onAnalyticsPanelClose:s}),!j&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(eI,{hasError:V,isAnalyticsLoading:c,setView:G,view:m,description:(0,A.jsx)(O.cC,{id:"uEtUah",values:{docTitle:E,docCreatedDate:S}})}),V&&(0,A.jsx)(ej,{error:d,refetch:u}),!V&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(K.i,{}),(0,A.jsxs)($.f,{children:[c&&(0,A.jsx)(ni,{}),!c&&P.length<=1&&(0,A.jsx)(ns,{handleSharePanelOpen:i}),!c&&(0,A.jsxs)(ee.K,{direction:"column",mt:4,spacing:4,children:[(0,A.jsxs)(p.k,{direction:"row",justify:"space-between",align:"center",children:[(0,A.jsx)(et.X,{as:"h2",size:"md",children:"cardEngagement"===m?eS():ek()}),(0,A.jsx)(tZ,{selected:C,handleMenuItemChange:Z,everyoneCount:nr(o,"everyone",null==l?void 0:l.memoStats),viewersOnlyCount:nr(o,"viewersOnly",null==l?void 0:l.memoStats)})]}),"deckView"===m&&M&&(0,A.jsx)(na,{handleSharePanelOpen:i,dayCount:T}),"deckView"===m&&!M&&(0,A.jsx)(nt,{viewData:R,dayCount:T}),"cardEngagement"===m&&(0,A.jsx)(e9,{docId:o.id,viewerFilter:C,currentViewerFilterCount:N,onAnalyticsPanelClose:s}),(0,A.jsx)(tO,{creatorId:(null===(r=o.createdBy)||void 0===r?void 0:r.id)||"",viewers:z,currentViewerFilterCount:N,docCreatedDate:S,contributors:o.editors||[],cardCount:(null==l?void 0:l.memoStats.cardCount)||0,handleTableRowClick:F,hasIndividualAnalytics:_}),z.length>3&&!_&&(0,A.jsx)(k.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:function(){return L({segmentEvent:ef.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS})},children:(0,A.jsx)(O.cC,{id:"BKBX4n",values:{0:z.length-3}})}),!_&&(0,A.jsx)(ed.m,{segmentEvent:ef.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:W.ag._({id:"GYgPBy"})})]})]})]})]})]})},ni=function(){return(0,A.jsxs)(p.k,{direction:"column",py:2,children:[(0,A.jsx)(en.O,{h:10,width:"40%",mb:4}),(0,A.jsx)(en.O,{h:40,mb:4}),(0,A.jsx)(er.g,{align:"stretch",children:(0,J.Z)([,,,]).map(function(e,t){return(0,A.jsx)(en.O,{h:12},t)})})]})},ns=function(e){var t=e.handleSharePanelOpen;return(0,A.jsx)(p.k,{p:3,px:4,mt:2,bg:"gray.100",color:ep,borderRadius:"base",children:(0,A.jsxs)(p.k,{align:"baseline",fontSize:"sm",children:[(0,A.jsx)(u.xu,{pr:2,children:(0,A.jsx)(S.G,{icon:Q.IL,"aria-label":"user-icon",size:"sm"})}),(0,A.jsx)(eo.x,{children:(0,A.jsx)(O.cC,{id:"FNMh4I",components:{0:(0,A.jsx)(eo.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},na=function(e){var t=e.handleSharePanelOpen,n=e.dayCount;return(0,A.jsxs)(ei.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,A.jsx)(u.Cd,{size:"30px",bg:"gray.500",children:(0,A.jsx)(S.G,{icon:X.Im,color:"white"})}),(0,A.jsx)(es.C,{mt:4,mb:2,fontSize:"md",children:(0,A.jsx)(O.cC,{id:"2OzAI5"})}),n>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ea.X,{maxWidth:"sm",children:(0,A.jsx)(O.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,A.jsx)(k.z,{mt:4,onClick:t,children:(0,A.jsx)(O.cC,{id:"IXzWG0"})})]})]})},nc=function(e){var t,n,r,o,i,s,a=e.doc,c=e.onAnalyticsPanelClose,l=(0,C.qr)().getState(),d=(0,_.X9)(l),f=(0,D.SE)().user,p=(0,I.IrH)({variables:{docId:a.id,userId:null==f?void 0:f.id},skip:!(null!=f&&f.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),h=p.data,m=p.error,x=p.loading,g=p.refetch,j=null!==(t=null==h?void 0:null===(n=h.docCardsStats)||void 0===n?void 0:null===(r=n.everyone)||void 0===r?void 0:r.length)&&void 0!==t?t:0,b=null==h?void 0:null===(o=h.docCardsStats)||void 0===o?void 0:o.cardCount,y=(0,v.useMemo)(function(){var e;return(null==h?void 0:null===(e=h.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==h?void 0:h.docCardsStats]),w=(0,v.useMemo)(function(){return eL(y,"viewTimePercent")},[y]);if(!f)return null;var k=f.id===(null===(i=a.createdBy)||void 0===i?void 0:i.id),S=null===(s=a.editors)||void 0===s?void 0:s.some(function(e){return e.user.id===f.id}),E={name:f.displayName,id:f.id,profileImg:f.profileImageUrl,email:f.email,isContributor:S,isCreator:k};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(eC.x,{children:[(0,A.jsx)(O.cC,{id:"ZlwDi6"}),(0,A.jsx)(eo.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:a.title||(0,A.jsx)(O.cC,{id:"wja8aL"})})]}),(0,A.jsx)(eO.o,{}),(0,A.jsx)(K.i,{}),(0,A.jsx)($.f,{children:(0,A.jsxs)(u.xu,{children:[(0,A.jsx)(tI,{user:E}),void 0!==b&&(0,A.jsx)(tt,{description:(0,A.jsx)(O.cC,{id:"YJOrjl",values:{cardsViewed:j,totalCards:b}})}),x&&!m&&(0,A.jsx)(te,{includeDescription:!0}),m&&(0,A.jsx)(ej,{error:m,refetch:g,px:0}),!m&&!x&&(0,A.jsx)(e6,{cards:d.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,A.jsx)(O.cC,{id:"ml51m3"}),rightLabel:(0,A.jsx)(O.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,A.jsx)(e8,{}),onAnalyticsPanelClose:c}),(0,A.jsxs)(ei.b,{children:[(0,A.jsx)(em.z,{}),(0,A.jsx)(O.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:tx.N6,GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}})]})]})})]})},nl=function(e){var t=e.doc,n=e.mode,r=e.isAnalyticsPanelOpen,o=e.onAnalyticsPanelClose,i=e.onSharePanelOpen,s=(0,N.i)({base:"sm",md:"2xl",lg:"4xl"}),a=(0,v.useCallback)(function(){i&&(i(),o())},[i,o]);return(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(H.u_,{onClose:o,isOpen:r,size:s,blockScrollOnMount:!1,children:[(0,A.jsx)(q.Z,{}),(0,A.jsxs)(B.h,{children:["full"===n?(0,A.jsx)(no,{doc:t,handleSharePanelOpen:a,onAnalyticsPanelClose:o}):(0,A.jsx)(nc,{doc:t,onAnalyticsPanelClose:o}),(0,A.jsx)(K.i,{my:4}),(0,A.jsx)(Y.m,{children:(0,A.jsxs)(p.k,{justifyContent:"full"===n?"space-between":"flex-end",flex:1,children:["full"===n&&(0,A.jsx)(k.z,{leftIcon:(0,A.jsx)(S.G,{icon:V.zB}),variant:"ghost",onClick:a,children:(0,A.jsx)(O.cC,{id:"IXzWG0"})}),(0,A.jsx)(k.z,{variant:"solid",onClick:o,children:(0,A.jsx)(O.cC,{id:"DPfwMq"})})]})})]})]})})},nd=n(77399),nu=n(88550),nf=n(17714),np=n(1123),nh=n(55479),nm=n(27777),nx=n(75156),ng=function(e){var t=e.isOpen,n=e.onClose,r=e.onSaveSuccess,o=e.docId,i=(0,nh.p)(),s=(0,v.useRef)(null),a=(0,v.useState)(""),l=a[0],d=a[1],u=(0,I.D1_)(),f=(0,c.Z)(u,2),p=f[0],h=f[1].loading,m=function(){p({variables:{id:o,title:l}}).then(function(){d(function(){return""}),r()}).catch(function(e){console.error(e),i({title:(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(O.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,A.jsxs)(H.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:s,children:[(0,A.jsx)(q.Z,{}),(0,A.jsxs)(B.h,{children:[(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}})}),(0,A.jsx)(eO.o,{}),(0,A.jsx)($.f,{children:(0,A.jsx)(nm.I,{ref:s,value:l,required:!0,placeholder:(0,nx.$)(),onChange:function(e){return d(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&m()}})}),(0,A.jsx)(Y.m,{children:(0,A.jsx)(ee.K,{spacing:2,direction:"row",align:"center",children:(0,A.jsx)(k.z,{isLoading:h,isDisabled:h||!l||!l.length,onClick:function(){m()},children:(0,A.jsx)(O.cC,{id:"tfDRzk"})})})})]})]})},nv=(0,v.memo)(function(e){var t=e.doc,n=(0,v.useCallback)(function(){return nu.T.emit("openSharePanel","invite")},[]),r=(0,nd.M)({id:"analyticsModalDisclosure"}),o=r.isOpen,i=r.onClose,s=r.onOpen,a=(0,nd.M)({id:"titleModalDisclosure"}),c=a.isOpen,l=a.onOpen,d=a.onClose,u=(0,ef.z$)(),f=(0,D.SE)().user,h=(0,D.py)("manage",t)&&!!f,m=(0,v.useCallback)(function(){t&&(t.title&&""!==t.title?n():l())},[t,n,l]),x=(0,v.useCallback)(function(e){return function(){null==u||u.track(ef.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()}},[u,null==t?void 0:t.id,s]);return h&&t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(p.k,{children:(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,A.jsx)(O.cC,{id:"YaUqUV"}),children:(0,A.jsx)(np.r,{"data-guider-highlight":"view-analytics-button","aria-label":W.ag._({id:"YaUqUV"}),onMouseDown:nf.br,onClick:x("toolbar_analytics_block"),icon:(0,A.jsx)(S.G,{icon:F.M})})})}),c&&(0,A.jsx)(ng,{onClose:d,isOpen:c,onSaveSuccess:function(){d(),n()},docId:null==t?void 0:t.id}),o&&(0,A.jsx)(nl,{doc:t,onSharePanelOpen:m,onAnalyticsPanelClose:i,isAnalyticsPanelOpen:o,mode:"full"})]}):null}),nj=n(93812),nb=n(24657),ny=n(94370),nC=n(34638),nw=n(67755),nO=n(67925),nk=n(73716),nS=n(10920),nI=n(15756),nE=n(81410),nP=n(84103),nD=n(47655),nA=n(72338),nT=n(14304),nR=n.n(nT),n_=n(39097),nL=n.n(n_),nM=n(5632),nz=n(37057),nN=n(34972),nZ=n(1153),nG=n(97526);function nF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nF(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nU=(0,x.E)(p.k),nV=function(e){var t=e.doc;return(0,A.jsx)(nU,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsx)(g.M,{initial:!1,children:(0,A.jsx)(nY,{doc:t})})})},nH=(0,v.memo)(function(e){var t=e.doc,n=(0,nN._i)().editor,r=(0,I.$gs)().isConnected,o=(0,nh.p)(),i=(0,v.useRef)(null),s=(0,v.useRef)(null),a=(0,I.D1_)(),l=(0,c.Z)(a,2),d=l[0],f=l[1].loading,p=(0,v.useState)(null),h=p[0],m=p[1],x=(0,v.useState)(!1),g=x[0],j=x[1],b=(0,v.useState)(!1),y=b[0],C=b[1],w=(0,D.py)("edit",t),k=(0,v.useCallback)(function(){if(!n)return"";var e=(0,nA.N2)(n.state.doc,nz.KH),t=(0,c.Z)(e,1)[0];return t&&(0,nD.getCardTitle)(t.node.toJSON())||""},[n]);(0,v.useEffect)(function(){!t||g||f||(m(t.title||""),C(!!t.titleEdited))},[t,g,f]);var S=function(){i.current.style.width=s.current.offsetWidth+0+"px"},E=(0,nC.ff)("gray.800","gray.200");return(0,A.jsx)(U.kH,{label:w?r?(0,A.jsx)(O.cC,{id:"2wxgft"}):(0,A.jsx)(O.cC,{id:"Cb+Bgk"}):null,"aria-label":W.ag._({id:"2wxgft"}),children:(0,A.jsxs)(nw.C,{value:h||"",placeholder:h||k(),isDisabled:f||!w||!r,isPreviewFocusable:w,maxW:300,width:"100%",fontWeight:"normal",onCancel:function(){S(),j(!1)},onFocus:function(){S(),t&&!f&&j(!0)},onChange:function(e){S(),g&&(m(e),C(!!e))},onSubmit:function(){if(t&&!f){j(!1);var e=h||k();d({variables:{id:t.id,title:e,titleEdited:y}}).catch(function(e){console.error(e),o({title:(0,A.jsx)(O.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})}},children:[(0,A.jsx)(nO.w,{px:1,py:.5,display:g?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:y?E:"inherit"}),(0,A.jsx)(nk.V,{ref:i,px:1,py:.5,color:y?E:"inherit",maxW:300,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,A.jsx)(u.xu,{ref:s,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:nR().sanitize((h||"").replace(/\s/g,"&nbsp;"))}})]})})});nH.displayName="EditableDocTitle";var nq=function(e){var t=e.cardId,n=e.isEllipsis,r=e.value,o=e.onClick,i=(0,eV.c)(t);if(n)return(0,A.jsx)(S.G,{icon:ny.cN});if(!t&&!r)return null;var s=r||(null==i?void 0:i.title)||"";return(0,A.jsx)(eo.x,{noOfLines:1,onClick:o,maxW:180,fontWeight:"normal",children:s})},nB=function(e){var t=e.isPresentModeFlat;return function(e){var n=(0,_.gh)(e),r=(0,_.i2)(e)||"",o=(0,_.X9)(e).parents[r]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];var i=o[0],s=o[o.length-1];return[{isHome:!0},o.length>1?{cardId:i}:null,o.length>2?{isEllipsis:!0}:null,o.length>0?{cardId:s}:null,{cardId:r}]}},nK=function(){var e=(0,b.ye)("presentModeFlat");return(0,C.CG)(nB({isPresentModeFlat:e}),function(e,t){return JSON.stringify(e)===JSON.stringify(t)})},nY=(0,v.memo)(function(e){var t=e.doc,n=nK(),r=(0,nZ.X)(nG.H.lastHomeUrl,"/"),o=(0,c.Z)(r,1)[0],i=(0,b.ye)("offline"),s=(0,D.SE)().user,a=(0,I.$gs)().isConnected,l=(0,nN._i)().confirmNavigation,d=(0,nM.useRouter)().push,f=(0,N.i)({base:"xs",sm:"sm"}),m=(0,nC.ff)("gray.500","gray.400"),x=(0,nC.ff)("gray.800","gray.100");return(0,A.jsxs)(h.U,{spacing:0,as:k.z,textAlign:"left",px:0,_hover:{color:x},h:8,children:[(0,A.jsx)(nS.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:f,spacing:["4px","8px"],variant:"plainButton",separator:(0,A.jsx)(u.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,A.jsx)(S.G,{icon:eG._t})}),children:n.map(function(e,r){if(!e)return null;var i=r===n.length-1,a=e.cardId,c=e.isEllipsis,u=e.isDocTitle,f=e.isHome,p=e.value,h=f?"home":c?"ellipsis":a||p||r;if(f&&!s)return null;var x={as:nL(),href:o||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,A.jsx)(nI.g,{children:(0,A.jsx)(nU,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,A.jsx)(nE.A,nW(nW({isCurrentPage:i,pointerEvents:i&&!u?"none":"inherit",color:i?m:"inherit"},f?nW({},x):{}),{},{children:u?(0,A.jsx)(nH,{doc:t}):f?(0,A.jsx)(nP.r,{href:x.href,onClick:function(e){e.preventDefault(),l().then(function(){d(x.href)})},mr:1,children:(0,A.jsx)(S.G,{size:"1x",icon:nb.J9})}):(0,A.jsx)(nq,{cardId:a,value:p,isEllipsis:c,onClick:function(){a&&(0,eH.D)({cardId:a,method:"push"})}})}))},h)},h)})}),!a&&(0,A.jsx)(U.kH,{label:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(eo.x,{mr:2,children:(0,A.jsx)(O.cC,{id:"ysdDIA"})}),i&&(0,A.jsx)(eo.x,{color:"gray.300",children:(0,A.jsx)(O.cC,{id:"+QNhGE"})})]}),"aria-label":W.ag._({id:"IcHxhR"}),children:(0,A.jsx)(p.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,A.jsx)(S.G,{icon:nj.bK})})})]})});nY.displayName="BreadcrumbGroup";var nJ=n(76547),nX=n(82642),nQ=n(76648),n$=n(30807),n0=n(80040),n1=n(95258),n2=n(28957),n5=n(43997),n3=n(69895),n6=function(){var e=(0,D.SE)(),t=e.user,n=e.anonymousUser,r=(0,n5.I0)(),i=(0,nh.p)(),s=(0,nN._i)().editor,a=(0,n5.v9)((0,_._h)((null==t?void 0:t.id)||n.id)),c=a.collaborators,l=a.followers;(0,n3.rU)({editor:s,collaborators:c,user:t});var d=(0,n5.v9)(_.Ok),u=(0,n5.v9)(_.e0),f=(0,n5.v9)(_.yn),m=(0,n5.v9)(_.gs),x=(0,n5.v9)(_.JA);(0,v.useEffect)(function(){d.forEach(function(e){i({duration:2e3,position:"bottom",render:function(){return(0,A.jsxs)(p.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,A.jsx)(td.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:eT()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,A.jsx)(eo.x,{ml:2,children:(0,A.jsx)(O.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[d,i]),(0,v.useEffect)(function(){var e=!f&&m&&!x;if(s&&e){i.closeAll();var t=i({id:"detached-toast",render:function(){return(0,A.jsxs)(p.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,A.jsx)(eo.x,{size:"sm",mr:6,children:(0,A.jsx)(O.cC,{id:"PjodLp"})}),(0,A.jsxs)(nQ.h,{size:"sm",alignItems:"center",children:[(0,A.jsx)(k.z,{onClick:function(){r((0,_.Qx)({attached:!0}))},variant:"solid",children:(0,A.jsx)(O.cC,{id:"f/C2ic"})}),(0,A.jsx)(U.kH,{label:(0,A.jsx)(O.cC,{id:"5JWVnj"}),children:(0,A.jsx)(eF.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":W.ag._({id:"5JWVnj"}),icon:(0,A.jsx)(nX.T,{}),onClick:function(){r((0,_.Qx)({attached:!1,following:null}))}})})]})]})},position:"bottom",duration:null});return function(){i.close(t)}}},[s,f,m,x,i,r]),(0,v.useEffect)(function(){m||!s||s.isDestroyed||r((0,_.Qx)({following:null}))},[s,m,r]);var g=(0,N.i)({base:4,md:6,xl:8})||6,j=g/(l.length?2:1),b=g/(c.length?2:1);return(0,A.jsx)(p.k,{children:(0,A.jsxs)(h.U,{divider:(0,A.jsx)(n$.c,{borderColor:"gray.200"}),children:[l.length&&(0,A.jsx)(n4,{type:o.FOLLOWERS,collaborators:l,max:b,isEveryone:0===c.length,localCollaborator:u,localIsAttached:f}),c.length&&(0,A.jsx)(n4,{type:o.COLLABORATORS,collaborators:c,max:j,isEveryone:0===l.length,localCollaborator:u,localIsAttached:f})]})})};(r=o||(o={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";var n4=function(e){var t=e.collaborators,n=e.localCollaborator,r=e.localIsAttached,i=e.type,s=e.max,a=e.isEveryone,c=(0,n3.OM)(),l=i===o.FOLLOWERS,d=t.length>s,u=d?t.slice(0,s-1):t,f=d?t.length-s+1:0,h=function(e){var t=e.localIsFollowing,n=e.collaborator;l||c({localIsFollowing:t,localIsAttached:r,collaborator:n})};return(0,A.jsx)(n2.S,{children:(0,A.jsxs)(n0.H,{size:"sm",spacing:l?-2:0,children:[l&&(0,A.jsx)(n8,{isEveryone:a}),u.map(function(e,t){var o,i=(null==n?void 0:null===(o=n.memoState)||void 0===o?void 0:o.following)===e.sessionId,s=!!e.idleSince,a=!l&&(d||u.length-1!==t);return(0,A.jsx)(U.Vw,{ignoreFallback:!0,name:e.name,label:(0,A.jsxs)(p.k,{direction:"column",justify:"center",align:"center",children:[(0,A.jsx)(eo.x,{children:e.name}),(0,A.jsx)(eo.x,{fontSize:"xs",children:l?(0,A.jsx)(O.cC,{id:"iRohzP"}):i&&r?(0,A.jsx)(O.cC,{id:"1QTvS5"}):(0,A.jsx)(O.cC,{id:"2Ldadb"})})]}),pointerEvents:s?"none":"auto",opacity:s?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:i&&r,bg:e.color,shadow:"base",color:eT()(e.color).isDark()?"white":"black",cursor:l?"":"pointer",boxProps:a?{marginEnd:-2}:{},onClick:function(){return h({localIsFollowing:i,collaborator:e})}},e.sessionId)}),f>0&&(0,A.jsxs)(U.Z9,{tooltipLabel:W.ag._({id:"25VyZX"}),onClick:function(e){var r,o=t.find(function(t){return t.id===e.id});h({localIsFollowing:!!(o&&(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===o.sessionId),collaborator:o})},avatars:t,count:f,disabled:l,children:[(0,A.jsx)(eo.x,{px:2,children:l?(0,A.jsx)(O.cC,{id:"vliZud",values:{0:t.length}}):(0,A.jsx)(O.cC,{id:"sC4bhw",values:{0:t.length}})}),!l&&(0,A.jsx)(eo.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"miJbY4"})}),(0,A.jsx)(n1.R,{})]})]})})},n8=function(e){var t=e.isEveryone,n=(0,v.useState)(!1),r=n[0],o=n[1],i=(0,v.useState)(!1),s=i[0],a=i[1],c=(0,v.useState)(!1),l=c[0],d=c[1];return((0,v.useEffect)(function(){!r&&t&&(a(!0),o(!0),setTimeout(function(){a(!1)},3e3))},[t,r]),t)?(0,A.jsx)(u.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,A.jsx)(U.kH,{label:(0,A.jsx)(O.cC,{id:"w7dTyp"}),isOpen:l||s,children:(0,A.jsx)(u.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:(0,A.jsx)(S.G,{icon:nJ.Md})})})}):(0,A.jsx)(u.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,A.jsx)(S.G,{icon:nJ.Md})})},n7=n(60670),n9=n(54728),re=n(51434),rt=n(94301),rn=n(91333),rr=n(10344),ro=n(70173),ri=n(93848),rs=n(22569),ra=(0,x.E)(u.xu),rc=function(e){var t=e.commentFeedItems,n=e.editor,r=e.doc,o=e.user;return n&&o?(0,A.jsx)(ee.K,{p:2,children:(0,A.jsx)(g.M,{initial:!1,children:t.map(function(e){return(0,A.jsx)(ra,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,A.jsx)(rs.q,{comment:e,editor:n,selfUser:o,docId:r.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id)})})}):null},rl=n(38140),rd=n(88914);function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rp=function(e){return!!e.comment&&null!==e.timeout},rh=function(e){var t=e.user,n=e.docId,r=e.docComments,o=void 0===r?[]:r,i=e.pauseExiration,a=void 0!==i&&i,l=e.duration,d=void 0===l?5e3:l,u=(0,nh.p)(),f=null==t?void 0:t.id,p=(0,v.useMemo)(function(){if(!f)return null;var e=new rl.default(rd.v.KNOCK_PUBLIC_KEY);return e.authenticate(f),e},[f]),h=(0,v.useState)({}),m=h[0],x=h[1],g=(0,v.useRef)(!0),j=(0,v.useRef)(a);j.current=a,(0,v.useEffect)(function(){return function(){g.current=!1}},[]);var b=(0,v.useCallback)(function(){return x({})},[]),y=(0,v.useCallback)(function(e){x(function(t){return Object.entries(t).reduce(function(t,n){var r=(0,c.Z)(n,2),o=r[0],i=r[1];return(!0===e?-1===i.timeout:o===e)||(t[o]=i),t},{})})},[]);return(0,v.useEffect)(function(){a||y(!0)},[y,a]),(0,v.useEffect)(function(){Object.entries(m).forEach(function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1],i=r.entry;if(null===r.timeout){var a=i.data.commentId,l=null==o?void 0:o.find(function(e){return e.id===a});if(l){var u=setTimeout(function(){g.current&&(j.current?x(function(e){var t=rf({},e);return t[n].timeout=-1,t}):y(n))},d);x(function(e){return rf(rf({},e),{},(0,s.Z)({},n,{entry:i,comment:l,timeout:u}))})}}})},[m,o,d,y]),(0,v.useEffect)(function(){if(p&&n){var e=p.feeds.initialize(rd.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();e.on("messages.new",function(t){var r=t.entries,o=(0,c.Z)(r,1)[0];o.data.docId===n&&(x(function(e){return rf(rf({},e),{},(0,s.Z)({},o.id,{entry:o,timeout:null}))}),e.markAsSeen(o).then(function(){console.debug("New notification marked as seen")}).catch(function(e){console.error("Unable to mark notification as seen",e)}))});var r=I.C9N.on("status",function(e){var t=e.isConnected,n=p.client();t?n.connectSocket():n.disconnectSocket()});return function(){r(),t()}}},[n,u,p]),{reset:b,comments:Object.values(m).filter(rp).map(function(e){return e.comment})}},rm=function(e){var t,n=e.toggleCommentsPanel,r=e.isCommentsPanelOpen,o=e.doc,i=e.mode,s=(0,D.SE)().user,a=(0,L._i)().editor,l=(0,eq.XI)(),d=(0,c.Z)(l,2),u=d[0],f=d[1],p=rh({user:s,docId:null==o?void 0:o.id,docComments:null==o?void 0:o.comments,pauseExiration:f}),h=p.comments,m=p.reset,x=!!(a&&o&&o.comments);(0,v.useEffect)(function(){if(x){var e=(0,G.sY)().commentId;e&&ri.pw.emit(ri.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})}},[x]),(0,v.useEffect)(function(){(r||i===ro.q.SLIDE_VIEW)&&m()},[r,m,i]);var g=!!h.length&&!r&&i!==ro.q.SLIDE_VIEW,j=(null==o?void 0:null===(t=o.comments)||void 0===t?void 0:t.filter(function(e){return e.status===I.Ux9.Open}).length)||0;return(0,A.jsxs)(n9.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:g,placement:"bottom",children:[(0,A.jsx)(re.x,{children:(0,A.jsx)(np.h,{onMouseDown:nf.br,onClick:n,icon:(0,A.jsx)(S.G,{icon:n7.Mz}),isActive:r,"aria-label":r?"Hide comments":"Show comments",borderRadius:5,children:j})}),(0,A.jsx)(rt.h,{children:o&&(0,A.jsxs)(rn.y,{bg:"white",shadow:"lg",border:"none",ref:u,children:[(0,A.jsx)(rr.Q,{bg:"white"}),(0,A.jsx)(rc,{editor:a,user:s,commentFeedItems:h,doc:o})]})})]})},rx=n(75695),rg=n(23026),rv=function(){return(0,A.jsx)(p.k,{children:(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,A.jsx)(O.cC,{id:"EVnzPs"}),children:(0,A.jsx)(np.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:function(){rg.T.emit("toggle",{})},icon:(0,A.jsx)(S.G,{icon:rx.KC})})})})},rj=n(36471),rb=n(57895),ry=n(90282),rC=n(24799),rw=n(1672),rO=n(10649),rk=n(86378),rS=n(82904),rI=n(4036),rE=n(82282),rP=n(31807),rD=n(66397),rA=n(53776),rT=n(18149),rR=n.n(rT),r_=n(420),rL=n(76360),rM=n(75342),rz=n(2046),rN=n(70287),rZ=function(e){var t=e.onAddDomain,n=e.isAddingDomain,r=(0,v.useState)(""),o=r[0],i=r[1],s=(0,P.m6)(o);return(0,A.jsx)(rL.Z,{my:2,variant:"filled",children:(0,A.jsx)(rM.e,{fontSize:"sm",children:(0,A.jsxs)(ee.K,{spacing:5,children:[(0,A.jsx)(eo.x,{fontSize:"xl",fontWeight:"bold",children:(0,A.jsx)(O.cC,{id:"MPZogu",values:{GAMMA_PROPER_NOUN:tx.N6}})}),(0,A.jsxs)(rz.NI,{children:[(0,A.jsx)(rN.l,{children:(0,A.jsx)(O.cC,{id:"49uOXe"})}),(0,A.jsxs)(h.U,{children:[(0,A.jsx)(nm.I,{bg:"white",placeholder:"www.yourdomain.com",value:o,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s&&(e.preventDefault(),t(o))}}),(0,A.jsx)(ee.K,{children:(0,A.jsx)(U.kH,{label:(0,A.jsx)(O.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:s,children:(0,A.jsx)(k.z,{isDisabled:!s,variant:"solid",onClick:function(){return t(o)},isLoading:n,children:(0,A.jsx)(O.cC,{id:"SbL5Je"})})})})]})]})]})})})},rG=n(48453),rF=n(86554),rW=n(21891),rU=n(92936),rV=n(60807),rH=n(35837),rq=function(e){var t=e.path,n=e.pathError,r=e.conflictingRoute,o=e.onPathUpdate,i=e.isPathInputDisabled,s=e.onClose;return(0,A.jsxs)(ee.K,{pb:6,children:[(0,A.jsx)(ee.K,{direction:"row",children:(0,A.jsxs)(eo.x,{children:[(0,A.jsx)(O.cC,{id:"dq8+qI"}),":"," "]})}),(0,A.jsx)(m.L,{}),(0,A.jsx)(ee.K,{spacing:2,children:(0,A.jsx)(h.U,{spacing:1,children:(0,A.jsxs)(rz.NI,{as:"fieldset",isInvalid:void 0!==n&&n,children:[(0,A.jsx)(h.U,{children:(0,A.jsxs)(rW.B,{children:[(0,A.jsx)(rU.Ui,{children:"/"}),(0,A.jsx)(nm.I,{isDisabled:i,bg:"white",flex:2,value:t,onChange:function(e){o((0,P.pi)(e.currentTarget.value))}})]})}),(0,A.jsxs)(ee.K,{spacing:4,children:[(0,A.jsx)(rz.Q6,{fontSize:"sm",children:(0,A.jsxs)(ee.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:[(0,A.jsx)(ee.K,{spacing:1,children:(0,A.jsx)(eo.x,{color:"gray.500",children:(0,A.jsx)(O.cC,{id:"ZMlbHK"})})}),r&&(0,A.jsx)(rV.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,A.jsx)(eo.x,{fontSize:"xs",children:(0,A.jsx)(O.cC,{id:"DQaTdC",components:{0:(0,A.jsx)(nP.r,{textDecoration:"underline",href:(0,G.Gn)({docId:r.docId}),target:"_blank"})}})})})]})}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",mt:4,children:(0,A.jsx)(O.cC,{id:"g4cZni",components:{0:(0,A.jsx)(k.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){s(),ri.pw.emit(ri.TI.OPEN_PAGE_SETUP,"preview")}})}})}),(0,A.jsxs)(ei.b,{colorScheme:"gray",bg:"blackAlpha.100",children:[(0,A.jsx)(em.z,{}),(0,A.jsxs)(ee.K,{children:[(0,A.jsx)(eo.x,{fontWeight:"bold",fontSize:"sm",children:(0,A.jsx)(O.cC,{id:"E29kJ/"})}),(0,A.jsxs)(rH.QI,{pl:"4",spacing:"1",fontSize:"xs",children:[(0,A.jsxs)(rH.HC,{children:[(0,A.jsx)(O.cC,{id:"tB9qsK",values:{GAMMA_PROPER_NOUN:tx.N6}})," ",(0,A.jsx)(U.Yq,{label:W.ag._({id:"9sEGjz"})})]}),(0,A.jsx)(rH.HC,{children:(0,A.jsx)(O.cC,{id:"8Ijq31"})}),(0,A.jsx)(rH.HC,{children:(0,A.jsx)(O.cC,{id:"0rExAx"})})]})]})]})]})]})})})]})},rB=function(e){var t=e.onClose,n=e.onConfirm,r=(0,v.useCallback)(function(){t(),n()},[t,n]);return(0,A.jsxs)(H.u_,{onClose:t,isOpen:!0,children:[(0,A.jsx)(q.Z,{}),(0,A.jsxs)(B.h,{children:[(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"dqU8B8"})}),(0,A.jsx)(eO.o,{}),(0,A.jsx)($.f,{children:(0,A.jsxs)(ee.K,{spacing:4,children:[(0,A.jsx)(eo.x,{fontWeight:"bold",children:(0,A.jsx)(O.cC,{id:"TKppIR"})}),(0,A.jsx)(eo.x,{children:(0,A.jsx)(O.cC,{id:"jvL5br"})})]})}),(0,A.jsx)(Y.m,{children:(0,A.jsxs)(nQ.h,{children:[(0,A.jsx)(k.z,{variant:"ghost",onClick:t,children:(0,A.jsx)(O.cC,{id:"dEgA5A"})}),(0,A.jsx)(k.z,{variant:"ghost",colorScheme:"red",onClick:r,children:(0,A.jsx)(O.cC,{id:"3EbjfR"})})]})})]})]})},rK=n(31145),rY=n(84558),rJ=function(e){var t=e.heading,n=e.subheading,r=e.icon,o=e.children;return(0,A.jsxs)(p.k,{gap:4,alignItems:"center",children:[(0,A.jsx)(p.k,{h:"8",w:"8",bg:"gray.200",borderRadius:"full",justifyContent:"center",alignItems:"center",color:"gray.800",children:(0,A.jsx)(S.G,{icon:r})}),(0,A.jsxs)(ee.K,{spacing:0,children:[t,n]}),(0,A.jsx)(m.L,{}),o]})},rX=function(e){var t,n,r=e.doc,o=e.site,i=e.path,s=e.isPublishing,a=void 0!==s&&s,c=e.isUnpublishing,l=void 0!==c&&c,d=e.enabled,u=e.publishButtonTooltipLabel,f=e.onPublishClick,p=e.onUnpublishClick,m=null==r?void 0:r.title,x=!!(null==r?void 0:r.publishedSnapshotId),g=null==o?void 0:null===(t=o.currentDeployment)||void 0===t?void 0:t.deploymentTime,j=x&&!!g&&(null==o?void 0:o.currentDeployment)&&(null==r?void 0:r.publishedTime)&&new Date(null==o?void 0:o.currentDeployment.deploymentTime)>new Date(r.publishedTime),b=null==o?void 0:null===(n=o.domains)||void 0===n?void 0:n[0],y=(0,P.mn)({domain:b,path:i}),C=(0,v.useMemo)(function(){return{fromNow:(0,ec.Km)(g),calendar:(0,ec.p6)(g,"PPpp")}},[g]);return(0,A.jsx)(rJ,{heading:(0,A.jsxs)(h.U,{children:[(0,A.jsx)(eo.x,{noOfLines:1,children:m}),j&&(0,A.jsx)(rI.C,{colorScheme:"green",children:"Live"})]}),subheading:j?(0,A.jsxs)(h.U,{spacing:1.5,fontSize:"sm",children:[(0,A.jsx)(eo.x,{color:"gray.500",fontSize:"sm",children:(0,A.jsx)(O.cC,{id:"ay/UB+",values:{0:C.fromNow},components:{0:(0,A.jsx)(U.kH,{label:C.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,A.jsx)(eo.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:""}),(0,A.jsx)(k.z,{variant:"link",size:"sm",onClick:p,isDisabled:a||l,isLoading:l,children:(0,A.jsx)(O.cC,{id:"4DLZUa"})})]}):l||a?(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:(0,A.jsx)(r_.$,{size:"xs"})}):(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"mY40hj"})}),icon:rY.Rk,children:(0,A.jsxs)(nQ.h,{children:[(0,A.jsx)(U.kH,{label:u,shouldWrapChildren:!0,placement:"top",children:(0,A.jsx)(k.z,{variant:"solid",isDisabled:!d,isLoading:a||l,loadingText:a?W.ag._({id:"Bdha5y"}):l?W.ag._({id:"JZOp0b"}):void 0,onClick:f,children:(0,A.jsx)(O.cC,{id:"qcawwg"})})}),j&&(0,A.jsx)(U.kH,{label:y,shouldWrapChildren:!0,placement:"top",children:(0,A.jsx)(k.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:y,isDisabled:!d,rightIcon:(0,A.jsx)(S.G,{icon:rK.faArrowUpRightFromSquare}),children:(0,A.jsx)(O.cC,{id:"Zel0o2"})})})]})})};function rQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rQ(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r0={path:""},r1=function(e){var t,n=e.isOpen,r=e.onClose,o=e.doc,i=(0,nh.p)(),s=(0,v.useState)(r0),c=s[0],l=s[1],u=(0,v.useState)(r0),f=u[0],p=u[1],h=(0,v.useState)(!1),m=h[0],x=h[1],g=o.id,j=null===(t=o.organization)||void 0===t?void 0:t.id,b=(0,rA.bBo)({variables:{workspaceId:j},skip:!j}),y=b.data,C=b.refetch,w=(0,nd.M)({id:"domainSetupModal"}),k=w.isOpen,S=w.onOpen,I=w.onClose,D=(0,nd.M)({id:"publishModalWarning"}),T=D.isOpen,R=D.onOpen,_=D.onClose,L=null==y?void 0:y.sites,M=(0,P.uK)({doc:o,sites:L}),z=(0,P.Yu)({site:M,docId:g}),N=(0,P.gT)({routes:(null==M?void 0:M.routes)||[],path:c.path,docId:g}),Z=null==M?void 0:M.domains.find(function(e){return"pending"===e.status}),G=c.path!==f.path||void 0===z,F=!!o&&!!y,W=!rR()(c,f),V=(0,v.useState)("coldStart"),K=V[0],Y=V[1],J=(0,v.useState)(null),X=J[0],Q=J[1],en=(0,v.useState)(!1),er=en[0],eo=en[1],ei=!!er&&!N&&!1===m,es=(0,v.useState)(),ea=es[0],ec=es[1],el=(0,E.q)({doc:o,site:M,path:c.path}),ed=el.publishAndDeploy,eu=el.addDomain,ef=el.isAddingDomain,ep=el.createSite,eh=el.isCreatingSite,em=el.unpublishAndDeploy,ex=el.updateRoutes;(0,v.useEffect)(function(){if(Z){var e=setInterval(function(){C()},1e4);return function(){clearInterval(e)}}},[Z,C,M]),(0,v.useEffect)(function(){F&&M&&eo(!0)},[F,M,z]),(0,v.useEffect)(function(){F&&M&&Y("hasDomains")},[F,M]),(0,v.useEffect)(function(){l({path:z||""}),p({path:z||""})},[z]);var eg=(0,v.useCallback)(function(e){ec(e),S()},[S]),ev=(0,v.useCallback)((0,a.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(!N){e.next=5;break}return i({description:(0,A.jsx)(O.cC,{id:"ldkJkh",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}}),status:"error",position:"top",duration:5e3,isClosable:!0}),e.abrupt("return");case 5:if(x("publish"),!G){e.next=9;break}return e.next=9,ex();case 9:return e.next=11,ed();case 11:x(!1);case 12:case"end":return e.stop()}},e)})),[N,g,G,ed,i,ex]),ej=(0,v.useCallback)((0,a.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x("unpublish"),e.next=3,em();case 3:x(!1);case 4:case"end":return e.stop()}},e)})),[em]),eb=(0,v.useCallback)(function(){W?R():r()},[W,r,R]),ey=(0,v.useCallback)(function(e){"addDomain"===X?(eu(e),I()):"createSite"===X&&(ep(e),I())},[eu,X,ep,I]);return console.log("%cPublishWebsite debug","background-color: #cc00ff",{doc:o,sites:L,siteToUse:M,pathToUse:z}),(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(H.u_,{isOpen:n,onClose:eb,size:"4xl",closeOnOverlayClick:!1,children:[(0,A.jsx)(q.Z,{}),(0,A.jsx)(B.h,{children:F?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(ee.K,{px:6,py:4,borderBottomWidth:"1px",children:[(0,A.jsx)(et.X,{mb:2,children:(0,A.jsx)(O.cC,{id:"Khu3PV"})}),"hasDomains"===K&&(0,A.jsx)(rX,{doc:o,path:z,site:M,enabled:ei,publishButtonTooltipLabel:er?void 0===z?(0,A.jsx)(O.cC,{id:"O7BXvp"}):void 0:(0,A.jsx)(O.cC,{id:"XDmUdC"}),onPublishClick:ev,onUnpublishClick:ej,isPublishing:"publish"===m,isUnpublishing:"unpublish"===m})]}),(0,A.jsx)(eO.o,{}),(0,A.jsx)($.f,{children:(0,A.jsxs)(ee.K,{spacing:6,children:["coldStart"===K&&(0,A.jsx)(rZ,{onAddDomain:function(e){Q("createSite"),ec(e),S()},isAddingDomain:eh}),"hasDomains"===K&&M&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(rG.T,{path:z,site:M,onDomainSetupClick:eg,onAddDomain:function(e){S(),ec(e),Q("addDomain")},isAddingDomain:ef,refetchSites:C}),(0,A.jsx)(rq,{path:c.path,pathError:!!N,conflictingRoute:N,isPathInputDisabled:!1!==m,onPathUpdate:function(e){l(function(t){return r$(r$({},t),{},{path:e})})},onClose:r})]})]})})]}):(0,A.jsx)(r_.$,{})}),k&&ea&&(0,A.jsx)(rF.w,{domainName:ea,isOpen:k,onClose:function(){I(),Q(null)},onDomainConfirmed:X?ey:null}),T&&(0,A.jsx)(rB,{onClose:_,onConfirm:r})]})})},r2=function(e){var t,n=e.doc,r=(0,nd.M)({id:"publishModal"}),o=r.isOpen,i=r.onClose,s=r.onOpen,a=null===(t=n.organization)||void 0===t?void 0:t.id,c=(0,rA.bBo)({variables:{workspaceId:a},skip:!a}).data,l=(null==c?void 0:c.sites)||[];return(0,A.jsxs)(rS.s,{icon:(0,A.jsx)(S.G,{icon:w.A$,fixedWidth:!0}),onClick:function(){s()},children:[(0,A.jsxs)(h.U,{children:[l.length>0?(0,A.jsx)(O.cC,{id:"BCIqs5"}):(0,A.jsx)(O.cC,{id:"TMYPtj"}),(0,A.jsx)(m.L,{}),(0,A.jsx)(rI.C,{colorScheme:"green",ml:2,children:(0,A.jsx)(O.cC,{id:"YBt9YP"})})]}),n&&o&&(0,A.jsx)(r1,{doc:n,isOpen:o,onClose:i})]})},r5=n(78116),r3=n(16796),r6=n(11325),r4=["label","initialValue","updateValue","helperText","language"];function r8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var r7=function(e){var t=e.label,r=e.initialValue,o=e.updateValue,i=e.helperText,a=e.language,c=(0,eh.Z)(e,r4),l=(0,v.useState)(void 0===r?"":r),d=l[0],f=l[1],p=(0,v.useState)(null),h=p[0],m=p[1],x=(0,eq.Kt)(o,100),g=(0,v.useState)(),j=g[0],b=g[1];(0,v.useEffect)(function(){"css"===a?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(function(e){b(e.css())}):"html"===a&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(function(e){b(e.html())})},[a]),(0,eq.vm)(function(){m(null),x(d)},[d,x],[d]);var y=[j].filter(Boolean);return(0,A.jsxs)(rz.NI,{isInvalid:!!h,children:[(0,A.jsx)(rN.l,{children:t}),h&&(0,A.jsx)(rV.J1,{children:h}),i&&(0,A.jsx)(rz.Q6,{children:i}),(0,A.jsx)(u.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,A.jsx)(v.Suspense,{fallback:(0,A.jsx)("span",{}),children:(0,A.jsx)(r6.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r8(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({value:d,extensions:y,onChange:f},c))})})]})},r9=n(6946),oe=(0,v.memo)(function(e){var t=e.isOpen,n=e.onClose,r=e.editor,o=(0,r9.A)(r),i=(0,C.CG)(_.$p).bodyStart,s=(0,v.useCallback)(function(e){null==r||r.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[r]);return(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(r5.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,A.jsx)(q.Z,{background:"none"}),(0,A.jsxs)(r3.s,{onKeyDown:o,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,A.jsx)(eO.o,{}),(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"E16GGw"})}),(0,A.jsx)($.f,{overflowX:"hidden",children:(0,A.jsx)(r7,{label:W.ag._({id:"fC5kYg"}),helperText:W.ag._({id:"0AZNtw"}),initialValue:i,updateValue:s,language:"html",height:"600px"})}),(0,A.jsx)(Y.m,{children:(0,A.jsx)(k.z,{w:"100%",variant:"solid",onClick:n,children:(0,A.jsx)(O.cC,{id:"DPfwMq"})})})]})]})})});oe.displayName="CustomCodeDrawer";var ot=n(87268),on=function(e){var t=(0,C.CG)(_.e_),n=(0,C.TL)(),r=(0,v.useCallback)(function(e){n((0,_.Qt)({docAttrs:{format:e}}))},[n]);return(0,A.jsx)(nQ.h,{size:"sm",isAttached:!0,my:2,children:ot.n.map(function(e){return(0,A.jsx)(k.z,{isActive:e.key===t.key,onClick:function(){return r(e.key)},children:tp()(e.label)},e.key)})})},or=n(13302),oo=n(96622),oi=n(20387),os=function(){var e;return e={},(0,s.Z)(e,ro.q.DOC_VIEW,{buttonLabel:(0,A.jsx)(O.cC,{id:"eZb+lw"}),shortcutIcon:oi.zc,shortcutKeys:(0,U.cE)("Mod+Enter"),shortcutLabel:(0,A.jsx)(O.cC,{id:"9vUn+H"})}),(0,s.Z)(e,ro.q.SLIDE_VIEW,{buttonLabel:(0,A.jsx)(O.cC,{id:"ydzS9x"}),shortcutIcon:oo.Bg,shortcutKeys:"Esc",shortcutLabel:(0,A.jsx)(O.cC,{id:"5Rfo7J"})}),e},oa=n(27486),oc=function(e){var t=e.editorWrapperEl,n=e.scrollingParentSelector,r=(0,C.CG)(_.gh),o=(0,b.ye)("presentFullScreen"),i=os()[r],s=i.shortcutIcon,a=i.shortcutKeys,c=i.buttonLabel,l=(0,oa.M)({editorWrapperEl:t,scrollingParentSelector:n}),d=l.enterSlideView,u=l.exitSlideView;return(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:s,fixedWidth:!0}),command:a,onClick:function(){r===ro.q.SLIDE_VIEW?u():d({fullscreen:o})},children:c})},ol=n(8848),od=n(24798),ou=n(73848),of=n(89190),op=n(58124),oh=n(86482),om=n(69663);function ox(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var og=function(e,t){var n=[];return!function e(r){if(t(r)&&n.push(r),r.content){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ox(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ox(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(r.content);try{for(i.s();!(o=i.n()).done;){var s=o.value;e(s)}}catch(e){i.e(e)}finally{i.f()}}}(e),n},ov=function(){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(en.O,{w:"350px",h:12}),(0,A.jsx)(ol.N,{mt:3,w:64,noOfLines:1})]})},oj=function(e){var t=e.createdTime,n=e.editors,r=e.isLatest,o=e.onClick,i=e.showPaywall,s=e.paywallCount;if(!n||!n.length)return(0,A.jsx)(A.Fragment,{});var a=i?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",c=(0,A.jsxs)(od.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:a,maskImage:a},border:"none",isDisabled:i,opacity:"1 !important",onClick:o,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,A.jsxs)(p.k,{w:"100%",direction:"column",children:[(0,A.jsx)(eo.x,{fontSize:"sm",children:tp()((0,tg.P9)(t))}),(0,A.jsx)(eo.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),r&&(0,A.jsx)(rI.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,A.jsx)(O.cC,{id:"wL3cK8"})})]});return i?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(U.kH,{placement:"top",isDisabled:!i,label:i?(0,A.jsx)(O.cC,{id:"PYTBm5",values:{paywallCount:s}}):void 0,children:(0,A.jsx)(u.xu,{mb:4,children:c})}),(0,A.jsx)(ed.m,{isNarrow:!0,segmentEvent:ef.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,A.jsx)(O.cC,{id:"mVKYtH"})})]}):c},ob=function(e){var t,n=(0,el.Yt)(),r=(0,v.useMemo)(function(){if("unlimited"===n)return{items:e,paywalledItems:[]};var t=parseInt(n),r=e.filter(function(e,n){return 0===n||(0,rP.Z)(e.createdTime)>=new Date(Date.now()-864e5*t)}),o=e.slice(r.length,e.length),i=o.length?o[0]:null;return{items:r.concat(i?[i]:[]),paywalledItems:o}},[n,e]),o=r.items,i=r.paywalledItems;return{groupedSnapshots:(0,v.useMemo)(function(){return(0,tg.yd)({items:o,sortBy:"createdTime"})},[o]),paywalledSnapshotId:null===(t=i[0])||void 0===t?void 0:t.id,paywallCount:i.length}},oy=function(e){var t=e.groupedSnapshots,n=e.paywalledSnapshotId,r=e.paywallCount,o=e.onClick,i=e.showFetchMore,s=e.onFetchMoreClick,a=e.isFetchingMore;return(0,A.jsxs)(ou.t,{w:"100%",children:[Object.entries(t).filter(function(e){return(0,c.Z)(e,2)[1].length}).map(function(e){var t=(0,c.Z)(e,2),i=t[0],s=t[1];return(0,A.jsxs)(v.Fragment,{children:[(0,A.jsx)(U.NZ,{px:4,py:2,mx:0,mt:2,children:{today:W.ag._({id:"ecUA8p"}),thisWeek:W.ag._({id:"yByRxz"}),earlier:W.ag._({id:"HGg4T/"})}[i]}),s.map(function(e,t){var i=e.createdTime,s=e.editors,a=e.id;return(0,A.jsx)(oj,{onClick:function(){return o(a)},isLatest:0===t,createdTime:i,editors:s,showPaywall:n===a,paywallCount:r},a)})]},i)}),i&&(0,A.jsx)(k.z,{isLoading:a,onClick:s,children:(0,A.jsx)(O.cC,{id:"yQ2kGp"})})]})},oC=function(){return(0,A.jsxs)(ou.t,{w:"100%",children:[(0,A.jsx)(en.O,{h:16}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2}),(0,A.jsx)(en.O,{h:16,mt:2})]})},ow=function(e){var t=e.title,n=e.createdBy,r=e.createdTime,o=e.numSnapshots;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(eo.x,{mt:1,children:(0,A.jsx)(O.cC,{id:"yf//Op",values:{0:(0,ec.Dw)(r),1:(0,ec.Dw)(r),numSnapshots:o}})}),(0,A.jsx)(eo.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,A.jsx)(O.cC,{id:"JVHTIo",values:{0:null!=n&&n.displayName?null==n?void 0:n.displayName:"Unknown",1:(0,ec.p6)(r,"PPp"),title:t}})})]})},oO="snapshot-editor-root",ok=function(e){var t=e.id,n=e.doc,r=e.content,o=(0,v.useMemo)(function(){if(r)return og(r,function(e){return e.type===oh.W4}).map(function(e){var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,nD.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[r,n]);return(0,A.jsx)(op.fb,{reduxData:{cards:o},initialContent:r,doc:n,docId:n.id,scrollingParentSelector:".".concat(oO),isInsideDrawer:!0},t)},oS=function(e){var t=e.isOpen,n=e.onClose,r=e.doc,o=(0,nh.p)(),i=(0,nN._i)().getCollaborativeEditorInstance,s=(0,v.useState)(!1),a=s[0],l=s[1],d=(0,I.pfN)({variables:{docId:r.id,first:25},skip:!r||!t,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),f=d.loading,h=d.data,m=d.called,x=d.fetchMore,g=(0,I.opq)({nextFetchPolicy:"cache-only"}),b=(0,c.Z)(g,2),y=b[0],C=b[1],w=C.loading,S=C.data,E=(null==h?void 0:h.snapshots.edges.map(function(e){return e.node}))||[],P=ob(E),D=P.groupedSnapshots,T=P.paywalledSnapshotId,R=P.paywallCount,_=null==h?void 0:h.snapshots.pageInfo,L=!!(!T&&m&&(null==_?void 0:_.hasNextPage)&&(null==_?void 0:_.endCursor)),M=(0,v.useCallback)(function(){null!=_&&_.hasNextPage&&null!=_&&_.endCursor&&(l(!0),x({variables:{after:_.endCursor}}).finally(function(){l(!1)}))},[x,null==_?void 0:_.endCursor,null==_?void 0:_.hasNextPage]),z=E[0];(0,v.useEffect)(function(){null!=z&&z.id&&y({variables:{snapshotId:z.id,docId:r.id}})},[r.id,y,null==z?void 0:z.id]);var N=(0,nx.$)(null==r?void 0:r.title),Z=null==r?void 0:r.createdBy,G=null==r?void 0:r.createdTime,F=null==S?void 0:S.snapshot,W=F&&F.id===r.currentSnapshotId;return(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(r5.d,{placement:"bottom",onClose:n,isOpen:t,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,A.jsx)(q.Z,{}),(0,A.jsxs)(r3.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,A.jsx)(eO.o,{}),(0,A.jsxs)(eC.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[f&&(0,A.jsx)(ov,{}),r&&E&&(0,A.jsx)(ow,{numSnapshots:(null==E?void 0:E.length)||0,createdBy:Z,createdTime:G,title:N})]}),(0,A.jsx)($.f,{p:0,h:"100%",children:(0,A.jsxs)(p.k,{direction:"row",h:"100%",children:[(0,A.jsx)(u.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,A.jsxs)(of.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[f&&(0,A.jsx)(oC,{}),!f&&E&&(0,A.jsx)(oy,{onClick:function(e){y({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:D,paywalledSnapshotId:T,paywallCount:R,showFetchMore:L,onFetchMoreClick:M,isFetchingMore:a})]})}),(0,A.jsx)(p.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:oO,css:{"--editor-width":"100%"},children:(0,A.jsxs)(p.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,A.jsx)(om.Y,{}),(!F||w)&&(0,A.jsx)(j.AA,{}),F&&!w&&(0,A.jsx)(ok,{id:F.id,doc:r,content:null==F?void 0:F.content.default})]})})]})}),(0,A.jsx)(Y.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,A.jsxs)(nQ.h,{spacing:4,children:[(0,A.jsx)(k.z,{variant:"ghost",onClick:n,children:(0,A.jsx)(O.cC,{id:"dEgA5A"})}),(0,A.jsx)(U.kH,{label:W?(0,A.jsx)(O.cC,{id:"HJo72u"}):(0,A.jsx)(O.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,A.jsx)(k.z,{variant:"solid",isDisabled:!F||W,onClick:function(){if(F){var e,t=null==E?void 0:null===(e=E.find(function(e){return e.id===F.id}))||void 0===e?void 0:e.createdTime,r=i();if(r){r.commands.setContent(F.content.default,!0);var s=F.content.annotationsAbsolute;s?r.commands.restoreAnnotations(s):r.commands.clearAnnotations(),n(),o({title:(0,A.jsx)(O.cC,{id:"7ovf4C"}),description:(0,A.jsx)(O.cC,{id:"DTim6X",values:{0:t?(0,ec.p6)(t,"PPp"):"selected snapshot",GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}}),status:"success",duration:5e3,isClosable:!0})}}},children:(0,A.jsx)(O.cC,{id:"yKu/3Y"})})})]})})]})]})})},oI=n(60697),oE=n(2885),oP=n(47557),oD=n(84520),oA=n(95085),oT=n(8097),oR=n(60831),o_=n(69943),oL=n(97968),oM=n(34302),oz=n(71193),oN=n(54336),oZ=n(20934);function oG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oG(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oW=function(e){var t=e.updateDocSetting,n=(0,C.CG)(_.US),r=n.defaultFullBleed,o=n.defaultContentWidth,i=n.presentBackdrop,s=n.cardDimensions,a=(0,oZ.l)(s);return(0,A.jsxs)(ee.K,{spacing:5,mt:4,divider:(0,A.jsx)(K.i,{}),children:[(0,A.jsx)(oU,{title:W.ag._({id:"jBvtuq"}),description:W.ag._({id:"Q3Qdcd"}),icon:oM.qn,control:(0,A.jsxs)(tT.v,{isLazy:!0,children:[(0,A.jsx)(tR.j,{minW:28,as:k.z,size:"sm",variant:"plain",leftIcon:(0,A.jsx)(S.G,{icon:a.icon,fixedWidth:!0}),rightIcon:(0,A.jsx)(S.G,{icon:oT.pt}),style:{marginLeft:"1rem"},children:a.label()}),(0,A.jsx)(t_.q,{maxW:"400px",children:(0,A.jsx)(tL._,{value:s,type:"radio",onChange:function(e){t("cardDimensions",e)},children:Object.entries(oZ.b).map(function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1],o=r.label,i=r.description;return(0,A.jsxs)(tM.i,{value:n,children:[(0,A.jsxs)(eo.x,{children:[o(),"fluid"===n&&(0,A.jsxs)(A.Fragment,{children:[" ",(0,A.jsx)(rI.C,{colorScheme:"gray",ml:1,children:(0,A.jsx)(O.cC,{id:"ovBPCi"})})]})]}),(0,A.jsx)(eo.x,{fontSize:"xs",color:"gray.500",children:i()})]},n)})})})]})}),(0,A.jsx)(oU,{title:W.ag._({id:"lklIf1"}),description:W.ag._({id:"aJ+ISV"}),icon:oL.dH,value:"lg"===o,onChange:function(e){return t("defaultContentWidth",e?"lg":void 0)}}),(0,A.jsx)(oU,{title:W.ag._({id:"lsVq2Z"}),description:W.ag._({id:"u/0NJZ"}),icon:o_.r9,value:"full"===r,onChange:function(e){return t("defaultFullBleed",e?"full":void 0)}}),(0,A.jsx)(oU,{title:W.ag._({id:"7VfbQM"}),description:W.ag._({id:"XZHPlI"}),icon:oE.UH,value:i,onChange:function(e){return t("presentBackdrop",e)}}),(0,A.jsxs)(ee.K,{children:[(0,A.jsx)(eo.x,{fontSize:"xs",color:"gray.600",children:(0,A.jsx)(O.cC,{id:"ymPKi7"})}),(0,A.jsxs)(h.U,{alignItems:"flex-start",spacing:"4",children:[(0,A.jsx)(oH,{label:W.ag._({id:"wl99H6"}),cardDimensions:a,isWide:"lg"===o,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,A.jsx)(oH,{label:W.ag._({id:"GWjDlt"}),cardDimensions:a,isWide:"lg"===o,showBackdrop:i&&"full"!==r,scaleCardUp:!i||"full"===r})]})]})]})},oU=function(e){var t=e.title,n=e.description,r=e.icon,o=e.children,i=e.helpDescription,s=e.value,a=e.onChange,c=e.control;return(0,A.jsxs)(h.U,{alignItems:"flex-start",spacing:2,children:[r&&(0,A.jsx)(eo.x,{fontSize:"lg",width:8,maxW:8,children:(0,A.jsx)(S.G,{icon:r,fixedWidth:!0})}),(0,A.jsxs)(ee.K,{spacing:4,flex:1,children:[(0,A.jsxs)(ee.K,{spacing:1,children:[(0,A.jsxs)(et.X,{size:"sm",fontWeight:"semibold",children:[t," ",i?(0,A.jsx)(U.Yq,{label:i,ml:1}):null]}),(0,A.jsx)(eo.x,{fontSize:"xs",color:"gray.600",children:n})]}),o]}),a&&(0,A.jsx)(oz.r,{isChecked:s,onChange:function(e){return a(e.target.checked)}}),c]})},oV=function(e){var t=e.hideExtraLines;return(0,A.jsxs)(ee.K,{w:"100%",py:2,px:2.5,children:[(0,A.jsx)(u.xu,{w:20,h:1.5,bg:"gray.200"}),(0,A.jsxs)(h.U,{flex:"1",alignItems:"flex-start",children:[(0,A.jsx)(oN.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,A.jsx)(u.xu,{fontSize:"lg",children:(0,A.jsx)(S.G,{icon:oR.Vm})})}),(0,A.jsxs)(ee.K,{flex:"1",spacing:"1",children:[(0,A.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,A.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,A.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,A.jsx)(u.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,A.jsx)(u.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},oH=function(e){var t=e.cardDimensions,n=e.showBackdrop,r=e.isWide,o=e.label,i=e.scaleCardUp,s={boxShadow:"".concat(n?"sm":""),w:"".concat(r?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(i?"scale(1.15)":"none")};return(0,A.jsxs)(ee.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,A.jsx)(p.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,A.jsx)(oN.o,oF(oF({},s),{},{ratio:t.aspectRatio,children:(0,A.jsx)(u.xu,{children:(0,A.jsx)(oV,{hideExtraLines:r})})})):(0,A.jsx)(ee.K,oF(oF({},s),{},{children:(0,A.jsx)(oV,{hideExtraLines:r})}))}),(0,A.jsx)(eo.x,{fontSize:"xs",color:"gray.700",children:o})]})},oq=n(41823),oB=n(34847),oK=n(50860),oY=function(e){var t=e.editor,n=(0,C.CG)(_.Pu),r=(0,C.CG)(_.XV),o=(0,v.useCallback)(function(e){null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,A.jsx)(oK.o,{editor:t,background:r,updateNestedAttributes:o,defaultMessage:(0,A.jsxs)(ei.b,{children:[(0,A.jsx)(em.z,{}),(0,A.jsx)(O.cC,{id:"dyXYfJ"})]}),isDark:(0,oq.wj)(n),isValidSource:oB.Rr})},oJ=n(47457),oX=n(25793),oQ=n(78985),o$=n(75851),o0=n(75213),o1=n(96575),o2=n(67092),o5=o$.N,o3=function(e){var t=e.updateDocSetting,n=(0,C.CG)(_.US).metaDescription,r=(0,C.CG)(_.yx),o=(0,C.CG)(oQ.cn),i=(0,C.CG)(oQ.$4),s=(0,v.useState)(function(){return(null==r?void 0:r.title)||""}),a=s[0],l=s[1],d=(0,v.useState)(function(){return n||""}),f=d[0],p=d[1],m=(0,I.D1_)(),x=(0,c.Z)(m,1)[0],g=(0,v.useCallback)(function(e){r&&x({variables:{id:r.id,title:e}})},[r,x]),j=(0,eq.Kt)(g,300),b=(0,v.useCallback)(function(e){l(e.target.value.substring(0,150)),j(e.target.value.substring(0,150))},[j]),y=(0,v.useCallback)(function(e){t("metaDescription",e)},[t]),w=(0,eq.Kt)(y,300),k=(0,C.CG)(oQ.NN),S=null==k?void 0:k.previewUrl,E=(0,el.dU)(null==r?void 0:r.organization),P=(0,o0.U)(a||o,E),D=(0,o0.V)(f||i,E);return(0,A.jsxs)(ee.K,{spacing:4,children:[(0,A.jsxs)(rz.NI,{children:[(0,A.jsxs)(h.U,{justifyContent:"center",children:[(0,A.jsx)(rN.l,{flex:"1",children:(0,A.jsx)(O.cC,{id:"MHrjPM"})}),(0,A.jsx)(o6,{length:a.length||0,idealLength:70,maxLength:150})]}),(0,A.jsx)(nm.I,{value:a,placeholder:o||W.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:function(e){"Enter"===e.key&&g(a)},onChange:b})]}),(0,A.jsxs)(rz.NI,{children:[(0,A.jsxs)(h.U,{justifyContent:"center",children:[(0,A.jsx)(rN.l,{flex:"1",children:(0,A.jsx)(O.cC,{id:"Nu4oKW"})}),(0,A.jsx)(o6,{length:f.length||0,idealLength:160,maxLength:o5})]}),(0,A.jsx)(oX.g,{bg:"white",rows:4,value:f,placeholder:i||W.ag._({id:"2VBqT4"}),onChange:function(e){p(e.target.value.substring(0,o5)),w(e.target.value.substring(0,o5))}})]}),(0,A.jsxs)(u.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,A.jsxs)(ee.K,{spacing:2,mb:4,children:[(0,A.jsx)(eo.x,{size:"sm",children:(0,A.jsx)(O.cC,{id:"h8sMnd"})}),(0,A.jsx)(o4,{title:P,description:D,screenshotUrl:S})]}),(0,A.jsxs)(ee.K,{spacing:2,children:[(0,A.jsx)(eo.x,{size:"sm",children:(0,A.jsx)(O.cC,{id:"d3xOlk"})}),(0,A.jsx)(o8,{title:P,description:D,screenshotUrl:S}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"gkahtG"})})]})]}),(0,A.jsx)(o2.V,{label:(0,A.jsx)(O.cC,{id:"SDyz5I"}),segmentEvent:o1.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:r})]})},o6=function(e){var t=e.length,n=e.idealLength,r=e.maxLength;return(0,A.jsxs)(eo.x,{fontSize:"xs",color:t>=r?"red.400":"gray.500",children:[t>=r&&(0,A.jsx)(S.G,{icon:oJ.e7})," ",t,"/",n]})},o4=function(e){var t=e.title,n=e.description,r=e.screenshotUrl;return(0,A.jsxs)(u.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,A.jsx)(oN.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,A.jsx)(u.xu,{bgColor:"gray.200",bgImage:"url(".concat(r,")"),backgroundSize:"cover",position:"relative"})}),(0,A.jsxs)(ee.K,{px:4,py:3,spacing:1,children:[(0,A.jsx)(eo.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,A.jsx)(eo.x,{fontSize:"xs",noOfLines:2,children:n})]})]})},o8=function(e){var t=e.title,n=e.description;return(0,A.jsxs)(ee.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,A.jsx)(eo.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,A.jsx)(eo.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},o7=["cards","background","preview"],o9=function(e){var t=e.editor,n=(0,nd.M)({id:"pageSetupDisclosure"}),r=n.isOpen,o=n.onClose,i=n.onOpen,a=(0,v.useState)(0),c=a[0],l=a[1];(0,v.useEffect)(function(){var e=function(e){l(o7.indexOf(e)),i()},t=nu.T.on("openPageSetup",e),n=ri.pw.on(ri.TI.OPEN_PAGE_SETUP,e);return function(){t(),n()}},[i,o]);var d=(0,r9.A)(t),f=(0,v.useCallback)(function(e,n){null==t||t.commands.updateNestedAttributesAtPos(0,{settings:(0,s.Z)({},e,n)})},[t]);return(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(r5.d,{returnFocusOnClose:!1,isOpen:r,placement:"right",onClose:o,size:"md",blockScrollOnMount:!1,children:[(0,A.jsx)(q.Z,{background:"none"}),(0,A.jsxs)(r3.s,{"data-testid":"page-setup-drawer",onKeyDown:d,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,A.jsx)(eO.o,{}),(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"fvaOtb"})}),(0,A.jsx)($.f,{overflowX:"hidden",children:(0,A.jsxs)(of.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:c,onChange:l,children:[(0,A.jsxs)(ou.t,{children:[(0,A.jsxs)(od.O,{children:[(0,A.jsx)(u.xu,{mr:2,children:(0,A.jsx)(S.G,{icon:oP.s2})}),(0,A.jsx)(O.cC,{id:"Ccpbzh"})]}),(0,A.jsxs)(od.O,{children:[(0,A.jsx)(u.xu,{mr:2,children:(0,A.jsx)(S.G,{icon:oE.UH})}),(0,A.jsx)(O.cC,{id:"GtJbUa"})]}),(0,A.jsxs)(od.O,{children:[(0,A.jsx)(u.xu,{mr:2,children:(0,A.jsx)(S.G,{icon:oI.g4})}),(0,A.jsx)(O.cC,{id:"rdUucN"})]})]}),(0,A.jsxs)(oD.n,{children:[(0,A.jsx)(oA.x,{p:2,mt:4,children:(0,A.jsx)(oW,{editor:t,updateDocSetting:f})}),(0,A.jsx)(oA.x,{p:2,mt:4,children:(0,A.jsx)(oY,{editor:t,updateDocSetting:f})}),(0,A.jsx)(oA.x,{p:2,mt:4,children:(0,A.jsx)(o3,{editor:t,updateDocSetting:f})})]})]})})]})]})})};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ir=function(e){var t,n,r=e.doc,o=e.editorWrapperEl,i=e.scrollingParentSelector,s=(0,D.SE)().user,a=(0,I.$gs)().isConnected,l=(0,or.e)(),d=(0,nN._i)().editor,f=(0,nx.$)(null==r?void 0:r.title),p=(null==r?void 0:r.createdTime)&&(0,rE.Z)((0,rP.Z)(r.createdTime),"PPP"),x=null==r?void 0:r.id,g=(0,nd.M)({id:"snapshotsDrawer"}),j=g.isOpen,y=g.onClose,w=g.onOpen,k=(0,nd.M)({id:"analyticsPanelDisclosure"}),E=k.isOpen,P=k.onClose,T=k.onOpen,R=(0,I.LT4)(),L=(0,c.Z)(R,1)[0],M=(0,I.iX9)(),z=(0,c.Z)(M,1)[0],N=(0,ef.z$)(),G=(0,D.py)("view",r)&&!!s,W=(0,D.py)("edit",r),V=(0,D.py)("manage",r)&&!!s,H=(0,b.ye)("pageSetup")&&W,q=!!(s&&0!==s.workspaceMemberships.length),B=(0,b.ye)("publishing"),K=(0,b.ye)("docFormats"),Y=(0,C.CG)(_.hN),J=(0,v.useCallback)(function(){null==N||N.track(ef.AA.DOC_ANALYTICS_VIEWED,{docId:x,source:"toolbar_doc_menu",type:"personal"}),T()},[N,x,T]),X=(0,v.useCallback)(function(e){return function(){if(x){var t={id:x};e?L({variables:t,optimisticResponse:{archiveDoc:it(it({},t),{},{archived:e,__typename:"Doc"})}}):z({variables:t,optimisticResponse:{unarchiveDoc:it(it({},t),{},{archived:e,__typename:"Doc"})}})}}},[L,x,z]),Q=(0,v.useCallback)(function(){d&&d.commands.undo()},[d]),$=(0,nd.M)({id:"codeEditor"}),ee=$.isOpen,et=$.onOpen,en=$.onClose,er=(0,b.ye)("docCustomCode")&&W;return(0,A.jsxs)(tT.v,{children:[(0,A.jsx)(tR.j,{as:np.r,borderRadius:"md",isDisabled:j,icon:(0,A.jsx)(S.G,{icon:ny.cN}),onMouseDown:nf.br,"data-testid":"doc-toolbar-menu-button"}),(0,A.jsx)(rt.h,{children:r&&(0,A.jsxs)(t_.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[(0,A.jsxs)(u.xu,{px:4,py:2,children:[(0,A.jsx)(eo.x,{noOfLines:6,children:f}),(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,A.jsx)(O.cC,{id:"jlWdji",values:{createdTime:p}})}),(0,A.jsx)(U.kH,{label:null==r?void 0:null===(t=r.createdBy)||void 0===t?void 0:t.email,children:(0,A.jsx)(eo.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,A.jsx)(O.cC,{id:"t490IT",values:{0:null==r?void 0:null===(n=r.createdBy)||void 0===n?void 0:n.displayName}})})}),K&&(0,A.jsx)(on,{})]}),(0,A.jsx)(n1.R,{}),(0,A.jsx)(rD.V,{label:(0,A.jsx)(O.cC,{id:"IdcoRx"}),isConnected:a,maxWidth:"300px"}),a&&(0,A.jsxs)(A.Fragment,{children:[!!s&&!V&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:F.M,fixedWidth:!0}),onClick:J,children:(0,A.jsx)(O.cC,{id:"ZlwDi6"})}),B&&V&&(0,A.jsx)(r2,{doc:r}),(0,A.jsx)(oc,{editorWrapperEl:o,scrollingParentSelector:i}),q&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rk.kZ,fixedWidth:!0}),onClick:function(){d&&l({docId:x,initialContent:d.getJSON(),source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,Z.Q5)()})},children:(0,A.jsx)(O.cC,{id:"euc6Ns"})}),G&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rO.kw,fixedWidth:!0}),onClick:function(){nu.T.emit("openSharePanel","export")},children:(0,A.jsx)(O.cC,{id:"U8WPSi"})}),H&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rw.gr,fixedWidth:!0}),onClick:function(){nu.T.emit("openPageSetup","cards")},children:(0,A.jsxs)(h.U,{children:[(0,A.jsx)(O.cC,{id:"Kx2GmY"}),(0,A.jsx)(m.L,{}),(0,A.jsx)(rI.C,{colorScheme:"green",ml:2,children:(0,A.jsx)(O.cC,{id:"isRobC"})})]})}),er&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rC.dT,fixedWidth:!0}),onClick:et,children:(0,A.jsxs)(h.U,{children:[(0,A.jsx)(O.cC,{id:"cnlGIm"}),(0,A.jsx)(m.L,{}),(0,A.jsx)(rI.C,{colorScheme:"green",ml:2,children:(0,A.jsx)(O.cC,{id:"YBt9YP"})})]})}),Y&&(0,A.jsx)(n1.R,{}),Y&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:ry.faArrowRotateLeft,fixedWidth:!0}),onClick:Q,command:(0,U.cE)("Mod+Z"),children:(0,A.jsx)(O.cC,{id:"9uI/rE"})}),W&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:eD.SZ,fixedWidth:!0}),onClick:w,children:(0,A.jsx)(O.cC,{id:"6Z5x06"})}),V&&(0,A.jsx)(n1.R,{}),V?r.archived?(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rb.Ze,fixedWidth:!0}),onClick:X(!1),children:(0,A.jsx)(O.cC,{id:"yKu/3Y"})}):(0,A.jsx)(rS.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,A.jsx)(S.G,{icon:rj.$,fixedWidth:!0}),onClick:X(!0),children:(0,A.jsx)(O.cC,{id:"1C/Yjq"})}):null]})]})}),r&&(0,A.jsx)(oS,{doc:r,isOpen:j,onClose:y}),r&&E&&(0,A.jsx)(nl,{doc:r,isAnalyticsPanelOpen:E,onAnalyticsPanelClose:P,mode:"personal"}),er&&(0,A.jsx)(oe,{editor:d,isOpen:ee,onClose:en}),H&&(0,A.jsx)(o9,{editor:d})]})},io=n(22595),ii=n(26886),is=n(71528),ia=n(26384),ic=n(91930),il=n(7328),id=n(84807),iu=n(28165),ip=n(35931),ih={followOnStart:"follow_on_start",followingId:"following_id"},im=function(e,t){var n=t.followOnStart,r=t.followingId,o=new URL(e);return r&&o.searchParams.append(ih.followingId,r),n&&o.searchParams.append(ih.followOnStart,"true"),o.toString()},ix=function(e){switch(e){case"edit":return W.ag._({id:"UZN1cZ"});case"comment":return W.ag._({id:"jFTs0A"});case"view":return W.ag._({id:"Ya6CJ0"});default:return W.ag._({id:"Txd1qM"})}},ig=function(e){var t,n,r=e.isOpen,o=e.onClose,s=e.accessLinkUrl,a=e.onPlayClick,c=(0,D.SE)().user,l=(0,nM.useRouter)().replace,d={followOnStart:!0,followingId:null==c?void 0:c.id},f=(0,v.useState)(d),p=f[0];f[1];var m=im(s,p),x=(0,D.SE)(),g=x.user,j=x.color,b=(0,C.CG)(z.yx),y=null==b?void 0:null===(t=b.accessLinks)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.permission,w=(0,iu.keyframes)(i||(i=(0,il.Z)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "])));return(0,A.jsx)(U.Wk,{isDark:!1,children:(0,A.jsxs)(H.u_,{isOpen:r,onClose:o,size:"lg",children:[(0,A.jsx)(q.Z,{}),(0,A.jsxs)(B.h,{children:[(0,A.jsx)(eC.x,{children:(0,A.jsx)(O.cC,{id:"88XnIQ"})}),(0,A.jsx)(eO.o,{}),(0,A.jsx)(K.i,{}),(0,A.jsx)($.f,{pt:"6",children:(0,A.jsxs)(ee.K,{spacing:"4",children:[(0,A.jsx)(eo.x,{children:(0,A.jsx)(O.cC,{id:"oYTLJe",values:{0:ix(y),GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc},components:{0:(0,A.jsx)(eo.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,A.jsx)(U.kH,{label:W.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,A.jsx)(u.xu,{mb:"2",children:(0,A.jsx)(ip.I,{url:m,variant:"solid"})}),(0,A.jsxs)(ei.b,{children:[(0,A.jsx)(em.z,{}),(0,A.jsxs)(h.U,{flexBasis:"100%",alignItems:"top",children:[(0,A.jsx)(eo.x,{fontSize:"sm",width:"100%",children:(0,A.jsx)(O.cC,{id:"EApNIe"})}),(0,A.jsxs)(u.xu,{position:"relative",textShadow:"sm",children:[(0,A.jsx)(td.q,{animation:"".concat(w," 2s infinite ease-out"),name:null==g?void 0:g.displayName,src:null==g?void 0:g.profileImageUrl,size:"md",border:"solid 3px ".concat(j.value),shadow:"lg"}),(0,A.jsx)(u.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,A.jsx)(S.G,{icon:id.q,fixedWidth:!0})})]})]})]})]})}),(0,A.jsx)(Y.m,{children:(0,A.jsxs)(nQ.h,{children:[(0,A.jsx)(k.z,{variant:"ghost",colorScheme:"gray",onClick:function(){o()},children:(0,A.jsx)(O.cC,{id:"DPfwMq"})}),(0,A.jsx)(k.z,{variant:"solid",onClick:function(){o(),a(),l(m,m,{shallow:!0})},leftIcon:(0,A.jsx)(S.G,{icon:oi.zc}),children:(0,A.jsx)(O.cC,{id:"tbDuNX"})})]})})]})]})})},iv=function(e){var t,n,r,o,i=e.doc,s=e.isStaticEditor,a=e.editorWrapperEl,c=e.scrollingParentSelector,l=(0,nd.M)({id:"meetModal"}),d=l.onOpen,f=l.onClose,h=l.isOpen,m=(0,oa.M)({editorWrapperEl:a,scrollingParentSelector:c}),x=m.enterSlideView,g=m.exitSlideView,j=m.setExitedFullscreenByClick,y=m.isFullscreen,w=m.enterFullscreen,k=m.exitFullscreen,I=(0,D.SE)().user,E=(0,C.CG)(_.gh),P=(0,v.useRef)(E);(0,v.useEffect)(function(){P.current=E},[E]);var T=os()[E],R=T.shortcutLabel,L=T.shortcutIcon,M=T.shortcutKeys,z=T.buttonLabel,N=null==i?void 0:null===(t=i.accessLinks)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.url,Z=!!(null==i?void 0:null===(r=i.accessLinks)||void 0===r?void 0:null===(o=r[0])||void 0===o?void 0:o.permission),G=(0,D.py)("manage",i||void 0),F=(0,b.ye)("presentFullScreen"),V="present"===(0,C.CG)(_.e_).primaryAction?"solid":"plain";return(0,A.jsxs)(p.k,{children:[(0,A.jsxs)(nQ.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":E===ro.q.SLIDE_VIEW?"slide":"doc",children:[(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:R,shortcut:M,children:(0,A.jsx)(np.h,{fontWeight:"normal",size:"sm",variant:V,onClick:function(){E===ro.q.SLIDE_VIEW?g():x({fullscreen:F})},onMouseDown:nf.br,icon:(0,A.jsx)(S.G,{icon:L}),"data-present-button":!0,children:z})}),(0,A.jsxs)(tT.v,{children:[(0,A.jsx)(tR.j,{variant:V,as:np.r,icon:(0,A.jsx)(S.G,{icon:tA.pt})}),(0,A.jsx)(rt.h,{children:(0,A.jsxs)(t_.q,{zIndex:"popover",children:[E===ro.q.DOC_VIEW&&(0,A.jsxs)(ic.k,{title:W.ag._({id:"9vUn+H"}),children:[(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:rY.Rk,fixedWidth:!0}),command:(0,U.cE)("Mod+Enter"),onClick:function(){return x({fullscreen:!1})},children:(0,A.jsx)(O.cC,{id:"LRFe2O"})}),(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:ia.tc,fixedWidth:!0}),command:(0,U.cE)("Mod+Shift+Enter"),onClick:function(){return x({fullscreen:!0})},children:(0,A.jsx)(O.cC,{id:"OwIqiD"})})]}),E===ro.q.SLIDE_VIEW&&(0,A.jsx)(rS.s,{icon:(0,A.jsx)(S.G,{icon:oo.Bg,fixedWidth:!0}),command:"ESC",onClick:g,children:(0,A.jsx)(O.cC,{id:"5Rfo7J"})}),!s&&I&&G&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n1.R,{}),(0,A.jsx)(U.kH,{isDisabled:Z,label:(0,A.jsx)(O.cC,{id:"zk6wKo"}),children:(0,A.jsx)(u.xu,{children:(0,A.jsx)(rS.s,{onClick:function(){var e;null!=i&&null!==(e=i.accessLinks)&&void 0!==e&&e[0].permission&&d()},isDisabled:!Z,icon:(0,A.jsx)(S.G,{icon:is.AS,fixedWidth:!0}),children:(0,A.jsx)(ee.K,{spacing:"0",children:(0,A.jsx)(O.cC,{id:"z7gRub",components:{0:(0,A.jsx)(eo.x,{}),1:(0,A.jsx)(eo.x,{fontSize:"sm",color:"gray.600"})}})})})})})]}),!s&&I&&N&&(0,A.jsx)(ig,{isOpen:h,onClose:f,accessLinkUrl:N,onPlayClick:function(){x({fullscreen:!1})}})]})})]})]}),E===ro.q.SLIDE_VIEW&&(0,A.jsx)(p.k,{ml:E===ro.q.SLIDE_VIEW?2:0,children:(0,A.jsx)(U.kH,{label:y?"Exit full screen":"Enter full screen",children:(0,A.jsx)(np.r,{"aria-label":y?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,A.jsx)(S.G,{icon:y?ii.Qj:io.TL}),onClick:y?function(){j(!0),k()}:w})})})]})},ij=n(8763),ib=n(66264),iy=n(5430),iC=n(59974),iw=function(e){var t,n,r=e.doc,o=(0,nd.M)({id:"titleModalDisclosure"}),i=o.isOpen,s=o.onOpen,a=o.onClose,c=(0,nd.M)({id:"analyticsModalDisclosure"}),l=c.isOpen,d=c.onClose,f=c.onOpen,h=(0,ib.y)(),m=h.isSharePanelOpen,x=h.onSharePanelOpen,g=h.onSharePanelClose,j=h.view,b=h.setView;(0,v.useEffect)(function(){return nu.T.on("openSharePanel",function(e){x(),b(e)})},[x,b]);var y=(0,D.SE)(),C=y.user,w=y.currentWorkspace,k=(0,nN._i)().editor,S=(0,D.py)("view",r),I=(0,D.py)("edit",r),E=(0,D.py)("manage",r),P=(0,ef.z$)(),T=(0,v.useCallback)(function(){null==P||P.track(ef.AA.DOC_ANALYTICS_VIEWED,{docId:null==r?void 0:r.id,source:"share_panel",type:E?"full":"personal"}),f()},[P,E,null==r?void 0:r.id,f]);if(!S||!C||!r)return null;var R=r.collaborators||[],_=r.channels||[],L=(0,iC.Hs)((0,J.Z)(R).sort(function(e,t){return e.user.id===C.id?-1:t.user.id===C.id?1:0}).map(function(e){return e.user.id===C.id?"You":e.user.displayName||""}).concat(r.orgAccess?_.map(function(e){return e.name||""}):[])),M=(0,iy.h_)(r,C),z=M?(0,iy.Xp)()[M]:null,N=(0,iy.Gi)(r,w);return null===z?(console.error("[SharePanel] Unknown VisibilityValue for doc",r),null):(0,A.jsxs)(p.k,{children:[(0,A.jsx)(U.kH,{label:(0,A.jsxs)(A.Fragment,{children:[N&&(0,A.jsx)(eo.x,{fontWeight:"bold",children:(0,A.jsx)(O.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:tx.Yc}})}),z.title(null==r?void 0:null===(t=r.organization)||void 0===t?void 0:t.name)?(0,A.jsx)(eo.x,{children:z.title(null==r?void 0:null===(n=r.organization)||void 0===n?void 0:n.name)}):null,(0,A.jsx)(eo.x,{fontSize:"xs",children:z.subtitle?z.subtitle(L||""):""})]}),children:(0,A.jsx)("span",{children:(0,A.jsx)(np.h,{"data-guider-highlight":"share-button",onMouseDown:nf.br,icon:(0,A.jsx)(u.xu,{children:(0,A.jsx)(ij.aA,{visibility:z,isFromOtherOrg:N})}),isDisabled:!I,onClick:function(){r.title&&""!==r.title?x():s()},children:(0,A.jsx)(O.cC,{id:"Z8lGw6"})})})}),i&&(0,A.jsx)(ng,{onClose:a,isOpen:i,onSaveSuccess:function(){a(),x()},docId:null==r?void 0:r.id}),(0,A.jsx)(ij.WQ,{doc:r,editor:k,isSharePanelOpen:m,onSharePanelOpen:x,onSharePanelClose:g,onAnalyticsPanelOpen:T,view:j,setView:b}),l&&(0,A.jsx)(nl,{doc:r,onSharePanelOpen:x,onAnalyticsPanelClose:d,isAnalyticsPanelOpen:l,mode:E?"full":"personal"})]})},iO=n(38621),ik=function(e){var t=e.spotlightingByBlock,n=(0,L._i)().editor,r=(0,v.useCallback)(function(){t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,A.jsx)(p.k,{children:(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,A.jsxs)(eo.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,A.jsx)(eo.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,A.jsx)(np.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:function(e){r(),e.target.blur()},icon:(0,A.jsx)(S.G,{icon:iO.QM}),children:"Spotlight"})})})},iS=n(18504),iI=n(94467),iE=n(57560),iP=n(7752),iD=n(76162),iA=(0,v.memo)(function(){var e,t=(0,nh.p)(),n=(0,I.$gs)().isConnected,r=(0,nN._i)(),o=r.docId,i=r.getCollaborativeEditorInstance,s=(0,nd.M)({id:"themeEditor"}),a=s.isOpen,l=s.onOpen,d=s.onClose,f=(0,nd.M)({id:"themeStyleDrawer"}),h=f.isOpen,m=f.onOpen,x=f.onClose,g=null===(e=i())||void 0===e?void 0:e.state.doc.toJSON(),j=(0,C.CG)(_.Pu),b=(0,iP.g)(),y=(0,c.Z)(b,2),w=y[0],k=y[1],E=(0,v.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?t?k({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:e}}):k({type:"SET_THEME_EDITING",data:{theme:e}}):k({type:"NEW_BLANK_THEME"}),l()},[k,l]),P=i();(0,iE.bb)(P,E);var D=(0,ef.z$)(),T=(0,iE.vi)({docId:o,editor:P}).updateDocThemeWithAccentImages,R=(0,v.useCallback)(function(e){e.id!==j.id&&T(e.id).then(function(){null==D||D.track(ef.AA.DOC_THEME_UPDATED,{doc_id:o,theme_id:e.id})}).catch(function(e){console.error(e),t({title:(0,A.jsx)(O.cC,{id:"Fulf8b",values:{0:e.message}}),position:"top",status:"error"})})},[D,j.id,o,t,T]);return(0,v.useEffect)(function(){var e=nu.T.on("toggleThemeBlock",m),t=ri.pw.on(ri.TI.OPEN_THEME_DRAWER,m);return function(){e(),t()}},[m]),(0,A.jsxs)(p.k,{children:[(0,A.jsx)(U.kH,{label:n?(0,A.jsx)(O.cC,{id:"JkEyR8"}):(0,A.jsx)(O.cC,{id:"GvC+mL",components:{0:(0,A.jsx)(eo.x,{}),1:(0,A.jsx)(eo.x,{color:"gray.300"})}}),"aria-label":W.ag._({id:"JkEyR8"}),children:(0,A.jsx)(u.xu,{children:(0,A.jsx)(np.h,{"data-guider-highlight":"toolbar-theme-button",onClick:m,isDisabled:!n,icon:(0,A.jsx)(S.G,{icon:iS.q2}),"data-testid":"toolbar-theme-button",children:(0,A.jsx)(O.cC,{id:"FEr96N"})})})}),(0,A.jsx)(iD.G,{isOpen:h&&!a,onClose:x,openThemeEditor:E,setDocTheme:R}),(0,A.jsx)(iI.z,{isOpen:a,onClose:d,state:w,dispatch:k,docContent:g,onThemeCreated:R,disableDrawerTransition:!0})]})});iA.displayName="ThemeBlock";var iT=n(49626),iR=n(31997),i_=n(74588),iL=n(87202),iM=n(31358),iz=n(63522),iN=n(20325),iZ=n(78871),iG=n(53571),iF=n(75393),iW=[.5,.8,.9,1,1.1,1.2,1.5,2],iU=function(e){return"".concat((100*e).toFixed(0),"%")},iV=function(){var e=(0,b.ye)("presentZoom"),t=(0,nN._i)().editor,n=(0,ef.z$)(),r=(0,n5.I0)(),o=(0,C.CG)(_.SU),i=(0,v.useCallback)(function(e){r((0,_.Ic)({zoomLevel:e})),r((0,_.fT)({enabled:!1})),null==n||n.track(ef.AA.DOC_ZOOMED,{direction:"set",level:e})},[r,n]),s=(0,v.useCallback)(function(){r((0,_.fT)({enabled:!0}))},[r]),a=(0,v.useCallback)(function(){var e=Math.min(iN.v4,o+.1);r((0,_.Ic)({zoomLevel:e})),r((0,_.fT)({enabled:!1})),null==n||n.track(ef.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,n,o]),c=(0,v.useCallback)(function(){var e=Math.max(iN.Ou,o-.1);r((0,_.Ic)({zoomLevel:e})),r((0,_.fT)({enabled:!1})),null==n||n.track(ef.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,n,o]),l=(0,v.useCallback)(function(){var e=iN.aX;r((0,_.Ic)({zoomLevel:e})),r((0,_.fT)({enabled:!1})),null==n||n.track(ef.AA.DOC_ZOOMED,{direction:"reset",level:e})},[r,n]),d=(0,C.CG)(iz.C),u=(0,iF.rJ)();return((0,v.useEffect)(function(){if(e)return iM.F7.on("keydown","PRESENT_BLOCK",function(e){return!(d||!t||(0,iZ.KB)(t)||(0,iG.Hx)(e.target))&&((0,iL.ZP)("=")(e)?(a(),e.preventDefault(),!0):(0,iL.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,iL.ZP)("0")(e)?(l(),e.preventDefault(),!0):!!(0,iL.ZP)("9")(e)&&(s(),e.preventDefault(),!0))})},[d,e,t,a,c,l,s]),e)?(0,A.jsxs)(nQ.h,{spacing:"0",size:"sm",variant:"plain",isAttached:!0,children:[(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:W.ag._({id:"FjkaiT"}),children:(0,A.jsx)(eF.h,{"aria-label":W.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,A.jsx)(S.G,{icon:iR.Kl})})}),(0,A.jsxs)(tT.v,{closeOnSelect:!0,children:[(0,A.jsx)(U.kH,{label:W.ag._({id:"VZ3UQG"}),children:(0,A.jsx)(tR.j,{minW:20,as:k.z,variant:"plain",size:"sm",rightIcon:(0,A.jsx)(S.G,{icon:i_.eW}),children:u?(0,A.jsx)(O.cC,{id:"R9Khdg"}):iU(o)})}),(0,A.jsxs)(t_.q,{maxW:"220px",children:[(0,A.jsx)(tL._,{value:u?"auto":o.toString(),type:"radio",children:(0,A.jsx)(tM.i,{value:"auto",onClick:s,children:(0,A.jsxs)(h.U,{children:[(0,A.jsxs)(eo.x,{children:[(0,A.jsx)(O.cC,{id:"R9Khdg"})," ",(0,A.jsx)(eo.x,{as:"span",color:"gray.500",children:(0,A.jsx)(O.cC,{id:"P9Cyl9"})})]}),(0,A.jsx)(m.L,{}),(0,A.jsx)(eo.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,A.jsx)(n1.R,{}),(0,A.jsx)(tL._,{value:u?"auto":o.toString(),type:"radio",children:iW.map(function(e){return(0,A.jsx)(tM.i,{value:(e/100).toString(),onClick:function(){i(e)},children:(0,A.jsxs)(h.U,{children:[(0,A.jsx)(eo.x,{children:iU(e)}),(0,A.jsx)(m.L,{}),e===iN.aX&&(0,A.jsx)(eo.x,{as:"span",opacity:"0.6",children:"0"})]})},e)})})]})]}),(0,A.jsx)(U.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:W.ag._({id:"AWOSPo"}),children:(0,A.jsx)(eF.h,{fontWeight:"normal","aria-label":W.ag._({id:"AWOSPo"}),onClick:a,icon:(0,A.jsx)(S.G,{icon:iT.r8})})})]}):null},iH=(0,x.E)(u.xu),iq=(0,v.memo)(function(e){var t,r,o=e.scrollingParentSelector,i=e.toggleCommentsPanel,l=e.isCommentsPanelOpen,u=e.editorWrapperEl,x=e.docEditorType,w=(0,f.a)(["(max-width: 840px)","(min-width: 841px)"]),O=(0,c.Z)(w,1)[0],k=(0,N.i)({base:!0,lg:!1}),S=(0,G.LQ)(window.location.href),I=(0,C.CG)(_.gh),E=(0,C.CG)(z.yx),P=(0,L._i)().editor,F=(0,D.py)("comment",E),W=(0,R.g)(P).enabled,U=(0,C.CG)(_.WI),V=(0,C.CG)(_.yn),H=U&&V,q="SLIDE_VIEW"!==I,B=(0,C.CG)(_.hN),K=x!==M.Z.COLLABORATIVE,Y=x===M.Z.PUBLIC_STATIC,J=(0,C.CG)(_.Tf),X=(0,b.ye)("aiChat");(0,b.ye)("pptExport")&&(window.exportToPptx=(t=(0,a.Z)(d().mark(function e(t){var r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(9775),n.e(5743),n.e(9068)]).then(n.bind(n,54087));case 4:return r=e.sent.exportToPptx,e.abrupt("return",r(P,t));case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}));var Q=(0,y.z)((0,v.useCallback)(function(e){var t=$.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]'))||e.clientY<100)},[]),!J),$=(0,v.useRef)(null),ee=!J||J&&Q,et=!!(null==E?void 0:E.publishedSnapshotId),en=!(0,Z.s2)()&&!O&&!S;return(0,A.jsxs)(p.k,{"data-editor-toolbar":!0,ref:$,bg:"linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.1) 100%)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"center",pr:6,marginTop:ee?0:"-100%",pointerEvents:"none",sx:(r={},(0,s.Z)(r,"&:focus-within",{marginTop:0}),(0,s.Z)(r,"> *",{pointerEvents:"auto"}),(0,s.Z)(r,"> #toolbar-spacer",{pointerEvents:"none"}),r),transitionProperty:"margin-top",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,A.jsx)(g.M,{initial:!1,children:H&&(0,A.jsx)(iH,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(null==U?void 0:U.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})}),!Y&&(0,A.jsx)(h.U,{children:(0,A.jsx)(nV,{doc:E})}),(0,A.jsx)(m.L,{pointerEvents:"none",id:"toolbar-spacer"}),(0,A.jsxs)(h.U,{children:[!O&&(0,A.jsx)(n6,{}),!O&&!q&&(0,A.jsx)(iV,{}),!O&&!q&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(ik,{spotlightingByBlock:W})}),!O&&!K&&B&&(0,A.jsx)(iA,{}),!O&&!K&&(0,A.jsx)(iw,{doc:E}),en&&!et&&(0,A.jsx)(iv,{doc:E,isStaticEditor:K,editorWrapperEl:u,scrollingParentSelector:o}),en&&et&&(0,A.jsx)(T,{doc:E}),!K&&F&&(0,A.jsx)(rm,{doc:E,mode:I,isCommentsPanelOpen:l,toggleCommentsPanel:i}),!O&&k&&!K&&B&&X&&(0,A.jsx)(rv,{}),!O&&!K&&(0,A.jsx)(nv,{doc:E}),!O&&!K&&(0,A.jsx)(ir,{doc:E,editorWrapperEl:u,scrollingParentSelector:o}),!Y&&(0,A.jsx)(p.k,{children:(0,A.jsx)(j.DY,{showRing:!0})})]})]})})},69895:function(e,t,n){n.d(t,{OM:function(){return O},Zd:function(){return w},rU:function(){return k}});var r=n(55452),o=n(55479),i=n(11919),s=n(12221),a=n(91012),c=n(54073),l=n.n(c),d=n(18149),u=n.n(d),f=n(2784),p=n(98621),h=n.n(p),m=n(88164),x=n(36157),g=n(90090),v=n(17349),j=n(78871),b=n(77869),y=n(53571),C=n(52322),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,x.TL)(),r=(0,g.As)("editor"),o=(0,m.nO)(),i=(0,x.CG)(v.yn,u()),s=(0,x.CG)(v.k8,u()),a=!!(null==s?void 0:s.pos);(0,f.useEffect)(function(){if(e){var t=l()(function(){i&&n((0,v.Qx)({attached:!1}))},500,{leading:!0}),r=(0,y.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),function(){r(),t.cancel(),document.removeEventListener("wheel",t,!0)}}},[e,n,i,a,t]);var c=(0,x.CG)(v.ks,u());(0,f.useEffect)(function(){if(e&&!c){var t=l()(function(){if(!r.inProgress){var t=(0,j.lI)(e,100,o);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,v.Us)(t))}},250,{trailing:!0,maxWait:500}),i=l()(function(){if(!(e.state.selection instanceof b.c)){var t=document.querySelector(r.scrollSelector||""),o=null==t?void 0:t.getBoundingClientRect(),i=e.state.selection.from,s=(0,j.Sh)(e,i);if(!t||!o||!s){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:s});return}var a=s.getBoundingClientRect(),c=parseFloat(((e.view.coordsAtPos(i).top-a.y)/a.height).toFixed(2));n((0,v.Us)({pos:i,pct:c}))}},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",i),window.addEventListener("scroll",t,!0),function(){e.off("selectionUpdate",i),window.removeEventListener("scroll",t,!0)}}},[e,n,r,c,o])},O=function(){var e=(0,o.p)(),t=(0,x.TL)();return(0,f.useCallback)(function(n){var o=n.collaborator,c=n.localIsFollowing,l=n.localIsAttached,d={attached:!0};c?l?d.following=null:e.closeAll():(d.following=o.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,C.jsxs)(i.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,C.jsx)(s.q,{size:"sm",src:o.profileImageUrl,border:"solid 2px ".concat(o.color),color:h()(o.color).isDark()?"white":"black",bg:o.color}),(0,C.jsx)(a.x,{ml:2,children:(0,C.jsx)(r.cC,{id:"lULvWe",values:{0:o.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(o.name,". Setting following to ").concat(d)),t((0,v.Qx)(d))},[e,t])},k=function(e){var t=e.editor,n=e.collaborators,r=e.user,o=(0,f.useRef)(!1),i=O(),s=new URLSearchParams(window.location.search),a=s.get("following_id"),c=s.get("follow_on_start");(0,f.useEffect)(function(){if(!o.current&&c&&(null==r?void 0:r.id)!==a&&t){var e=n.find(function(e){return e.id===a});e&&(i({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),o.current=!0)}},[a,c,t,n,r,i])}},25015:function(e,t,n){n.d(t,{J:function(){return y},P:function(){return b}});var r=n(55452),o=n(55479),i=n(87202),s=n(2784),a=n(36157),c=n(90090),l=n(26658),d=n(37057),u=n(49950),f=n(96636),p=n(17349),h=n(78871),m=n(35710),x=n(53571),g=n(52322),v=(0,i.ZP)("mod+S"),j=(0,i.ZP)("mod+shift+O"),b=function(){var e=(0,o.p)();(0,s.useEffect)(function(){var t=function(t){v(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,g.jsx)(r.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,x.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),function(){null==n||n(),window.removeEventListener("keydown",t)}},[e])},y=function(){var e=(0,a.qr)(),t=(0,a.TL)(),n=(0,m._i)().editor;(0,s.useEffect)(function(){if(n){var r=function(r){if(j(r)){r.preventDefault();var o=e.getState(),i=o.TipTap,s=i.cardIdMap,a=i.cardIds,c=i.memoState.expandedCards,d=(0,p.i2)(o),u=a.reduce(function(e,t){var n=!0===c[t],r=s.parents[t]||[],o=r.length>0,i=!d||r.includes(d);return o&&i&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]}),f=u.total,h=u.expanded,m=u.cardIds;t((0,p.bj)({disable:!0})),setTimeout(function(){t((0,p.bj)({disable:!1}))},100);var x=f===h;C(n,100,!x),(0,l.Nn)(m,x)}};return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}},[t,e,n])},C=function(e,t,n){for(var r=(0,c.cC)("editor"),o=void 0,i=200;i>0;i-=25){var s,a=(0,h.Je)(e,r.scrollSelector,i);if(null!==(s=a.pos)&&void 0!==s&&s.pos){var l=void 0;e.state.doc.nodeAt(a.pos.pos)?l=a.pos.pos:e.state.doc.nodeAt(a.pos.inside)&&(l=a.pos.inside),l&&(!o||l>o)&&(o=l)}}if(!o){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}var d=w(e,o,n);if(!d){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,x.wO)({element:d,requiredCookie:"cardCollapseDebug=true"});var u=+new Date,f=r.scroller.scrollTop,p=(0,x.LY)(d,r.scrollSelector),m=f-p,g=m<0?0:Math.max(m+200,0);!function e(){if(d){var n=(0,x.LY)(d,r.scrollSelector);r.scroller.scroll({top:f+(n-p-g)}),+new Date-u<t&&requestAnimationFrame(e)}}()},w=function(e,t,n){var r,o=e.state.doc.resolve(t),i=e.state.doc.nodeAt(t),s=(0,h.Sh)(e,t);if(!i){console.warn("[getElementToPin] nodeAt null for $pos",o);return}var a=(0,h.nv)(o,function(){return!0}).reverse();for(a.push({start:o.start(o.depth+1),pos:t,depth:o.depth,node:i});a.length;){var c=a.shift();if(c){var l=(0,d.KH)(c.node),p=(0,u.SA)(c.node),m=(0,f.CU)(c.node),x=l||c.node.isAtom?c.pos:c.start;if(s=(0,h.Sh)(e,x),!n&&l&&c.depth>2||p||m)break}}for(;(null===(r=s)||void 0===r?void 0:r.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s}},51587:function(e,t,n){n.d(t,{j:function(){return h}});var r=n(5632),o=n(2784),i=n(56969),s=n(36157),a=n(86482),c=n(12452),l=n(17349),d=n(70173),u=n(21875),f=n(34972),p=n(60883),h=function(){var e=(0,f._i)().editor,t=(0,r.useRouter)(),n=(0,s.qr)();(0,o.useEffect)(function(){if(e){t.beforePopState(function(e){return!e.as.startsWith("/docs/")});var r=i.fI.on("changed",function(t){var r,o=(0,p.sY)(t.url).cardId,i=n.getState(),s=(0,l.gh)(i);if(console.debug("[useHandleCardHash][handleURLChange]",{payload:t,cardId:o}),s===d.q.DOC_VIEW&&null!==(r=t.state)&&void 0!==r&&r.fromPos&&"pop"===t.method){var u=t.state,f=u.fromPos,h=u.fromPct;e.chain().scrollToPositionInCard(f,h||void 0).command(function(e){var t=e.tr;return(0,c.B0)(f)(t),!0}).run()}else{var m=(0,l.xb)(i)[0];(0,a.YS)({cardId:o||m,editor:e})}});return function(){t.beforePopState(function(){return!0}),r()}}},[e,t,n]),(0,o.useEffect)(function(){if(e){var t=(0,p.sY)(window.location.href).cardId;t&&(0,u.D)({cardId:t,method:"replace"})}},[e])}},27486:function(e,t,n){n.d(t,{M:function(){return w}});var r=n(16019),o=n(87202),i=n(2784),s=n(25232),a=n(31358),c=n(63522),l=n(69539),d=n(36157),u=n(36188),f=n(26658),p=n(68093),h=n(17349),m=n(70173),x=n(77869),g=n(34972),v=(0,o.ZP)("mod+Enter"),j=(0,o.ZP)("Esc"),b=(0,o.ZP)("mod+Esc"),y=(0,o.ZP)("shift+mod+Enter"),C=function(e,t){var n=document.querySelector(t);if(n){var r=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(r.width/2,100),100)}},w=function(e){var t=e.editorWrapperEl,n=e.scrollingParentSelector,o=(0,d.TL)(),w=(0,i.useState)(!1),O=w[0],k=w[1],S=(0,i.useState)(!1),I=S[0],E=S[1],P=(0,g._i)().editor,D=(0,d.CG)(h.gh),A=(0,i.useRef)(D);(0,i.useEffect)(function(){A.current=D},[D]);var T=(0,d.CG)(h.yq),R=(0,d.CG)(h.JA),_=(0,d.CG)(c.C),L=(0,u.z$)(),M=(0,i.useCallback)(function(e){P&&!P.isDestroyed&&(e===m.q.SLIDE_VIEW?((0,f.E0)(P.state.doc,o),(0,p.U6)(P,!1),P.commands.spotlightCurrentCard()):(P.commands.turnOffSpotlight(!0),C(P,n)),o(function(t){t((0,h.Qx)({attached:!1})),t((0,h.PM)({mode:e}))}))},[o,P,n]),z=(0,i.useCallback)(function(){try{var e,t,n,r;if(null!==(e=document.body)&&void 0!==e&&e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}null!==(t=document.body)&&void 0!==t&&t.webkitRequestFullscreen&&(null===(r=document.body)||void 0===r||r.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),N=(0,i.useCallback)(function(){try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),Z=(0,s.ye)("realUserMetrics"),G=(0,l.wK)(Z),F=G.recordExitSlideModePerformance,W=G.recordEnterSlideModePerformance,U=(0,i.useCallback)(function(e){var t=e.fullscreen,n=void 0!==t&&t;A.current!==m.q.SLIDE_VIEW&&(M(m.q.SLIDE_VIEW),n&&z(),null==L||L.trackDocEvent(u.AA.PRESENT_MODE_ENTERED),W({isFullscreen:n}),setTimeout(function(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[M,W,z,A,L]),V=(0,i.useCallback)(function(){A.current!==m.q.DOC_VIEW&&(M(m.q.DOC_VIEW),O&&N(),null==L||L.trackDocEvent(u.AA.PRESENT_MODE_EXITED),F({isFullscreen:O}))},[M,O,N,F,A,L]);return(0,i.useEffect)(function(){var e=function(){null!==document.fullscreenElement||I||V(),null!==document.webkitCurrentFullScreenElement||I||V(),k(function(e){return!e}),E(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[I,V,N]),(0,r.r)(function(){P&&!P.isDestroyed&&D===m.q.DOC_VIEW&&requestAnimationFrame(function(){var e=P.state.selection;e instanceof x.c&&P.commands.command(function(t){return t.tr.setSelection(e.createSelectionNear()),!0})})},[P,D]),(0,i.useEffect)(function(){return a.F7.on("keydown","PRESENT_BLOCK",function(e){var t,n,r,o=A.current===m.q.SLIDE_VIEW;if(!_){if(v(e)){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),U({fullscreen:!1}),!0}if(y(e)){if(null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),U({fullscreen:!0}),!0}if(b(e)&&o)return V(),!0;if(j(e)&&o&&!T&&!R){if(null!=e&&null!==(r=e.target)&&void 0!==r&&r.closest("[data-gamma-child-tiptap-editor]"))return;return V(),!0}}})},[U,V,z,T,R,t,_]),{enterSlideView:U,exitSlideView:V,enterFullscreen:z,exitFullscreen:N,exitedFullscreenByClick:I,isFullscreen:O,setIsFullscreen:k,setExitedFullscreenByClick:E}}},35710:function(e,t,n){n.d(t,{dM:function(){return sr},Ur:function(){return iU},nz:function(){return sb},_i:function(){return tR._i},eT:function(){return tR.eT}});var r,o,i,s=n(93812),a=n(55452),c=n(87254),l=n(11919),d=n(91012),u=n(53738),f=n(34676),p=n(49929),h=n(97261),m=n(97729),x=n.n(m),g=n(2784),v=n(43997),j=n(28811),b=n(64914),y=n(25232),C=n(63705),w=n(99076),O=n(95235),k=n(81333),S=n(29106),I=n(75944),E=n(54728),P=n(51434),D=n(67887),A=n(91333),T=n(83897),R=n(7954),_=n(36157),L=n(17349),M=n(78739),z=n(97526),N=n(22467),Z=n(25208),G=n(35232),F=n(63613),W=n(80891),U=n(61374),V=n(8283),H=n(96530),q=n(71354),B=n(50390),K=n(5766),Y=n(40110),J=n(45650),X=n(52322),Q=function(e){var t=e.label,n=e.shortcuts;return(0,X.jsxs)(V.U,{children:[n.map(function(e,t){return(0,X.jsx)(H.T,{padding:1,children:e},t)}),(0,X.jsx)(d.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},$=function(e){var t=e.onClose;return(0,X.jsx)(u.xu,{children:(0,X.jsxs)(q.K,{spacing:6,children:[(0,X.jsxs)(q.K,{spacing:1,children:[(0,X.jsxs)(V.U,{color:"gray.500",children:[(0,X.jsx)(p.G,{icon:S.UF})," ",(0,X.jsx)(B.X,{size:"xs",fontWeight:"normal",children:(0,X.jsx)(a.cC,{id:"h7MgpO"})})]}),(0,X.jsx)(B.X,{size:"md",children:(0,X.jsx)(a.cC,{id:"UodEcE"})})]}),(0,X.jsxs)(K.M,{spacing:3,columns:1,children:[(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"9xCxY6"}),shortcuts:[(0,X.jsx)(p.G,{icon:U.ac},"left"),(0,X.jsx)(p.G,{icon:W.eF},"right")]}),(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,X.jsx)(Y.i,{borderColor:"gray.300"}),(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"/5i2oX"}),shortcuts:[(0,X.jsx)(p.G,{icon:F.FP},"up"),(0,X.jsx)(p.G,{icon:G.r5},"down")]}),(0,X.jsx)(Q,{label:(0,X.jsx)(a.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,X.jsx)(J.z,{size:"sm",variant:"solid",onClick:t,children:(0,X.jsx)(a.cC,{id:"76gPWk"})})]})},"coach-bar")};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en=(0,g.memo)(function(){var e=(0,I.q)(),t=e.isOpen,n=e.onToggle,r=e.onClose,o=(0,M._)(z.H.hasSeenCoachBar,!1),i=(0,k.Z)(o,2),s=i[0],a=i[1],c=(0,_.CG)(L.Tf),l=(0,g.useCallback)(function(){s||a(!0),r()},[s,r,a]),d=!s||t,u=(0,R.z)((0,g.useCallback)(function(e){return e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150},[]));return(0,X.jsx)(Z.H,{mr:c&&s&&!d&&!u?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,X.jsxs)(E.J,{returnFocusOnClose:!1,isOpen:d,onClose:l,closeOnBlur:!0,children:[(0,X.jsx)(P.x,{children:(0,X.jsx)(D.h,{onClick:function(){t&&a(!0),n()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,X.jsx)(p.G,{icon:S.UF})})}),(0,X.jsx)(A.y,et(et({},N.Ro),{},{children:(0,X.jsx)(T.b,{children:(0,X.jsx)($,{onClose:l})})}))]})})});en.displayName="PresentModeHelpWidget";var er=n(95828),eo=n(1243),ei=n(88164),es=n(14549),ea=n(70957),ec=n(40723),el=n(81324),ed=n(57560),eu=n(58124),ef=n(74637),ep=n(94301),eh=n(35741),em=n(82269),ex=n(20299),eg=n(46974),ev=n(48798),ej=n(85249),eb=n(20176),ey=n(36471),eC=n(1410),ew=n(46510),eO=n(80304),ek=n(55479),eS=n(84103),eI=n(49294),eE=n(34638),eP=n(56143),eD=n(47655),eA=n(50381),eT=n.n(eA),eR=n(97705),e_=n(93506),eL=n(73137),eM=n(25925),ez=["children","style"];function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eG={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},eF="custom"in eL.E?eL.E.custom(eR.m.div):(0,eL.E)(eR.m.div),eW=(0,g.forwardRef)(function(e,t){var n,r,o=e.children,i=e.style,s=(0,em.Z)(e,ez),a=(0,e_.jC)("Menu",s);return(0,X.jsx)(eR.m.div,eZ(eZ({ref:t,__css:{zIndex:null!==(n=e.zIndex)&&void 0!==n?n:null===(r=a.list)||void 0===r?void 0:r.zIndex},style:eZ({},i)},s),{},{children:(0,X.jsx)(eM.M,{children:(0,X.jsx)(eF,{className:(0,f.cx)("chakra-menu__menu-list"),variants:eG,style:{transformOrigin:"top left"},initial:eG.exit,animate:eG.enter,exit:eG.exit,__css:eZ({outline:0},a.list),children:o})})}))}),eU=n(17107),eV=["type"],eH=["icon","iconSpacing","command","commandSpacing","children"],eq=["className","children"],eB=["className"];function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eJ=(0,eU.G)(function(e,t){var n=e.type,r=(0,em.Z)(e,eV),o=(0,e_.jC)("Menu",r),i=r.as?null!=n?n:void 0:"button",s=eY({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},o.item);return(0,X.jsx)(eR.m.button,eY(eY({ref:t,type:i},r),{},{__css:s,_hover:o.item._focus}))}),eX=(0,eU.G)(function(e,t){var n=e.icon,r=e.iconSpacing,o=e.command,i=e.commandSpacing,s=e.children,a=(0,em.Z)(e,eH),c=n||o?(0,X.jsx)("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return(0,X.jsxs)(eJ,eY(eY({},a),{},{className:(0,f.cx)("chakra-menu__menuitem"),children:[n&&(0,X.jsx)(eQ,{fontSize:"0.8em",marginEnd:void 0===r?"0.75rem":r,children:n}),c,o&&(0,X.jsx)(e$,{marginStart:void 0===i?"0.75rem":i,children:o})]}))});eX.displayName="MenuItem";var eQ=function(e){var t=e.className,n=e.children,r=(0,em.Z)(e,eq),o=g.Children.only(n),i=g.isValidElement(o)?g.cloneElement(o,{focusable:"false","aria-hidden":!0,className:(0,f.cx)("chakra-menu__icon",o.props.className)}):null,s=(0,f.cx)("chakra-menu__icon-wrapper",t);return(0,X.jsx)(eR.m.span,eY(eY({className:s},r),{},{__css:{flexShrink:0},children:i}))};eQ.displayName="MenuIcon";var e$=(0,eU.G)(function(e,t){var n=(0,e_.jC)("Menu",e);return(0,X.jsx)(eR.m.span,eY(eY({ref:t},e),{},{__css:n.command,className:"chakra-menu__command"}))});e$.displayName="MenuCommand";var e0=function(e){var t=e.className,n=(0,em.Z)(e,eB),r=(0,e_.jC)("Menu",e);return(0,X.jsx)(eR.m.hr,eY(eY({role:"separator","aria-orientation":"horizontal",className:(0,f.cx)("chakra-menu__divider",t)},n),{},{__css:r.divider}))};e0.displayName="MenuDivider";var e1=n(17714),e2=n(81065),e5=n(27442),e3=n(24466),e6=["editor","openStyleDrawer","cardUrl","getPos","isNested","isFirstCard","isCollapsed","hasCardBackground","onClose","updateAttributes","previewContent"];function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e7=(0,X.jsx)(p.G,{icon:eO.TX,fixedWidth:!0}),e9=(0,X.jsx)(p.G,{icon:ew.WM,fixedWidth:!0}),te=(0,X.jsx)(p.G,{icon:eC.O4,fixedWidth:!0}),tt=(0,X.jsx)(p.G,{icon:ey.$,fixedWidth:!0}),tn=(0,X.jsx)(p.G,{icon:eb.FP,fixedWidth:!0}),tr=(0,X.jsx)(p.G,{icon:ej.oK,fixedWidth:!0}),to=(0,X.jsx)(p.G,{icon:ev.re,fixedWidth:!0}),ti=(0,X.jsx)(p.G,{icon:eg.z1,fixedWidth:!0}),ts=(0,X.jsx)(p.G,{icon:ex.UP,fixedWidth:!0}),ta=(0,g.forwardRef)(function(e,t){var n=e.editor,r=e.openStyleDrawer,o=e.cardUrl,i=e.getPos,s=e.isNested,u=e.isFirstCard,f=e.isCollapsed,p=e.hasCardBackground,h=e.onClose,m=e.updateAttributes,x=e.previewContent,v=(0,em.Z)(e,e6);console.debug("%c [<ManageCardMenu />] RENDER","background-color: limegreen");var j=(0,ek.p)(),b=(0,e3.K)(),y=(0,g.useCallback)(function(){m&&m({previewContent:null===x?"":null})},[m,x]),C=(0,g.useCallback)(function(){var e=i();if(e&&n){var t=n.state.doc.nodeAt(e),r=t&&(0,eD.getCardTitle)(t.toJSON());n.chain().deleteCard(e).focus().run();var o=c.ag._({id:"0MWv65",values:{displayTitle:r?'"'.concat(r,'"'):"card"}}),s=c.ag._({id:"9uI/rE"}),a=j({title:(0,X.jsxs)(V.U,{children:[(0,X.jsx)(d.x,{noOfLines:1,children:o}),(0,X.jsx)(eS.r,{textDecoration:"underline",onClick:function(){(0,eP.Yw)(n.state),j.close(a)},children:s})]}),status:"info",duration:3e3,position:"top"})}},[n,i,j]),w=(0,g.useCallback)(function(){var e=i();e&&(null==n||n.commands.duplicateCard(e))},[n,i]),O=(0,g.useCallback)(function(){var e=i();e&&(null==n||n.commands.unnestCard(e))},[n,i]),k=(0,g.useCallback)(function(){var e=i();e&&(null==n||n.chain().mergeCardsAtPos(e).focus().run())},[n,i]),S=(0,g.useCallback)(function(){r(0)},[r]),I=(0,g.useCallback)(function(){r(1)},[r]),E=(0,_.CG)(L.hN),P=(0,eI.V)(o).onCopy,D=(0,eE.ff)("red.500","red.300"),A=(0,g.useCallback)(function(e){var t;if(e.target&&null!==(t=e.target)&&void 0!==t&&t.closest('[data-testid="open-share"]')){e.preventDefault();return}P(),j({title:c.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[P,j]),T=(0,g.useCallback)(function(){var e=i();if(e&&n){var t=(0,e2.PZ)(n,e);if(!t){j({title:c.ag._({id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}eT()(t,{format:"text/html"}),j({title:c.ag._({id:"LHDpRL"}),status:"success",duration:3e3,position:"top"})}},[n,i,j]);return(0,X.jsxs)(eW,e8(e8({},v),{},{zIndex:"popover",ref:t,onClick:h,"data-testid":"manage-card-menu",children:[(0,X.jsx)(eX,{icon:(0,X.jsx)(e5.x,{isLocked:!b}),onClick:A,"data-testid":"copy-card-link",children:(0,X.jsx)(a.cC,{id:"F0YmUY"})}),(0,X.jsx)(eX,{icon:te,onClick:T,children:(0,X.jsx)(a.cC,{id:"Bq0HJ4"})}),(0,X.jsxs)(l.k,{direction:"column",display:E?"flex":"none",children:[(0,X.jsx)(e0,{}),(0,X.jsx)(eX,{icon:e9,onClick:w,"data-testid":"duplicate-card",children:(0,X.jsx)(a.cC,{id:"euc6Ns"})}),m&&s&&f&&(0,X.jsx)(eX,{icon:""===x?ti:ts,onClick:y,"data-testid":"hide-preview",children:""===x?(0,X.jsx)(a.cC,{id:"dK2evu"}):(0,X.jsx)(a.cC,{id:"691flv"})}),r&&void 0!==p&&!f&&(0,X.jsx)(eX,{icon:to,onClick:S,onMouseDown:e1.br,"data-testid":"card-background",children:p?(0,X.jsx)(a.cC,{id:"sIpTuZ"}):(0,X.jsx)(a.cC,{id:"T6eZ9z"})}),r&&!f&&(0,X.jsx)(eX,{icon:e7,onClick:I,onMouseDown:e1.br,"data-testid":"card-style",children:(0,X.jsx)(a.cC,{id:"k7zVgS"})}),s?(0,X.jsx)(eX,{icon:tr,onClick:O,"data-testid":"merge-into-parent-card",children:(0,X.jsx)(a.cC,{id:"b+J8Wt"})}):!1!=s||u?null:(0,X.jsx)(eX,{icon:tn,onClick:k,"data-testid":"merge-into-card-above",children:(0,X.jsx)(a.cC,{id:"kV34zB"})}),(0,X.jsx)(e0,{}),(0,X.jsx)(eX,{icon:tt,color:D,onClick:C,"data-testid":"delete-card",children:(0,X.jsx)(a.cC,{id:"cnGeoo"})})]})]}))}),tc=n(76236);function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tu=(0,g.memo)(function(e){var t=e.editor,n=(0,_.CG)(tc.tk),r=n.isOpen,o=n.ref,i=n.options,s=(0,g.useState)(null),a=s[0],c=s[1],l=(0,eh.D)(o,a,{placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,8]}}],strategy:"absolute"}).styles,d=(0,v.I0)(),u=(0,g.useCallback)(function(){d((0,tc.kG)({saveRef:!0}))},[d]),f=(0,g.useCallback)(function(){d((0,tc.kG)({saveRef:!1}))},[d]);return(0,ef.O)({ref:{current:a},handler:function(){r&&(u(),setTimeout(function(){d((0,tc.gQ)())},0))}}),(0,g.useEffect)(function(){return function(){return f()}},[]),(0,X.jsx)(ep.h,{children:r&&i&&(0,X.jsx)(ta,td(td({},i),{},{style:td({},l.popper),onClose:f,ref:c,editor:t}))})}),tf=n(42028),tp=n(19260),th=n(36188),tm=n(89089),tx=n(84636),tg=n.n(tx),tv=n(54073),tj=n.n(tv),tb=n(72338),ty=n(90090),tC=n(37057),tw=n(53571),tO=n(70173),tk=function(e,t,n,r,o){var i=r-n,s=Math.max(i-Math.max(e-n,0)-Math.max(r-t,0),0),a=s/i,c=a>0&&s==t-e;return{overlap:a,viewing:o&&(c||a>.5||s>400),only:c}};function tS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tI=function(e,t){var n=(0,ty.As)("editor"),r=(0,g.useState)(null),o=r[0],i=r[1],s=(0,g.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),a=(0,_.CG)(L.gh),c=(0,_.CG)(L.i2);(0,g.useEffect)(function(){s.current.presentingCardId=null!=c?c:null},[c]);var l=(0,_.CG)(L.Q5);(0,g.useEffect)(function(){s.current.expandedCards=l},[l]),(0,g.useEffect)(function(){var e=document.querySelector(n.scrollSelector);if(e){i(e);var t=e.getBoundingClientRect().height;s.current.scrollTop=e.scrollTop,s.current.containerHeight=t}},[n.scrollSelector,s]),(0,g.useEffect)(function(){var e=tj()(function(){o&&(s.current.scrollTop=o.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),function(){return window.removeEventListener("scroll",e,!0)}},[o]),(0,g.useEffect)(function(){var e=tj()(function(){o&&(s.current.containerHeight=o.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[o]),(0,g.useEffect)(function(){if(e){if(a===tO.q.SLIDE_VIEW){var r=setInterval(function(){t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return function(){return clearInterval(r)}}var o=setInterval(function(){if(!document.hidden){var r=s.current,o=r.scrollTop,i=r.containerHeight,a=r.expandedCards,c=o+i;tg()((0,tb.N2)(e.state.doc,tC.KH),function(e){return e.node.attrs.id}).map(function(t){var r,i=t.node.attrs.id,s=a[i];if(!s)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){var l=(0,tw.LY)(r,n.scrollSelector),d=r.offsetHeight+l;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:i},tk(o,c,l,d,s))}return null}).filter(function(e){return!!(null!=e&&e.viewing)}).forEach(function(e){t.emit("cardViewed",{cardId:e.id,interval:1e3})})}},1e3);return function(){return clearInterval(o)}}},[a,e,s,t,n.scrollSelector])},tE=function(e){var t=e.editor,n=e.backoffFactor,r=void 0===n?1:n,o=(0,th.z$)(),i=(0,g.useState)(15e3),s=i[0],a=i[1];tI(t,tm.f);var c=(0,g.useCallback)(function(){tm.f.flush(),a(Math.min(s*r,12e4))},[r,s]);return(0,g.useEffect)(function(){if(o){tm.f.initialize(),tm.f.on("flush",function(e){for(var t=e.viewed,n=0,r=Object.entries(t);n<r.length;n++){var i=(0,k.Z)(r[n],2),s=i[0],a=i[1];o.trackDocEvent(th.AA.CARD_VIEWED,{card_id:s,duration:a})}});var e=setInterval(function(){return c()},s);return function(){clearInterval(e),tm.f.destroy()}}},[o,s,c]),null},tP=n(5945),tD=n(13504),tA=n(75213),tT=n(54714),tR=n(34972),t_=n(38404),tL=n(20406),tM=n(28526),tz=n.n(tM),tN=n(78116),tZ=n(56915),tG=n(16796),tF=n(64827),tW=n(2167),tU=n(80353),tV=n(76648),tH=n(58125),tq=n(30764),tB=n(68650),tK=n(94826),tY=n(75245),tJ=n(41823),tX=n(11204),tQ=n(78977),t$=n(74358),t0=n(69663),t1=n(62288),t2=n(15767);function t5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var t3=g.createContext({enabled:!1,registerEditor:function(e,t){},getAllCards:function(){return[]},userMessage:"",setUserMessage:function(e){}});function t6(){return(0,g.useContext)(t3)}var t4=function(e){var t=e.children,n=(0,g.useRef)(new Map),r=(0,g.useRef)(""),o=(0,g.useRef)(function(e,t){n.current.set(e,t)}),i=(0,g.useRef)(function(){return Array.from(n.current.values()).map(function(e){var t,n;return null===(t=e.state.doc.firstChild)||void 0===t?void 0:null===(n=t.content.toJSON())||void 0===n?void 0:n[0]}).filter(Boolean)}),s=(0,g.useCallback)(function(e){r.current=e},[]);return(0,X.jsx)(t3.Provider,{value:{enabled:!0,registerEditor:o.current,getAllCards:i.current,userMessage:r.current,setUserMessage:s},children:t})},t8=n(60282),t7=n(12694),t9=n(56581),ne=n(27302),nt=n(420),nn=n(28617),nr=function(e){var t=e.cardId,n=e.onClick,r=(0,_.CG)((0,t8.NB)(t)),o=(0,_.CG)(L.Pu);return r?(0,X.jsxs)(q.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[r.variants.map(function(e){if(!e)return null;var i=e.label,s=e.card,a=e.id;return(0,X.jsx)(no,{theme:o,isSelected:r.selected===a,label:i,card:s,onClick:function(){n({cardId:t,variationId:a})}},a)}),r.variants.length<2&&(0,X.jsx)(ne.M,{children:(0,X.jsx)(nt.$,{})})]}):null},no=function(e){var t=e.label,n=e.card,r=e.theme,o=e.isSelected,i=void 0!==o&&o,s=e.onClick,a=(0,g.useMemo)(function(){return(0,nn.vL)({docFlags:{cardLayoutsEnabled:!0}},[n])},[n]);return(0,X.jsxs)(q.K,{align:"start",children:[(0,X.jsx)(l.k,{borderRadius:"md",bg:"white",shadow:i?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:void 0===s?function(){}:s,children:(0,X.jsx)(l.k,{sx:t$.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,X.jsx)(t$.m,{content:a,theme:r,isThumbnail:!0})})}),(0,X.jsxs)(d.x,{fontSize:"sm",children:[i&&(0,X.jsx)(t9.n,{boxSize:3,mr:2}),t]})]})};function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var na="ai-wizard-editor-root",nc=function(e){var t=e.doc,n=e.cards,r=e.theme,o=void 0===r?tY.mU:r,i=(0,t1.R5)(o),s=(0,tJ.wj)(o),a=(0,t1.wh)(i,s),c=(0,_.TL)(),d=t6().registerEditor;return((0,g.useEffect)(function(){return function(){c((0,t8.mc)())}},[c]),t)?(0,X.jsxs)(l.k,ns(ns({bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:na},a),{},{children:[(0,X.jsx)(t0.Y,{}),n.map(function(e,n){var r,o=null===(r=e.attrs)||void 0===r?void 0:r.id;return o?(0,X.jsx)(nl,{doc:t,cardId:o,cardIndex:n,cardJSON:e,onCreate:function(e){d(o,e)}},o):null})]})):null},nl=function(e){var t=e.cardId,n=e.cardIndex,r=e.cardJSON,o=e.doc,i=e.onCreate,s=(0,_.TL)(),a=(0,g.useState)(null),c=a[0],d=a[1],u=t6().userMessage,f=(0,t7.b)({editor:c});(0,g.useEffect)(function(){c&&f({doc:c.state.doc,cardId:t,message:u})},[f,c,t,n,u]);var p=(0,g.useMemo)(function(){return(0,tX.vL)({docFlags:{cardLayoutsEnabled:!0}},[r])},[r]),h=(0,_.CG)((0,t8.a4)(t));(0,t2.vm)(function(){if(c&&h){var e=(0,tC.Bw)(c,t);e&&c.commands.command(function(t){var n=t.tr,r=tq.NB.fromJSON(c.schema,h.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,r),!0})}},[c,h,t],[h]);var m=(0,g.useCallback)(function(e){var n=e.cardId,r=e.variationId;c&&n===t&&s((0,t8.dx)({cardId:t,variantId:r}))},[s,c,t]);return null!=o&&o.id?(0,X.jsxs)(l.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:t$.n,my:-8,children:[(0,X.jsx)(nr,{cardId:t,onClick:m}),(0,X.jsx)(tQ.y,{initialContent:p,onCreate:function(e){var t=e.editor;d(t),i(t)},doc:o,docId:o.id,scrollingParentSelector:".".concat(na),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},nd=n(77399);function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var np=function(e){var t=(0,nd.M)({id:"cardSuggestionDrawer"}),n=t.isOpen,r=t.onClose,o=t.onOpen,i=(0,_.CG)(L.Pu),s=(0,g.useState)(function(){return(0,tH.xC)({reducer:_.Ct})})[0];return(0,X.jsx)(v.zt,{store:s,children:(0,X.jsx)(nh,nf(nf({},e),{},{isOpen:n,onClose:r,onOpen:o,theme:i}))})},nh=(r=function(e){var t,n=e.doc,r=e.editor,o=e.theme,i=e.isOpen,s=e.onClose,c=e.onOpen,l=(0,g.useState)([]),d=l[0],u=l[1],f=(0,g.useState)(null),p=f[0],h=f[1],m=t6(),x=m.getAllCards,v=m.setUserMessage,j=(0,g.useCallback)(function(){s(),u([]),h(null)},[s]),b=(0,g.useCallback)(function(){if(j(),r){var e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);var t=1,n=r.state.doc.nodeSize-2,o=(0,tC.Bw)(r,p);if(o){n=(t=o.pos)+o.node.nodeSize;var i=e.content.find(function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===p});if(!i){console.warn("[handleConfirm] Count not find card to use");return}e=i}r.commands.command(function(o){return o.tr.replaceRangeWith(t,n,tq.NB.fromJSON(r.schema,e)),!0})}},[j,r,p,x]),y=(0,g.useCallback)((t=(0,tL.Z)(tz().mark(function e(t,n,r){return tz().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(),h(n),u(t.toJSON().content[0].content.filter(function(e){var t;return null===n||(null===(t=e.attrs)||void 0===t?void 0:t.id)===n})),v(r);case 5:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),[c,v]);return(0,g.useEffect)(function(){if(r)return tK.T.on("openSuggestionEditor",function(e){var t=e.cardId,n=e.userMessage;y(r.view.state.doc,t,n)})},[r,y]),(0,X.jsxs)(tN.d,{placement:"bottom",onClose:s,isOpen:i,trapFocus:!0,isFullHeight:!0,children:[(0,X.jsx)(tZ.Z,{}),(0,X.jsxs)(tG.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,X.jsx)(tF.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,X.jsx)(tW.f,{p:0,h:"100%",children:d.length>0&&n?(0,X.jsx)(nc,{doc:n,cards:d,theme:o}):(0,X.jsx)(tB.AA,{})}),(0,X.jsx)(tU.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,X.jsxs)(tV.h,{spacing:4,children:[(0,X.jsx)(J.z,{variant:"ghost",onClick:s,children:(0,X.jsx)(a.cC,{id:"dEgA5A"})}),(0,X.jsx)(J.z,{variant:"solid",onClick:b,children:(0,X.jsx)(a.cC,{id:"7VpPHA"})})]})})]})]})},(0,g.memo)(function(e){return(0,X.jsx)(t4,{children:(0,X.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t5(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))})})),nm=n(67004),nx=n(94603),ng=n(31145),nv=n(49626),nj=n(61751),nb=n(49747),ny=n(56133),nC=n(39097),nw=n.n(nC),nO=n(63331),nk=n(26018),nS=n(16673),nI=n(42781),nE=n(61528),nP=n(60883),nD=n(76035),nA=n(50281),nT=n(54119),nR=n(77779),n_=n(2046),nL=n(70287),nM=n(25793),nz=n(14304),nN=n.n(nz),nZ=n(64805),nG=[{key:"bad",label:(0,X.jsx)(a.cC,{id:"XSfVsn"}),ariaLabel:function(){return c.ag._({id:"XSfVsn"})},icon:nR.Kf,color:"red"},{key:"meh",label:(0,X.jsx)(a.cC,{id:"0ASQJH"}),ariaLabel:function(){return c.ag._({id:"0ASQJH"})},icon:nT.C4,color:"yellow"},{key:"good",label:(0,X.jsx)(a.cC,{id:"9ZYnL5"}),ariaLabel:function(){return c.ag._({id:"9ZYnL5"})},icon:nA.I3,color:"green"}],nF=function(e){var t=e.docId,n=e.isDark,r=e.interactionId,o=(0,g.useState)(null),i=o[0],s=o[1],c=(0,g.useState)(!1),l=c[0],f=c[1],h=(0,g.useState)(""),m=h[0],x=h[1],v=(0,g.useRef)(null),j=(0,ek.p)(),b=(0,g.useCallback)(function(e){s(e),(0,nZ.fM)({rating:e,doc_id:t,interactionId:r}),j({title:(0,X.jsx)(a.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(function(){var e;null==v||null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[t,r,j]),y=(0,g.useCallback)(function(e){e||((0,nZ.XH)({feedback:nN().sanitize(m),doc_id:t,interactionId:r}),j({title:(0,X.jsx)(a.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),f(!0)},[t,m,r,j]);return(0,X.jsx)(u.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:n?"whiteAlpha.100":"gray.200",position:"relative",children:l?(0,X.jsxs)(d.x,{color:n?"green.400":"green.600",textAlign:"center",children:[(0,X.jsx)(p.G,{icon:nD.faCircleCheck})," ",(0,X.jsx)(a.cC,{id:"SOk0EB"})]}):(0,X.jsxs)(q.K,{spacing:4,children:[(0,X.jsxs)(q.K,{alignItems:"center",spacing:"1",children:[(0,X.jsx)(d.x,{fontSize:"sm",color:n?"whiteAlpha.800":"gray.500",children:(0,X.jsx)(a.cC,{id:"TxHdBh"})}),i?(0,X.jsxs)(d.x,{textAlign:"center",color:n?"green.400":"green.600",children:[(0,X.jsx)(p.G,{icon:nD.faCircleCheck})," ",(0,X.jsx)(a.cC,{id:"SOk0EB"})]}):(0,X.jsx)(d.x,{children:(0,X.jsx)(a.cC,{id:"cNzndx"})})]}),(0,X.jsx)(V.U,{fontSize:"xl",width:"100%",children:nG.map(function(e){var t=e.key,r=e.ariaLabel,o=e.label,s=e.icon,a=e.color,c=i===t;return(0,X.jsx)(nW,{ariaLabel:r,label:o,icon:s,color:a,onClick:function(){return b(t)},isSelected:c,isDisabled:!!(i&&!c),isDark:n},t)})}),i&&(0,X.jsxs)(n_.NI,{textAlign:"center",children:[(0,X.jsx)(nL.l,{fontSize:"sm",color:n?"whiteAlpha.800":"gray.500",children:"good"===i?(0,X.jsx)(a.cC,{id:"AmM8eQ"}):(0,X.jsx)(a.cC,{id:"8+bwIa"})}),(0,X.jsx)(nM.g,{value:m,onChange:function(e){x(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,X.jsxs)(tV.h,{spacing:"4",ref:v,children:[(0,X.jsx)(J.z,{variant:"text",onClick:function(){y(!0)},children:(0,X.jsx)(a.cC,{id:"6Uau97"})}),(0,X.jsx)(J.z,{variant:"solid",isDisabled:""===m,onClick:function(){return y(!1)},children:(0,X.jsx)(a.cC,{id:"hQRttt"})})]})]})]})})},nW=function(e){var t=e.label,n=e.ariaLabel,r=e.icon,o=e.color,i=e.isSelected,s=e.onClick,a=e.isDisabled,c=e.isDark;return(0,X.jsx)(h.kH,{label:t,placement:"top",children:(0,X.jsx)(D.h,{"aria-label":n(),boxShadow:"none",bg:i?c?"".concat(o,".200"):"".concat(o,".100"):c?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(i?1:.5),cursor:"not-allowed"},color:i?c?"".concat(o,".600"):"".concat(o,".500"):c?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(o,".100"),color:"".concat(o,".500")},flex:1,icon:(0,X.jsx)(d.x,{fontSize:"2xl",children:(0,X.jsx)(p.G,{icon:r})}),isDisabled:a,variant:"plain",onClick:s})})},nU=n(56969),nV=n(97907),nH=["90%","360px"],nq=function(e){var t=e.onClose,n=e.eyebrowText,r=e.mainText,o=e.callsToAction;return(0,X.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:nH,maxW:nH,position:"relative",children:[(0,X.jsx)(nV.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,X.jsxs)(q.K,{spacing:4,children:[(0,X.jsxs)(q.K,{spacing:1,paddingEnd:3,children:[!(0,nE.s2)()&&(0,X.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:n}),(0,X.jsx)(d.x,{fontSize:"md",children:r})]}),(0,X.jsx)(u.xu,{w:"100%",children:o})]})]})},nB=function(e){var t=e.onClose,n=e.startTour;return(0,X.jsx)(nq,{eyebrowText:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,X.jsx)(a.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}})]}),mainText:(0,X.jsx)(a.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,X.jsx)(J.z,{size:"md",w:"100%",variant:"solid",onClick:function(){n(0),t()},children:(0,X.jsx)(a.cC,{id:"VzFYDl"})})})},nK=n(77245),nY=["90%","360px"],nJ=function(e){var t=e.onClose,n=(0,g.useState)(!0),r=n[0],o=n[1];return(0,g.useEffect)(function(){setTimeout(function(){o(!1)},3e3)},[]),(0,X.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:nY,maxW:nY,position:"relative",children:[(0,X.jsx)(nV.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,X.jsxs)(q.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,X.jsx)(u.xu,{color:"trueblue.300",children:(0,X.jsx)(p.G,{icon:nK.tc,size:"2x",className:r?"fa-bounce":void 0})}),(0,X.jsxs)(q.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,X.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,X.jsx)(a.cC,{id:"eoDgVo"})}),(0,X.jsx)(d.x,{fontSize:"md",children:(0,X.jsx)(a.cC,{id:"p7dFyi"})})]})]})]})};function nX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nX(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n$="source",n0="desktop-tour-toast",n1="switch-from-mobile-to-desktop-toast",n2=function(e){var t,n=e.editor,r=(0,ek.p)(),o=(0,_.CG)(t_.yx),i=(0,C.c8)().startTour,s=(0,tP.SE)(),a=s.user,c=s.setSettings,l=(0,g.useState)(!1),d=l[0],u=l[1],f=(0,g.useRef)(!1),p=!!(null!=a&&null!==(t=a.settings)&&void 0!==t&&t.needsEditorOnboarding),h=(0,_.CG)((0,nO.oH)(null==n?void 0:n.gammaDocId)),m=!!h&&"running"===h.status,x=!!h&&("complete"===h.status||"error"===h.status),v=(0,ty.As)("editor"),j=(0,g.useState)(null),b=j[0],y=j[1],w=(0,g.useState)(function(){return(0,nP.SJ)()[n$]===nk.VY})[0],k=(0,g.useState)(function(){return w&&(0,nE.s2)()})[0],S=w&&x;return(0,g.useEffect)(function(){n&&u(!m&&!(0,nE.s2)()&&w&&p)},[n,w,m,p]),(0,g.useEffect)(function(){setTimeout(function(){(0,nU.lO)({query:nQ(nQ({},(0,nP.SJ)()),{},(0,O.Z)({},n$,void 0)),emitChange:!1})})},[]),(0,g.useEffect)(function(){return d&&!r.isActive(n0)&&setTimeout(function(){r({id:n0,position:"bottom-left",render:function(e){var t=e.onClose;return nB({onClose:function(){null==c||c({remove:["needsEditorOnboarding"]}),t()},startTour:i})},isClosable:!0,duration:null})},2e3),function(){r.isActive(n0)&&r.close(n0)}},[c,d,i,r]),(0,g.useEffect)(function(){if((0,nE.s2)()){var e=document.querySelector(v.scrollSelector);if(e){y(e);var t=function(){b&&(0,nE.s2)()&&(null==b?void 0:b.scrollTop)>=(null==b?void 0:b.scrollHeight)/4&&k&&!r.isActive(n1)&&!f.current&&(f.current=!0,r({id:n1,position:"top",render:function(e){return nJ({onClose:e.onClose})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),function(){window.removeEventListener("scroll",t,!0),r.isActive(n1)&&r.close(n1)}}}},[o,b,v.scrollSelector,k,r]),{showDocWizardFooter:S}};function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n6=(0,g.memo)(function(e){var t,n=e.interactionId,r=(0,_.CG)(t_.yx),o=null!=r&&!!r.theme&&(0,tY.wj)(null==r?void 0:r.theme),i=(0,g.useState)(!1),s=i[0],c=i[1],d=(0,ek.p)(),u=null==r?void 0:null===(t=r.accessLinks)||void 0===t?void 0:t[0],f=(0,g.useMemo)(function(){return(0,nP.Gn)({docTitle:null==r?void 0:r.title,docId:null==r?void 0:r.id,token:null==u?void 0:u.token,absolute:!0})},[r,null==u?void 0:u.token]),m=(0,eI.V)(f).onCopy,x=(0,g.useCallback)(function(){(0,nS.J)({docId:null==r?void 0:r.id,source:"docWizardFooter",type:"tokenUrl"}),m(),d({title:(0,X.jsx)(a.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==r?void 0:r.id,m,d]),v=(0,g.useCallback)(function(){c(!0)},[]);return r?(0,X.jsx)(h.Wk,{isDark:o,children:(0,X.jsx)(l.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,nE.s2)()?void 0:"-".concat(nI.m),children:(0,X.jsx)(nb.U,{in:!s,style:{width:"100%"},unmountOnExit:!0,children:(0,X.jsx)(l.k,n3(n3({pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative"},o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"}),{},{children:(0,X.jsx)(ny.W,{maxW:"420px",children:(0,X.jsxs)(q.K,{spacing:8,children:[(0,X.jsxs)(q.K,{spacing:4,textAlign:"center",children:[(0,X.jsx)(B.X,{size:"md",children:(0,X.jsx)(a.cC,{id:"bB+DHs"})}),(0,X.jsx)(J.z,{leftIcon:(0,X.jsx)(p.G,{icon:nj.nN}),variant:"solid",onClick:x,children:(0,X.jsx)(a.cC,{id:"RGCCrg"})}),(0,X.jsx)(J.z,{as:nw(),target:(0,nE.Q5)()?"_self":"_blank",variant:"plain",colorScheme:o?"blackAlpha":"whiteAlpha",leftIcon:(0,X.jsx)(p.G,{icon:nv.r8}),rightIcon:(0,nE.Q5)()?void 0:(0,X.jsx)(p.G,{icon:ng.faArrowUpRightFromSquare,size:"xs"}),href:nk.ET,children:(0,X.jsx)(a.cC,{id:"xFxi2V"})})]}),(0,X.jsx)(nF,{docId:r.id,isDark:o,interactionId:n}),(0,X.jsx)(ne.M,{pt:[0,0,4],w:"100%",children:(0,X.jsx)(J.z,{size:"sm",onClick:v,variant:"text",colorScheme:"blackAlpha",children:(0,X.jsx)(a.cC,{id:"vLyv1R"})})})]})})}))})})}):null});n6.displayName="DocWizardFooterInner";var n4=function(e){var t=e.editor,n=n2({editor:t}).showDocWizardFooter,r=(0,_.CG)((0,nO.oH)(null==t?void 0:t.gammaDocId)),o=null==r?void 0:r.id;return n&&o?(0,X.jsx)(n6,{interactionId:o}):(0,X.jsx)(X.Fragment,{})},n8=n(98537),n7=n.n(n8),n9=n(13302),re=function(e){var t=e.onCloneClick,n=e.onSignupClick,r=e.isLoggedIn;return(0,X.jsx)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:r?(0,X.jsxs)(V.U,{children:[(0,X.jsxs)(d.x,{mr:1,children:[(0,X.jsx)(a.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc},components:{0:(0,X.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,X.jsx)(J.z,{variant:"solid",onClick:t,children:(0,X.jsx)(a.cC,{id:"he3ygx"})})]}):(0,X.jsxs)(V.U,{children:[(0,X.jsxs)(d.x,{mr:1,children:[(0,X.jsx)(a.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc,GAMMA_PROPER_NOUN:er.N6},components:{0:(0,X.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,X.jsx)(nw(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,X.jsx)(J.z,{as:eS.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,X.jsx)(a.cC,{id:"e+RpCP"})})})]})})},rt=function(e){var t=!(0,nE.s2)(),n=(0,tP.SE)().user,r=(0,ek.p)(),o=(0,g.useRef)(),i=(0,n9.e)(),s=(0,g.useCallback)(function(){e&&(null===th.co||void 0===th.co||th.co.track(th.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),a=(0,g.useCallback)(function(){i({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,i]);(0,g.useEffect)(function(){return function(){o.current&&r.close(o.current)}},[r]);var c=t&&e,l=!!n;(0,t2.vm)(function(){o.current&&r.close(o.current),c&&(o.current=r({position:"bottom",render:function(){return re({onCloneClick:a,isLoggedIn:l,onSignupClick:s})},isClosable:!0,duration:null}))},[e,t,a,s,c,n,r,l],[c,l])},rn=n(73238),rr=n(10030),ro=n(81510),ri="sessionId1",rs=tb.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(t){return function(){var n=(0,_.bh)();return e.storage.user=n7()({},e.storage.user,t),n.dispatch((0,L.MU)({sessionId:ri})),n.dispatch((0,L.Tx)({collaborators:[e.storage.user]})),!0}}}}}),ra=function(e){var t,n=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=(0,_.CG)(t_.yx);rt(s);var a=(0,g.useState)(function(){return[rr.$1.configure({scrollerSelector:o}),rs,rn._g]})[0],c=(0,tP.SE)(),d=c.user,f=c.anonymousUser,p=c.isUserLoading,h=c.color,m=(0,g.useState)(),x=m[0],v=m[1],b=(0,j.EDv)({variables:{docId:n,snapshotId:r},skip:!r}),y=b.data,C=b.loading,w=b.error;(0,g.useEffect)(function(){!p&&x&&x.commands.user({id:(null==d?void 0:d.id)||f.id,color:h.value,sessionId:ri,idleSince:null,name:(null==d?void 0:d.displayName)||f.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!p})},[x,d,h,p,f]);var O=y&&void 0!==y.snapshot&&!C&&s;return(0,X.jsxs)(u.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!O||w?(0,X.jsxs)(l.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!O&&(0,X.jsx)(nt.$,{}),w&&(0,X.jsxs)(ne.M,{h:"100%",children:["There was an error loading this ",er.Yc,":"," ",w.message]})]}):(0,X.jsx)(u.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:O?1:0,children:(0,X.jsx)(eu.yE,{doc:s,editorId:"main",docId:n,extensions:a,onCreate:function(e){var t=e.editor;v(t),setTimeout(function(){i&&i(t)},10)},readOnly:!0,initialContent:null===(t=y.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:o})}),(0,X.jsx)(ro.m,{})]})},rc=n(69895),rl="sessionId1",rd=tb.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(t){return function(){var n=(0,_.bh)();return e.storage.user=n7()({},e.storage.user,t),n.dispatch((0,L.MU)({sessionId:rl})),n.dispatch((0,L.Tx)({collaborators:[e.storage.user]})),!0}}}}}),ru=function(e){var t,n=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=e.theme,a=e.showMadeWithGammaBadge,c=(0,g.useState)(function(){return[rr.$1.configure({scrollerSelector:o}),rd,rn._g]})[0],d=(0,tP.SE)(),f=d.user,p=d.isUserLoading,h=d.anonymousUser,m=d.color,x=(0,g.useState)(),v=x[0],b=x[1],y=(0,j.EDv)({variables:{docId:n,snapshotId:r},skip:!r}),C=y.data,w=y.loading,O=y.error,k=(0,_.CG)(t_.yx);(0,g.useEffect)(function(){!p&&v&&v.commands.user({id:(null==f?void 0:f.id)||h.id,color:m.value,sessionId:rl,idleSince:null,name:(null==f?void 0:f.displayName)||h.displayName||"",profileImageUrl:(null==f?void 0:f.profileImageUrl)||"",isReady:!p})},[v,f,m,p,h]);var S=C&&void 0!==C.snapshot&&!w&&k;return(0,X.jsxs)(u.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!S||O?(0,X.jsxs)(l.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!S&&(0,X.jsx)(nt.$,{}),O&&(0,X.jsxs)(ne.M,{h:"100%",children:["There was an error loading this ",er.Yc,":"," ",O.message]})]}):(0,X.jsx)(u.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:S?1:0,children:(0,X.jsx)(eu.yE,{doc:k,editorId:"main",docId:n,theme:s||void 0,extensions:c,onCreate:function(e){var t=e.editor;b(t),setTimeout(function(){i&&i(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:o})}),v&&(0,X.jsx)(tE,{editor:v,backoffFactor:2}),(void 0===a||a)&&(0,X.jsx)(ro.m,{})]})},rf=n(16019);function rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rp(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rm=(i={},(0,O.Z)(i,tO.q.DOC_VIEW,"doc"),(0,O.Z)(i,tO.q.SLIDE_VIEW,"present"),i),rx=function(e){var t=(0,v.I0)(),n=(0,nP.SJ)().mode,r=(0,_.CG)(L.gh),o=(0,g.useCallback)(function(e){var t=e||r,n=(0,nP.SJ)().mode,o=rm[t];n!==o&&(0,nU.lO)({query:rh(rh({},(0,nP.SJ)()),{},{mode:o}),emitChange:!1})},[r]);(0,rf.r)(o,[r]),(0,g.useEffect)(function(){return nU.fI.on("changed",function(){return o()})},[o]),(0,t2.vm)(function(){if(e){var r=n===rm.SLIDE_VIEW?tO.q.SLIDE_VIEW:tO.q.DOC_VIEW,i=(0,nP.sY)().cardId;r===tO.q.SLIDE_VIEW&&(i?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",i),e.commands.spotlightCardById(i)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,L.PM)({mode:r})),o(r)}},[e,t,n,o],[e])},rg=n(87202),rv=n(31358),rj=n(75393),rb=n(10469),ry=n(27440),rC=n(71170),rw=n(56241),rO=n(63522),rk=n(91122),rS=n(27231),rI=n(68093),rE=(0,rg.ZP)("mod+Escape"),rP=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),rD=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,ty.cC)("editor"),o=r.scroller;if(o){e.commands.turnOffSpotlight();var i=o.scrollHeight-o.offsetHeight;if("down"===t){if(!(r.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){var s=o.scrollTop+.5*o.offsetHeight;s>i-150&&(s=i),r.scrollTo({top:s})}}else if(!(r.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){var a=o.scrollTop-.5*o.offsetHeight;a<150&&(a=0),r.scrollTo({top:a})}}},rA=function(e){var t=e.enabled,n=e.setActiveKey,r=(0,th.z$)(),o=(0,_.TL)(),i=(0,tR._i)().editor,s=(0,_.CG)(rO.C),a=(0,rS.g)(i),c=a.enabled,l=a.pos,d=(0,g.useCallback)(function(){c?null==i||i.commands.turnOffSpotlight():null==i||i.commands.spotlightNextBlock()},[null==i?void 0:i.commands,c]);return(0,g.useEffect)(function(){if(t)return rv.F7.on("keydown","NAVIGATION_CONTROLS",function(e){var t,o,a=(0,_.bh)(),u=e.target,f=Object.keys((0,L.X9)(a.getState()).tree);if(!i||null!=u&&null!==(t=u.closest)&&void 0!==t&&t.call(u,"[data-gamma-child-tiptap-editor]")||null!=u&&null!==(o=u.closest)&&void 0!==o&&o.call(u,"input")||e.metaKey||s)return!1;switch(rP.has(e.key)&&("s"!==e.key&&(n(e.key),setTimeout(function(){n(null)},100)),e.preventDefault()),e.key){case"s":return d(),!0;case"l":case"ArrowRight":return(0,rk.p7)(),a.dispatch((0,L.Qx)({attached:!1})),null==r||r.trackDocEvent(th.AA.PRESENT_MODE_NAVIGATED,{direction:th.xQ.CARD_NEXT,method:th.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard();case"h":case"ArrowLeft":return(0,rk.p7)(),a.dispatch((0,L.Qx)({attached:!1})),null==r||r.trackDocEvent(th.AA.PRESENT_MODE_NAVIGATED,{direction:th.xQ.CARD_PREV,method:th.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard(!0);case"j":case"ArrowDown":case"PageDown":if((0,rk.p7)(),a.dispatch((0,L.Qx)({attached:!1})),!c){var p=(0,rn.ei)(i.state.selection);return i.commands.goToNextExpandableNode()||rD(i,"down",!p),!0}return null==r||r.trackDocEvent(th.AA.PRESENT_MODE_NAVIGATED,{direction:th.xQ.TELEPROMPTER_DOWN,method:th.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock();case"k":case"ArrowUp":case"PageUp":if((0,rk.p7)(),a.dispatch((0,L.Qx)({attached:!1})),!c){var h=(0,rn.ei)(i.state.selection);return i.commands.goToNextExpandableNode(!0)||rD(i,"up",!h),!0}return null==r||r.trackDocEvent(th.AA.PRESENT_MODE_NAVIGATED,{direction:th.xQ.TELEPROMPTER_UP,method:th.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock(!0);case"r":if(f[0])return(0,rk.p7)(),i.commands.spotlightCardById(f[0]),a.dispatch((0,L.Qx)({attached:!1})),!0;return!1;case"Escape":if(rE(e))return!1;var m=c&&l;if(i.commands.spotlightCollapseNearestExpandableNode(m?l:null))return i.commands.reHighlightExpandableNode(),!0;if(c)return i.commands.turnOffSpotlight(),!0;return a.dispatch((0,L.Qx)({attached:!1})),null==r||r.track(th.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),i.commands.ascendUpToParentCard(!1);case"Enter":var x=c&&l;if(i.commands.expandOrCollapseExpandableNode(x?l:null))return!0;if(x){var g=i.state.doc.resolve(l).parent;if(g&&(0,rI.AH)(g))return(0,rI.xB)(g.attrs.id,!1),i.commands.spotlightNextBlock(!0),!0;return i.commands.spotlightCollapseNearestExpandableNode(l)}return!1;default:return!1}})},[i,o,r,t,d,c,l,s,n]),c},rT=function(e){var t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},rR={ArrowUp:{icon:F.FP,label:(0,X.jsx)(a.cC,{id:"VbggDE"}),ariaLabel:function(){return c.ag._({id:"VbggDE"})},shortcuts:["","K"],key:"ArrowUp",onClick:function(){rT("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:U.ac,label:(0,X.jsx)(a.cC,{id:"4jciC3"}),ariaLabel:function(){return c.ag._({id:"4jciC3"})},shortcuts:["","H"],key:"ArrowLeft",onClick:function(){rT("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:G.r5,label:(0,X.jsx)(a.cC,{id:"e3GOIZ"}),ariaLabel:function(){return c.ag._({id:"e3GOIZ"})},shortcuts:["","J"],key:"ArrowDown",onClick:function(){rT("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:W.eF,label:(0,X.jsx)(a.cC,{id:"ZjQRVw"}),ariaLabel:function(){return c.ag._({id:"ZjQRVw"})},shortcuts:["","L"],key:"ArrowRight",onClick:function(){rT("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:rb.GT,label:(0,X.jsx)(a.cC,{id:"Xon9jp"}),ariaLabel:function(){return c.ag._({id:"Xon9jp"})},shortcuts:["S"],key:"S",onClick:function(){rT("s")},gridPos:[1,3]}},r_=function(e){var t=e.shortcuts;return(0,X.jsx)(d.x,{as:"span",color:"gray.400",ml:2,children:t.map(function(e,n){return(0,X.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,X.jsx)(d.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e)})})},rL=function(e){var t=e.activeKey,n=e.spotlightingByBlock;return(0,X.jsx)(ep.h,{children:(0,X.jsxs)(u.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,X.jsx)(B.X,{children:(0,X.jsx)(a.cC,{id:"wja8aL"})}),(0,X.jsx)(ry.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(rR).map(function(e){var r=e.gridPos,o=e.icon,i=e.label,s=e.ariaLabel,a=e.shortcuts,c=e.key,l=e.onClick,u=t===c;return(0,X.jsx)(rC.P,{gridColumn:r[1],gridRow:r[0],children:(0,X.jsx)(rw.u,{hasArrow:!0,placement:"top",label:(0,X.jsxs)(d.x,{whiteSpace:"nowrap",children:[i,(0,X.jsx)(r_,{shortcuts:a})]}),children:(0,X.jsx)(D.h,{m:1,shadow:"base",size:"md",variant:"S"==c&&n?"solid":"plain",isActive:u||"S"===c&&n,onClick:l,onMouseDown:function(e){return e.preventDefault()},"aria-label":s(),icon:(0,X.jsx)(p.G,{icon:o})})})},c)})})]})})},rM=n(5751),rz=n(26721),rN=n(9088),rZ=n(30893),rG=n(40771),rF=n(8022),rW=n(95258),rU=n(63849),rV=n(2575),rH=n(17651),rq=n(72466),rB=n(6185),rK=n.n(rB),rY=n(68642),rJ=n(27875),rX=n.n(rJ),rQ=n(18149),r$=n.n(rQ),r0=n(20325),r1=n(68964),r2={easeOutLinear:r1.gA,easeOutSine:r1.vh,easeOutCubic:r1.w2,easeOutCirc:r1.ei,easeOutQuad:r1.hl,easeOutQuart:r1.Y3,easeOutExpo:r1.ad,bezierCustom1:rK()(.13,.97,.035,.73),bezierCustom2:rK()(.105,1.15,.15,.355)},r5={UP:"up",DOWN:"down"},r3=function(e){return e?+new Date-+new Date(e):1/0},r6=function(e,t){var n=(0,g.useMemo)(function(){return new rY.Lethargy(6,120,.3,150)},[]),r=t||{},o=r.easing,i=void 0===o?"easeOutCubic":o,s=r.touchpadFactor,a=void 0===s?1.5:s,c=r.triggerThreshold,l=void 0===c?1200:c,d=(0,ty.As)("editor"),u=(0,_.CG)(L.i2),f=(0,g.useRef)(null),p=(0,g.useRef)(null),h=(0,g.useRef)(null),m=(0,g.useRef)(!1),x=(0,g.useRef)(null),v=(0,g.useRef)(null),j=(0,g.useState)(!1),b=j[0],y=j[1],C=(0,g.useState)(!1),w=C[0],O=C[1],k=(0,g.useRef)({counterTarget:0,counterCurrent:0,direction:r5.DOWN}),S=(0,g.useCallback)(function(){if(f.current){var e,t=k.current.counterTarget/l*100,n=(null!=t?t:0)*2.64,r="".concat(n," ").concat(264-n),o=null===(e=f.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,i=f.current.querySelector(".chakra-progress__indicator");i&&i.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(t.toFixed(0),"%"))}},[l]),I=(0,g.useCallback)(function(){var e=h.current,t=p.current;if(t&&e){var n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(n&&r){var o=k.current.counterCurrent/l,s=(550>r3(v.current)?1:null!=o?o:0)*264,a="".concat(s," ").concat(264-s),c=Math.max(56-56*r2[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(c,"px)"),t.style.transform="translateY(-".concat(c,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)}}},[i,l]),E=(0,g.useCallback)(function(){if(!m.current){var e;requestAnimationFrame(function t(n){var r=e?n-e:0;if(e=n,.1>Math.abs(k.current.counterTarget-k.current.counterCurrent)){k.current.counterCurrent=k.current.counterTarget,I(),m.current=!1;return}k.current.counterCurrent=(0,r1.t7)(k.current.counterCurrent,k.current.counterTarget,rX()(.3*(60/(r?1e3/r:60)),.3,1)),I(),requestAnimationFrame(t)})}},[I]),P=(0,g.useCallback)(function(){k.current.counterTarget=0,y(!1),O(!1),S(),E()},[E,S]);return(0,g.useEffect)(function(){if(!u||!e)return P();var t,r,o=document.querySelector((0,r0.U8)(u));if(!o)return P();var i=function(t){if(!t.target.closest("[data-comments-wrapper]")){var o=n.check(t);if(null!==h.current&&null!==p.current){var i=r3(x.current);if(!(i<500)&&(!(i<1e3)||!1!==o)){var s=r3(v.current);if(!(s<500)&&(!(s<1e3)||!1!==o)){var c=0===Math.abs(t.deltaY)?k.current.direction:t.deltaY>0?r5.DOWN:r5.UP;if("down"===c?d.isAtBottom():d.isAtTop()){clearTimeout(r);var u=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,f=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(u?a:1);if(c!==k.current.direction){k.current.direction=c,P();return}O(c===r5.DOWN),y(c===r5.UP),k.current.counterTarget+=f,k.current.direction=c,k.current.counterTarget/l>=1?(e.commands.spotlightNextCard(c===r5.UP,c===r5.UP?"bottom":"top"),v.current=+new Date,setTimeout(function(){P(),S()},250),setTimeout(function(){v.current=null},1e3)):r=setTimeout(P,500),E(),S()}}}}}},s=function(){x.current=+new Date,clearTimeout(t),P(),t=setTimeout(function(){x.current=null},1e3)};return o.addEventListener("scroll",s),o.addEventListener("wheel",i,{passive:!0}),S(),function(){o.removeEventListener("scroll",s),o.removeEventListener("wheel",i)}},[e,n,E,i,a,l,d,S,I,P,u]),{debugRef:f,nextCardRef:h,prevCardRef:p,showNextCard:w,showPrevCard:b}},r4=function(e){var t=e.editor,n=(0,y.ye)("debugLogging"),r=(0,g.useState)("easeOutExpo"),o=r[0],i=r[1],s=(0,g.useState)(1.5),a=s[0],c=s[1],l=(0,g.useState)(1200),d=l[0],u=l[1],f=r6(t,{easing:o,touchpadFactor:a,triggerThreshold:d}),p=f.debugRef,h=f.nextCardRef,m=f.prevCardRef,x=f.showNextCard,v=f.showPrevCard,j=(0,_.CG)(function(e){var t=(0,L.i2)(e)||"",n=(0,L.X9)(e),r=Object.keys((n.parents[t]||[]).reduce(function(e,t){return e[t]},n.tree)),o=null,i=null;return r.forEach(function(e,s){if(e===t){var a=n.parents[t];0===s?a.length&&(o={cardId:a[a.length-1],isSibling:!1}):o={cardId:r[s-1],isSibling:!0},s===r.length-1?a.length&&(i={cardId:a[a.length-1],isSibling:!1}):i={cardId:r[s+1],isSibling:!0}}}),{prevCard:o,nextCard:i}},r$()),b=j.prevCard,C=j.nextCard,w=null==C?void 0:C.cardId,O=null==b?void 0:b.cardId,k=(0,g.useMemo)(function(){var e=null,n=null;return t&&t.state.doc.descendants(function(t){return!(0,tC.KH)(t)||(t.attrs.id===O?e=t:t.attrs.id===w&&(n=t),!!(!e&&O)||!!(!n&&w))}),{prev:e,next:n}},[t,w,O]);return(0,X.jsxs)(X.Fragment,{children:[n&&(0,X.jsx)(r8,{ref:p,setEasing:i,setTouchpadFactor:c,setTriggerThreshold:u}),(0,X.jsx)(r7,{ref:m,direction:"up",node:k.prev,enabled:v,offset:16}),(0,X.jsx)(r7,{ref:h,direction:"down",node:k.next,enabled:x,offset:24})]})},r8=g.forwardRef(function(e,t){var n=e.setEasing,r=e.setTouchpadFactor,o=e.setTriggerThreshold;return(0,X.jsxs)(l.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,X.jsxs)(rN.v,{closeOnSelect:!1,children:[(0,X.jsx)(rZ.j,{as:J.z,colorScheme:"trueblue",children:"Options"}),(0,X.jsxs)(rG.q,{minWidth:"240px",children:[(0,X.jsx)(h.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,X.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,X.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,X.jsxs)(rF.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:function(e,t){return o(t)},children:[(0,X.jsx)(rF.zu,{}),(0,X.jsxs)(rF.Fi,{children:[(0,X.jsx)(rF.WQ,{}),(0,X.jsx)(rF.Y_,{})]})]}),(0,X.jsx)(rW.R,{}),(0,X.jsx)(h.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,X.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,X.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,X.jsxs)(rF.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:function(e,t){return r(t)},children:[(0,X.jsx)(rF.zu,{}),(0,X.jsxs)(rF.Fi,{children:[(0,X.jsx)(rF.WQ,{}),(0,X.jsx)(rF.Y_,{})]})]}),(0,X.jsx)(rW.R,{}),(0,X.jsxs)(rU._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:function(e){return n(e)},children:[(0,X.jsx)(rV.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,X.jsx)(rV.i,{value:"easeOutSine",children:"easeOutSine"}),(0,X.jsx)(rV.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,X.jsx)(rV.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,X.jsx)(rV.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,X.jsx)(rV.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,X.jsx)(rV.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,X.jsx)(rV.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,X.jsx)(rV.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,X.jsx)(l.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,X.jsx)(rH.D,{value:40,color:"trueblue.500",children:(0,X.jsx)(rq.i,{})})})]})});r8.displayName="PeekDebugger";var r7=g.forwardRef(function(e,t){var n=e.direction,r=e.enabled,o=e.node,i=e.offset,s=(0,g.useState)(!1),a=s[0],c=s[1],u=(0,g.useState)(o),f=u[0],h=u[1];(0,g.useEffect)(function(){c(!0);var e=setTimeout(function(){c(!1),h(o)},550);return function(){clearTimeout(e)}},[o]);var m=(0,g.useMemo)(function(){return f?(0,eD.getCardTitle)(f.toJSON()):""},[f]),x=!!f;return(0,X.jsx)(l.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(i,"px"):"inherit",bottom:"down"===n?"".concat(i,"px"):"inherit",children:(0,X.jsxs)(l.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:r?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,X.jsx)(rH.D,{display:x?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,X.jsx)(rq.i,{visibility:a?"visible":"hidden",children:(0,X.jsx)(p.G,{icon:nD.faCircleCheck,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),x||"up"!==n?x||"down"!==n?null:(0,X.jsx)(p.G,{icon:rM.m5,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,X.jsx)(p.G,{icon:rz.yt,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,X.jsx)(l.k,{width:1}),(0,X.jsx)(d.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:x?"gray.800":"gray.600",px:2,children:x?m:"down"===n?"End of presentation":"Start of presentation"})]})})});r7.displayName="PeekCardTab";var r9=n(12741),oe=function(){var e=(0,g.useState)(["",[],{}]),t=e[0],n=e[1],r=(0,_.qr)();return(0,g.useEffect)(function(){return r.subscribe(function(){var e=r.getState(),t=(0,L.X9)(e),o=(0,L.i2)(e)||"",i=t.parents[o]||[],s={};Object.keys(t.tree).forEach(function(e){var n=[];(function e(t){Object.keys(t).forEach(function(r){n.push(r),e(t[r])})})(t.tree[e]),s[e]=n}),n([o,i,s])})},[r]),t},ot=function(){var e=oe(),t=(0,k.Z)(e,3),n=t[0],r=t[1],o=t[2],i=Object.keys(o);return(0,X.jsx)(V.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:n?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map(function(e,t){var s=[].concat((0,r9.Z)(r),[n])[0],a=i.indexOf(s),c=o[s],l=0,d=100;return n&&c&&-1===i.indexOf(n)&&(l=(c.indexOf(n)+1)/c.length*100,d=1/c.length*100),(0,X.jsx)(oo,{cardId:e,state:t===a?"current":t<=a?"prev":"next",percent:l,unit:d},e)})})},on="var(--chakra-colors-trueblue-200)",or="var(--chakra-colors-trueblue-100)",oo=function(e){var t=e.cardId,n=e.state,r=e.percent,o=e.unit,i="linear-gradient(to right, ".concat(on," 0% ").concat(r,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(r,"% ").concat(r+o,"%, ").concat(or," ").concat(r+o,"% 100%)");return(0,X.jsx)(l.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?i:"prev"===n?on:or},t)},oi=(0,rg.ZP)("Esc"),os=function(e){var t=e.editor,n=e.showNavigationControls,r=(0,v.v9)(L.gh)===tO.q.SLIDE_VIEW,o=(0,g.useState)(null),i=o[0],s=o[1],c=(0,v.v9)(L.JA),u=(0,g.useRef)(c),f=(0,v.I0)(),p=rA({enabled:r&&!c,setActiveKey:s});return(0,g.useEffect)(function(){f((0,L.e)({isEditingInSlideView:!1}))},[r,f]),u.current=c,(0,g.useEffect)(function(){return rv.F7.on("keydown","SLIDE_VIEW",function(e){return!!(u.current&&oi(e))&&(f((0,L.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)})},[f]),(0,rj.us)(),(0,X.jsxs)(X.Fragment,{children:[r&&(0,X.jsx)(r4,{editor:t}),r&&(0,X.jsx)(ot,{}),r&&(0,X.jsx)(l.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,X.jsxs)(l.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:c?1:0,pointerEvents:c?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:c?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,X.jsx)(d.x,{size:"sm",mr:3,children:(0,X.jsx)(a.cC,{id:"DjD/sG"})}),(0,X.jsx)(J.z,{size:"sm",variant:"solid",onClick:function(){return f((0,L.e)({isEditingInSlideView:!1}))},children:(0,X.jsx)(a.cC,{id:"DPfwMq"})})]})}),r&&n&&(0,X.jsx)(rL,{activeKey:i,spotlightingByBlock:p})]})},oa=n(85946),oc=n(13414),ol=n(28339),od=n(55523),ou=n(83484),of=n(64457),op=n(75695),oh=n(83906),om=n(85745),ox=n(93848),og=n(95203),ov=n(62142),oj=function(e){var t=e.editor,n=e.start,r=(0,y.ye)("aiRewrite"),o=(0,eE.ff)("gray.100","gray.700"),i=(0,g.useCallback)(function(e){var r=(0,om.zm)(),o=t.view.state.doc.nodeAt(n);if(!o){console.error("[Filmstrip] Cannot append card. Node unknown");return}var i=n+o.nodeSize,s=om.e1.blankCard;e&&(s=om.e1[e]);var a=e?th.fe.FILMSTRIP_DROPDOWN:th.fe.FILMSTRIP,c=e?r[e]:r.blankCard;(0,om.ZT)(c,a),t.chain().insertContentAt(i,(0,ov.Zs)(s)).focus().selectInsertedNode().run()},[t,n]);return(0,X.jsxs)(tV.h,{w:"100%",size:"xs",isAttached:!0,variant:"plain",shadow:"md",borderRadius:"md",children:[(0,X.jsx)(h.kH,{label:(0,X.jsx)(a.cC,{id:"7iE+3N"}),children:(0,X.jsx)(D.h,{flex:2,className:"insert-card-button",variant:"plain","aria-label":c.ag._({id:"g+7nXG"}),icon:(0,X.jsx)(p.G,{icon:nv.r8}),onClick:function(){return i()},onMouseDown:e1.Wg,shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:o})}),r&&(0,X.jsx)(h.kH,{label:(0,X.jsx)(a.cC,{id:"kLZLXX"}),children:(0,X.jsx)(D.h,{flex:2,borderLeft:"none",className:"insert-ai-card-button",variant:"plain","aria-label":c.ag._({id:"g+7nXG"}),icon:(0,X.jsx)(V.U,{spacing:0,children:(0,X.jsx)(p.G,{icon:op.KC})}),onClick:function(){ox.pw.emit("queueDesignPartnerTask",{message:c.ag._({id:"JoMQgx",values:{placeholder:""}}),submit:!1})},onMouseDown:e1.Wg,shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:o})}),(0,X.jsxs)(rN.v,{children:[(0,X.jsx)(h.kH,{label:(0,X.jsx)(a.cC,{id:"UgOs5x"}),children:(0,X.jsx)(rZ.j,{borderLeft:"none",as:D.h,color:"gray.400",icon:(0,X.jsx)(oh.v,{}),fontSize:"md",shadow:"none",borderRadius:"md",minW:"6",flex:1,borderColor:o,transitionProperty:"none","data-guider-highlight":"add-card-template-button",onMouseDown:e1.Wg})}),(0,X.jsx)(ep.h,{children:(0,X.jsx)(og.u,{editor:t,appendCard:i})})]})]})},ob=n(62642),oy=n(29600),oC=n(21875),ow=(0,g.memo)(function(e){var t=e.docJson,n=e.theme,r=(0,_.CG)(L.yx),o=(0,g.useMemo)(function(){return{doc:r}},[r]);return(0,X.jsx)(l.k,{sx:t$.n,css:{"--editor-font-size":"0.125rem","--editor-width":"125px"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",children:(0,X.jsx)(t$.m,{content:t,theme:n,isThumbnail:!0,reduxData:o})})},function(e,t){return r$()(e.docJson,t.docJson)&&e.theme.updatedTime===t.theme.updatedTime&&e.theme.id===t.theme.id});ow.displayName="FilmstripPreviewEditor";var oO=n(582);function ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ok(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oI=function(e){var t,n=e.card,r=e.docJson,o=e.index,i=e.isEditorFocused,s=e.currentFocusedCard,a=e.isFilmstripSelected,c=e.theme,f=e.showScreenshots,p=e.screenshotsEnabled,m=e.readOnly,x=null===(t=n.attrs)||void 0===t?void 0:t.id,v=(0,oy.c)(x),j=null==v?void 0:v.previewUrl,b=(0,g.useMemo)(function(){return{borderWidth:"1px",borderColor:a||i?"transparent":"var(--fs-item-border-color)",boxShadow:a?"var(--fs-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"none"}},[i,a]),y=(0,_.TL)(),C=(0,g.useCallback)(function(e){if(x){var t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!m)y((0,oO.YC)({id:x,currentFocusedCard:s}));else if(n&&!m)y((0,oO.sY)({id:x}));else{y((0,oO.Ti)({id:x})),y((0,L.Qx)({attached:!1}));var r=(0,nP.sY)().cardId;(0,oC.D)({cardId:x,method:r===x?"replace":"push"})}}},[m,s,y,x]),w=(0,g.useMemo)(function(){var e;return null===(e=r.content)||void 0===e?void 0:e[0].attrs},[r]);return(0,X.jsx)(u.xu,{pt:1,onClick:C,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",children:(0,X.jsxs)(l.k,{justifyContent:"space-between",gap:2,children:[(0,X.jsx)(d.x,{color:a?"var(--fs-item-selected-text-color)":"inherit",fontSize:"sm",children:o+1}),(0,X.jsx)(u.xu,oS(oS({},b),{},{borderRadius:"md",overflow:"hidden",children:f?(0,X.jsx)(h.qh,{src:p?j:ob.Z.src,fallbackSrc:ob.Z.src,shouldShow:!!j,w:"100px",m:1}):(0,X.jsx)(ow,{theme:c,docJson:{type:"doc",content:[{type:"document",content:[n],attrs:w}]}})}))]})})},oE=n(16155),oP=n(9850),oD=n.n(oP),oA=n(87936),oT=n(85948),oR=n(38105),o_=n(47598),oL=function(e){var t=(0,_.CG)(oO.wg),n=(0,_.CG)(oO.zq),r=(0,_.TL)(),o=(0,_.qr)(),i=(0,ek.p)();(0,g.useEffect)(function(){var t=function(t){var n,r=o.getState();if(e&&(0,oE.Cf)()&&(0,L.hN)(r)){var s=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");if(s){var c=(0,oT.T)(s,e.schema).content.content.filter(function(e){return(0,tC.KH)(e)});if(c.length){var l=(0,tC.Bw)(e,(0,oO.zq)(r)),d=l?l.pos+l.node.nodeSize:e.state.doc.content.size-1,u=c.map(function(e){return(0,o_.h)(oD()(e.toJSON()))}).map(function(e){return(0,ov.Zs)(e)});e.chain().insertContentAt(d,u,{updateSelection:!1}).command(function(e){var t=e.tr,n=(0,oR.t)(t.doc.resolve(d));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),t.preventDefault(),i({title:(0,X.jsx)(a.cC,{id:"3viq5b",values:{0:c.length,1:c.length}}),status:"success",duration:3e3,position:"top"})}}}};return document.addEventListener("paste",t),function(){document.removeEventListener("paste",t)}},[e,o,i]);var s=(0,g.useCallback)(function(n,r){if(e){var o,s=(0,tC.Lz)(e,t);if(s.length){var c=tq.HY.from(s),l=(0,e2.G8)(c,e.schema);if(!l){i({title:(0,X.jsx)(a.cC,{id:"fFgBN7",values:{errorMessage:r}}),status:"error",duration:3e3,position:"top"});return}null===(o=document.getSelection())||void 0===o||o.removeAllRanges(),eT()(l,{format:"text/html"}),i({title:(0,X.jsx)(a.cC,{id:"8p/xVT",values:{0:s.length,1:n.one,2:n.other}}),status:"success",duration:3e3,position:"top"})}}},[e,t,i]);return{handleCopy:(0,g.useCallback)(function(){s({one:"Copied card.",other:"Copied ".concat(t.length," cards.")},"Error copying card.")},[s,t]),handleDelete:(0,g.useCallback)(function(){if(e){r((0,oO.jf)());var n="";if(1===t.length){var o=(0,tC.Bw)(e,t[0]);o&&(n=(0,eD.getCardTitle)(o.node.toJSON()))}e.commands.deleteCardsById(t);var s=n?'"'.concat(n,'"'):c.ag._({id:"FyJPFh"}),l=i({title:(0,X.jsxs)(V.U,{children:[(0,X.jsx)(d.x,{noOfLines:1,children:(0,X.jsx)(a.cC,{id:"OJTPnC",values:{0:t.length,1:t.length,displayTitle:s}})}),(0,X.jsx)(eS.r,{textDecoration:"underline",onClick:function(){(0,eP.Yw)(e.state),i.close(l)},children:(0,X.jsx)(a.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})}},[e,r,t,i]),handleCut:(0,g.useCallback)(function(){e&&(s({one:"Cut card.",other:"Cut ".concat(t.length," cards")},"Error cutting card."),r((0,oO.jf)()),e.commands.deleteCardsById(t))},[e,s,r,t]),handleDuplicate:(0,g.useCallback)(function(){if(e){var r=(0,tC.Lz)(e,t);if(r.length){var o=(0,tC.Bw)(e,n),s=o?o.pos+o.node.nodeSize:e.state.doc.content.size-1,c=r.map(function(e){return(0,o_.h)(oD()(e.toJSON()))}).map(function(e){return(0,ov.Zs)(e)});e.chain().insertContentAt(s,c,{updateSelection:!1}).command(function(e){var t=e.tr,n=(0,oR.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),i({title:(0,X.jsx)(a.cC,{id:"DS2/tq",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}}},[e,n,i,t])}},oM=function(e,t,n,r){var o=oL(r),i=o.handleCopy,s=o.handleDelete,a=o.handleCut,c=o.handleDuplicate,l=(0,_.TL)();(0,g.useEffect)(function(){return oA.F7.on("keydown","FILMSTRIP",function(r){if(!e)return!1;switch(r.key){case"Backspace":case"Delete":if(!t)return s(),!0;return!1;case"c":case"C":if(!t&&(r.ctrlKey||r.metaKey))return i(),!0;return!1;case"d":case"D":if(!t&&(r.ctrlKey||r.metaKey))return c(),!0;return!1;case"x":case"X":if(!t&&(r.ctrlKey||r.metaKey))return a(),!0;return!1;case"ArrowDown":return l((0,oO.ut)({direction:"down",withShift:!t&&r.shiftKey,currentFocusedCard:n})),!0;case"ArrowUp":return l((0,oO.ut)({direction:"up",withShift:!t&&r.shiftKey,currentFocusedCard:n})),!0;default:return!1}})},[l,n,e,s,i,c,a,t])};function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oZ=(0,eL.E)(l.k),oG="data-".concat(ol.dh),oF=function(e){var t=e.handleClose,n=e.editor,r=e.readOnly,o=(0,g.useState)(!1),i=o[0],s=o[1],a=(0,of.i)(n),c=a.content,d=a.selection,f=(0,_.TL)(),h=(0,_.CG)(oO.wg),m=null==c?void 0:c.content,x=(null==m?void 0:m[0].content)||[],v=(0,g.useMemo)(function(){return(0,oE.HU)(d,n)},[n,d]),j=v.id,b=v.pos;oM(i,r,j,n);var C=(0,g.useRef)(null);(0,ef.O)({ref:C,handler:function(){f((0,oO.Mt)())}});var w=(0,y.ye)("filmstripWithScreenshots"),k=(0,y.ye)("screenshotsEnabled"),S=n&&!r,I=(0,_.CG)(L.Pu),E=(0,eE.ff)("gray.200","gray.700"),P=(0,eE.ff)("whiteAlpha.500","blackAlpha.500"),D=(0,eE.ff)("gray.800","gray.200"),A=(0,eE.ff)("blackAlpha.400","whiteAlpha.500"),T=(0,eE.ff)("trueblue.500","trueblue.200"),R=(0,eE.If)().colorMode,M=(0,g.useMemo)(function(){var e;return{"--fs-item-border-color":(e="dark"===R)?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)"}},[R]);return(0,X.jsx)(oZ,oN(oN({position:"absolute"},od.wp),{},{transition:{duration:.2,delay:.2},direction:"column",left:2,top:12,bottom:2,justifyContent:"center",color:D,zIndex:od.Xr,_hover:{".filmstrip-nubbin":{opacity:1}},children:(0,g.createElement)(l.k,oN(oN({},(0,O.Z)({},oG,!0)),{},{className:od.sN,key:od.sN,zIndex:od.Xr,isolation:"isolate",tabIndex:0,_focus:{outline:"none"},onFocus:function(){s(!0)},onBlur:function(e){var t;C.current&&null!==(t=C.current)&&void 0!==t&&t.contains(e.relatedTarget)||s(!1)},borderRadius:"md",bg:P,backdropFilter:"blur(100px)",borderWidth:"1px",borderColor:E,maxHeight:"100%",alignSelf:"flex-start",ref:C}),S&&(0,X.jsx)(l.k,{position:"absolute",top:3,zIndex:1,width:"100%",px:4,children:(0,X.jsx)(oj,{editor:n,start:null!=b?b:1})}),(0,X.jsx)(l.k,{overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:A,borderRadius:"full"}},css:S?{"--mask-image-content":"linear-gradient(\n            to bottom,\n            black 0px,\n            transparent 0px,\n            transparent 40px,\n            black 50px,\n            black 100%,\n            transparent 100%\n          )",maskImage:"var(--mask-image-content)"}:void 0,children:(0,X.jsx)(q.K,{p:3,pos:"relative",css:M,pt:S?"50px":void 0,spacing:1,children:n&&(0,X.jsx)(X.Fragment,{children:m&&x.map(function(e,t){var o,i=null===(o=e.attrs)||void 0===o?void 0:o.id,s=h.includes(i);return(0,X.jsx)(oI,{index:t,card:e,docJson:c,isEditorFocused:j===i&&n.isFocused,isFilmstripSelected:!!s,currentFocusedCard:j,theme:I,showScreenshots:w,screenshotsEnabled:k,readOnly:r},null!=i?i:t)})})})}),(0,X.jsx)(oc.TX,{children:"Close filmstrip"}),(0,X.jsx)(u.xu,{as:J.z,variant:"unstyled",position:"absolute",right:0,top:"50%",transform:"translate(calc(100% - 1px), -50%)",onClick:t,h:14,size:"sm",borderWidth:"1px",borderColor:E,borderLeft:"none",bg:P,borderRadius:"0px 8px 8px 0px",opacity:0,transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",backdropFilter:"blur(100px)",_hover:{color:T},className:"filmstrip-nubbin",children:(0,X.jsx)(p.G,{icon:ou.A3,transform:"grow-2"})}))}))};function oW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oW(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oV=(0,eL.E)(J.z),oH=(0,g.memo)(function(){var e=(0,tR._i)().editor,t=(0,I.q)({defaultIsOpen:!0}),n=t.isOpen,r=t.onClose,o=t.onOpen,i=(0,_.CG)(L.gh)===tO.q.SLIDE_VIEW,s=(0,ol.Br)("comment"),c=(0,ol.Br)("edit"),l=(0,ed.Yy)();return!i&&s?(0,X.jsx)(h.Wk,{isDark:l,children:(0,X.jsx)(eM.M,{children:n?(0,X.jsx)(oF,{handleClose:r,editor:e,readOnly:!c},"filmstrip"):(0,X.jsxs)(oV,oU(oU({},od.wp),{},{transition:{duration:.2},isolation:"isolate",zIndex:od.Xr,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-4))",borderRadius:"xl","data-guider-highlight":"filmstrip-opener",h:"var(--trigger-height)",w:8,onClick:o,children:[(0,X.jsx)(oc.TX,{children:(0,X.jsx)(a.cC,{id:"7ShgZt"})}),(0,X.jsx)(p.G,{icon:oa.Cj})]}),"filmstrip-opener")})}):null});oH.displayName="Filmstrip";var oq=n(32292),oB=n(7399),oK=n(25015),oY=n(72360),oJ=n(48322),oX=n(18751),oQ=n(95993),o$=n(41202),o0=n(46069),o1=n(47403),o2=n(49299),o5=n(98765),o3=n(72314),o6=n(44934),o4=n(92455),o8=n(22681),o7=n(82875),o9=n(95201),ie=n(27846),it=n(76041),ir=n(10004),io=n(89641),ii=n(33807),is=n(67639),ia=(o=(0,tL.Z)(tz().mark(function e(t){var n,r,o,i,s,a,c;return tz().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.editor,r=t.chain,o=t.node,i=t.imageAttrs,s=t.pos,r.updateAttributesAtPos(s,(0,ii.j6)(o,{uploadStatus:ir.D.Uploading})),a=i.tempUrl,c=i.src,(0,it.WY)(c,n.storage.mediaUpload.orgId,{onUploadComplete:function(e){(0,ii.Ns)(n,a,e)},onUploadFailed:function(e){(0,ii.f8)(n,a,e,!0)}});case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),ic=function(e,t){console.debug("[AIStream processAIImages] for cardId: ",t);var n=e.chain(),r=(0,tb.N2)(e.state.doc,function(e){return(0,tC.KH)(e)&&e.attrs.id===t})[0];if(!r){console.error("[processAIImages] can not find card with id: ",t);return}var o=r.pos,i=o+r.node.nodeSize;e.state.doc.descendants(function(t,r){if(r<o||r>i)return!0;var s,a=t.attrs,c=t.type,l=void 0;return"image"===c.name?l=a:(0,is.E)(t)?l=a.image:((0,tC.KH)(t)||(0,io.pt)(t))&&(l=null===(s=a.background)||void 0===s?void 0:s.image),l&&l.uploadStatus===ir.D.Queued&&(console.debug("[AIStream processAIImages]: ".concat(t.type.name," node with AI queries at pos ").concat(r,":"),l),ia({editor:e,chain:n,node:t,imageAttrs:l,pos:r})),!0}),n.run()},il=["latency"];function id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?id(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ip="[CONTENT_FILTER]",ih=function(){return(0,X.jsxs)(oY.b,{status:"error",variant:"solid",children:[(0,X.jsx)(oJ.z,{}),(0,X.jsx)(oX.X,{children:(0,X.jsxs)(q.K,{children:[(0,X.jsx)("strong",{children:(0,X.jsx)(a.cC,{id:"7g5s/N"})}),(0,X.jsx)(d.x,{children:(0,X.jsx)(a.cC,{id:"Xp43Ei"})})]})})]})},im=function(e){var t=e.editor,n=e.chunk,r=e.theme,o=e.docFormatKey,i=n.id,s=n.index,a=(0,o3.a)({chunk:n,theme:r,docFormatKey:o}),c=(0,tb.N2)(t.state.doc,function(e){return(0,o7.KH)(e)})[0],l=(0,tb.N2)(t.state.doc,function(e){return(0,o7.KH)(e)&&e.attrs.id===i})[0];if(!c)throw Error("Doc does not have a first card");var d=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===s?{from:c.pos,to:c.pos+c.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(d,a,{updateSelection:!1}),n.cardComplete&&0===n.index){var u=(0,oR.t)(t.state.doc.resolve(c.pos));u&&t.commands.command(function(e){return e.tr.setSelection(u),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card",a),console.warn(e)}},ix=function(e){var t=e.docId,n=e.store,r=e.generateInfo,o=e.editor;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}o2.a.trackRequestSent(n,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});var i=(0,o0.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}).stream;return(0,o$.Nl)({stream:i,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,options:{imageLicense:r.imageLicense,docFormatKey:(0,o8.W3)((0,o8.VA)(o)).key,lastCompletedCardIndex:r.lastCompletedCardIndex},store:n})},ig=function(e,t){var n,r=(0,_.qr)(),o=(0,_.TL)(),i=(0,_.CG)(L.KV),s=(0,y.ye)("streamResumingEnabled"),a=(0,g.useRef)(!1),c=iv({docId:e}),l=c.isStreaming,d=c.onStreamData,u=c.onStreamDone,f=c.onStreamError,p=c.onStreamStart,h=c.onAbortStream,m=ib(l),x=(0,g.useCallback)((n=(0,tL.Z)(tz().mark(function n(o){var i,s,c;return tz().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:p({editor:t}),s=ij({streamResponse:o,editor:t,store:r,docId:e}).getReader(),n.prev=5;case 6:return n.next=8,s.read();case 8:if((i=n.sent).done){n.next=18;break}if(i.value){n.next=11;break}return n.abrupt("continue",6);case 11:if(!a.current){n.next=14;break}return console.log("[AIStream] has aborted -- no longer reading stream"),n.abrupt("break",18);case 14:"data"===(c=i.value).event&&(d({value:c.data,editor:t,streamResponse:o}),m()),n.next=6;break;case 18:n.next=24;break;case 20:return n.prev=20,n.t0=n.catch(5),f({err:n.t0,streamResponse:o,editor:t}),n.abrupt("return");case 24:if(!a.current){n.next=26;break}return n.abrupt("return");case 26:c&&"done"!==c.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:c}),u({editor:t,streamResponse:o});case 28:case"end":return n.stop()}},n,null,[[5,20]])})),function(e){return n.apply(this,arguments)}),[e,t,d,u,f,p,m,r]);(0,ie.v)(function(){if(t&&i&&!l){var n=(0,nO.oH)(e)(r.getState()),o=(0,nO.nl)(r.getState());if(n){"running"===n.status&&x(n);return}if(s&&!o){var a=(0,o8.VA)(t),c=a.generateInfo;if("streaming"===a.generateStatus){var d=ix({docId:e,generateInfo:c,editor:t,store:r});d&&x(d)}}}},[e,t,r,i,p,f,d,u,s,x,l],[t,i]),(0,g.useEffect)(function(){return function(){var n=(0,nO.oH)(e)(r.getState());t&&n&&"running"===n.status&&(a.current=!0,h({editor:t,streamResponse:n}))}},[o,e,h,t,r])},iv=function(e){var t=e.docId,n=(0,ek.p)(),r=(0,_.TL)(),o=(0,_.qr)(),i=(0,y.ye)("aiWizardUploadImages"),s=(0,_.CG)(L.Pu),c=(0,g.useState)(!1),l=c[0],d=c[1],u=(0,g.useRef)(null);(0,g.useEffect)(function(){return function(){u.current&&(n.close(u.current),u.current=null)}},[n]);var f=(0,g.useCallback)(function(){u.current||(u.current=n({id:"ai-generating-toast",isClosable:!1,render:function(){return(0,X.jsxs)(oY.b,{variant:"light",children:[(0,X.jsx)(nt.$,{size:"sm",mr:2}),(0,X.jsxs)(oX.X,{children:[(0,X.jsx)("strong",{children:(0,X.jsx)(a.cC,{id:"n2cF1o"})})," ",(0,X.jsx)(a.cC,{id:"BFGwQA"})]})]})},position:"top",duration:null}))},[n]),p=(0,g.useCallback)(function(e){var t=e.editor;t&&(d(!0),t.commands.setAIGenerationRunning(!0),f())},[f]),h=(0,g.useCallback)(function(e){var t=e.editor,n=e.value;if(e.streamResponse&&t){var r=(0,o8.W3)((0,o8.VA)(t)),o=n.id,a=n.cardComplete;im({chunk:n,editor:t,theme:s,docFormatKey:r.key}),a&&i&&ic(t,o)}},[i,s]),m=(0,g.useCallback)(function(e){var t=e.editor,i=e.streamResponse;if(t&&i){var s=i.id,c=(0,o8.W3)((0,o8.VA)(t));d(!1),t.commands.setAIGenerationRunning(!1),t.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,o5.rD)(),r((0,nO.G0)({id:s,status:"complete"})),o2.a.trackStreamComplete(o,s),(0,o6.d)("wizardCreation"),u.current&&n.update(u.current,{title:(0,X.jsx)(a.cC,{id:"2/LpWt",values:{0:c.generationLabel||c.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})}},[r,o,n]);return{isStreaming:l,onStreamStart:p,onStreamData:h,onStreamError:(0,g.useCallback)(function(e){var i=e.err,s=e.editor,c=e.streamResponse,l=c.id,f=(0,o1.uS)(i),p=f.errorMessage,h=f.errorCode;d(!1),s.commands.setAIGenerationRunning(!1),s.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,o5.rD)(),r((0,nO.G0)({id:l,status:"error"}));var m=(0,nO.Sn)(l)(o.getState());if(m){var x=m.latency,g=(0,em.Z)(m,il);(0,nZ.pQ)(iu(iu({},g),{},{errorName:"StreamError",errorMessage:p,errorCode:h,outputMessage:"",latency:x||performance.now()-g.startTime,isResuming:c.isResuming,docId:t}))}u.current&&(p===ip?n.update(u.current,{render:ih,position:"top",duration:null,isClosable:!0}):n.update(u.current,{title:(0,X.jsx)(a.cC,{id:"DePRM9"}),status:"error",position:"top",duration:null,isClosable:!0}))},[r,t,o,n]),onStreamDone:m,onAbortStream:(0,g.useCallback)(function(e){var t=e.editor,n=e.streamResponse.id;d(!1),t.commands.setAIGenerationRunning(!1),o2.a.trackStreamAbort(o,{interactionId:n,abortReason:"leave-editor"}),r((0,nO.Of)({id:n}))},[r,o])}},ij=function(e){var t=e.streamResponse,n=e.editor,r=e.store,o=e.docId,i=t.id,s=t.stream,a=!0;return s.pipeThrough(new oQ.GJ({transform:function(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(ip));return}t.enqueue(e)}})).pipeThrough((0,o$.c1)(function(e){a&&"data"===e.event&&(o2.a.trackStreamStart(r,{interactionId:i,docId:o}),t.isResuming&&n.commands.deleteCardsAfter(t.lastCompletedCardId||null),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.data.eventId,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},ib=function(e){var t=(0,o4.As)("editor"),n=(0,g.useRef)(!0);(0,g.useEffect)(function(){if(e){var r=t.scroller;if(r){var o=function(){t.isAtBottom(40)?n.current=!0:n.current=!1},i=function(){n.current=!1};return r.addEventListener("wheel",o,{passive:!0}),r.addEventListener("touchend",o,{passive:!0}),r.addEventListener("touchstart",i,{passive:!0}),r.addEventListener("touchmove",i,{passive:!0}),function(){r.removeEventListener("wheel",o),r.removeEventListener("touchend",o),r.removeEventListener("touchstart",i),r.removeEventListener("touchmove",i)}}}},[t,e]);var r=(0,g.useCallback)(function(){if(n.current){var e;null===(e=t.scroller)||void 0===e||e.scrollTo({top:t.scroller.scrollHeight,behavior:"auto"})}},[t]);return(0,o9.Z_)(r,100)},iy=n(14198),iC=function(e){var t=e.toggleToCPanel,n=e.initializeToCPanel,r=e.isToCPanelOpen,o=(0,iy.F)().breakpoints.xl,i=(0,_.CG)(L.gh),s=(0,g.useState)(i!==tO.q.SLIDE_VIEW),a=s[0],c=s[1],l=(0,g.useState)(!1),d=l[0];l[1];var u=(0,v.I0)();(0,t2.vm)(function(){n()},[o,t,n,u],[]),(0,t2.vm)(function(){i===tO.q.SLIDE_VIEW?(c(r),t({disableTransition:!1,override:"closed"})):d&&i===tO.q.DOC_VIEW&&t({disableTransition:!1,override:a?"open":"closed"})},[t,r,a,i,d],[i])};function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iw(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ik="doc_archived_warning",iS=function(e,t){var n=(0,ek.p)(),r=(0,j.iX9)(),o=(0,k.Z)(r,1)[0];(0,g.useEffect)(function(){return function(){n.close(ik)}},[]),(0,g.useEffect)(function(){e&&t===tT.Z.COLLABORATIVE&&(e.archived&&!n.isActive(ik)?n({id:ik,title:(0,X.jsxs)(d.x,{"data-testid":"trash-confirmation-toast",children:[(0,X.jsx)(a.cC,{id:"fkHPZu"})," ",(0,X.jsx)(eS.r,{textDecoration:"underline",onClick:function(){var t={id:e.id};o({variables:t,optimisticResponse:{unarchiveDoc:iO(iO({},t),{},{archived:!0,__typename:"Doc"})}})},children:(0,X.jsx)(a.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null}):!e.archived&&n.isActive(ik)&&n.close(ik))},[e,t,n,o])},iI=n(51587),iE=n(56675),iP=n(53776),iD=n(78985);function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iR=function(e){var t=(0,iE.x)(),n=(0,_.CG)(iD.cn);(0,g.useEffect)(function(){n&&t.cache.updateQuery({query:iP.yE1,variables:{id:e}},function(e){if(!(null!=e&&e.doc))return e;var t=e.doc;return t.titleEdited?e:{doc:iT(iT({},t),{},{title:n})}})},[n,t,e])},i_=n(83827),iL=n(69539),iM=n(48842),iz=function(e,t){var n=(0,iM._)().isUnauthorized;(0,th.If)(function(r){!0!==n&&void 0!==n&&(r.track(th.AA.DOC_VIEWED,{doc_id:e}),t===tT.Z.EXAMPLE_STATIC&&r.track(th.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,i_.d)();var r=(0,y.ye)("realUserMetrics"),o=t===tT.Z.COLLABORATIVE&&r,i=(0,y.ye)("rumKeystrokeSampleRate");(0,iL.lh)(o,i)},iN=n(26658),iZ=function(e){var t=(0,v.I0)(),n=(0,th.z$)();(0,g.useEffect)(function(){var r,o=function(){var o=(0,_.bh)().getState();r=(0,L.Q5)(o),(0,iN.I7)(e),t((0,L.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(th.AA.DOC_PRINTED)},i=function(){t((0,L.lx)({isEditingDisabled:!1})),t((0,L.xn)({expandedCardsMap:r}))};return window.addEventListener("beforeprint",o),window.addEventListener("afterprint",i),function(){window.removeEventListener("beforeprint",o),window.removeEventListener("afterprint",i)}},[t,e,n])},iG="doc-root",iF=function(e){var t=e.isConnected;return(0,X.jsx)(l.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,X.jsx)(a.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}}):(0,X.jsxs)(l.k,{m:8,alignItems:"center",direction:"row",children:[(0,X.jsx)(p.G,{icon:s.bK,size:"4x"}),(0,X.jsx)(d.x,{ml:8,children:(0,X.jsx)(a.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc},components:{0:(0,X.jsx)("strong",{})}})})]})})},iW=function(e){var t=e.doc,n=e.user,r=e.docEditorType,o=(0,b.$m)(t,n),i=(0,v.v9)(L.gh),s=r===tT.Z.COLLABORATIVE&&!o,a=s&&i===tO.q.SLIDE_VIEW;return(null==o?void 0:o.permission)=="view"?(0,X.jsx)(ro.m,{}):a?(0,X.jsx)(en,{}):s?(0,X.jsx)(w.C,{showTourReplay:!0}):null},iU=(0,tR.eT)(function(e){var t=e.docEditorType,n=void 0===t?tT.Z.COLLABORATIVE:t,r=(0,tR._i)(),o=r.docId,i=r.isUnauthorized,s=r.setCollaborativeEditorInstance,a=r.editor,d=(0,_.CG)(t_.yx),p=(0,j.$gs)().isConnected,m=(0,tP.SE)().user;(0,C.F3)(),iS(d,n),ig(o,a),iR(o),iz(o,n),(0,iI.j)(),(0,oK.P)(),(0,oK.J)(),(0,rc.Zd)(a,".".concat(iG)),rx(a),(0,tD.V)(),iZ(a),(0,b.DD)(d,n===tT.Z.COLLABORATIVE);var v=(0,g.useRef)(null),w=(0,_.TL)(),O=(0,ed.Yy)(),k=(0,g.useMemo)(function(){return(0,tf.vu)(O)},[O]);console.debug("%c[DocEditorComponent] RENDER - ".concat(o),"background-color: gold");var S=(0,ei.Pp)(oq.Q),I=S.togglePanel,E=S.isPanelOpen,P=S.initPanel,D=(0,ei.Pp)(nm.s),A=D.togglePanel,T=D.isPanelOpen,R=(0,ei.Pp)(nx.Rr),L=R.togglePanel,M=R.isPanelOpen;(0,nx.QK)({toggleDesignPartnerPanel:L,isDesignPartnerPanelOpen:M,editor:a}),iC({toggleToCPanel:I,isToCPanelOpen:E,initializeToCPanel:P}),(0,g.useEffect)(function(){return function(){w((0,ec.qo)())}},[w]);var z=(0,g.useCallback)(function(){return!!(a&&a.state.selection.empty)},[a]),N=(0,ei.Xy)(),Z=N.leftPanelLifecycle,G=N.rightPanelLifecycle,F=N.globalPanelLifecycle,W=(0,y.ye)("filmstrip")&&n===tT.Z.COLLABORATIVE,U=(0,eo.dU)(null==d?void 0:d.organization),V=(0,tA.U)(null==d?void 0:d.title,U),H=c.ag._({id:"X6YCwz"}),q=c.ag._({id:"abr3hR"});return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,X.jsx)(x(),{children:(0,X.jsx)("title",{children:V})}),(0,X.jsx)(np,{doc:d,editor:a}),(0,X.jsx)(el.H9,{isEnabledFn:z}),i?(0,X.jsx)(iF,{isConnected:p}):(0,X.jsxs)(l.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:v,children:[(0,X.jsx)(es.Av,{panelLifecycle:Z}),(0,X.jsxs)(l.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[(0,X.jsx)(h.Wk,{isDark:O,children:(0,X.jsx)(oB.o,{scrollingParentSelector:".".concat(iG),editorWrapperEl:v.current,docEditorType:n,isToCPanelOpen:E,toggleToCPanel:I,isCommentsPanelOpen:T,toggleCommentsPanel:A})}),(0,X.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:(0,f.cx)(iG,M&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(H,"'"),"--ai-generating-label":"'".concat(q,"'")},css:k,children:[n===tT.Z.PUBLIC_STATIC?(0,X.jsx)(ru,{docId:o,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(iG),onCreate:s}):n===tT.Z.EXAMPLE_STATIC?(0,X.jsx)(ra,{docId:o,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(iG),onCreate:s}):(0,X.jsxs)(ea.Mn.Provider,{value:F,children:[(0,X.jsx)(eu.Ge,{doc:d,docId:o,readOnly:null==d?void 0:d.archived,onCreate:s,scrollingParentSelector:".".concat(iG)}),a&&(0,X.jsx)(tE,{editor:a})]}),(0,X.jsx)(n4,{editor:a}),(0,X.jsx)(os,{editor:a})]})]}),(0,X.jsx)(es.U8,{panelLifecycle:G}),(0,X.jsx)(tp.a,{editorId:"main",children:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(tu,{editor:a}),(0,X.jsx)(iW,{doc:d,user:m,docEditorType:n}),W&&(0,X.jsx)(oH,{})]})})]})]})}),iV=n(75156),iH=n(56768),iq=n(93031),iB=n(59195),iK=n(92488),iY=n(3360),iJ=n(38717),iX=n(42353),iQ=function(e){var t=e.theme,n=e.onClick,r=e.isChecked,o=e.index,i=e.startIndex;return(0,X.jsxs)(u.xu,{gridColumnStart:o+1-i,display:i>o?"none":"block",gridRow:1,as:iJ.f,p:2,transition:"all 0.2s ease-in-out",bgColor:r?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:r?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:r?"trueblue.100":"gray.100"},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":r?"current-theme-preview":void 0,cursor:"pointer",children:[(0,X.jsx)(iX.n,{theme:t}),(0,X.jsxs)(q.K,{direction:"row",spacing:1,pt:1,children:[r&&(0,X.jsx)(t9.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,X.jsx)(d.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:r?"trueblue.700":void 0,children:t.name})]})]})};iQ.displayName="DemoDocThemePreview";var i$="linen.50",i0=function(e){var t=e.templateTheme,r=e.setTheme,o=e.currentThemeId,i=(0,v.v9)(L.gh)===tO.q.SLIDE_VIEW,s=(0,g.useState)([]),c=s[0],d=s[1],u=(0,g.useState)(!1),f=u[0],h=u[1],m=(0,g.useState)(0),x=m[0],j=m[1],b=(0,iY.i)({base:3,md:4,lg:5})||3;(0,g.useEffect)(function(){n.e(866).then(n.bind(n,20866)).then(function(e){d(e.GLOBAL_THEMES)})},[]);var y=[].concat((0,r9.Z)(t?[t]:[]),(0,r9.Z)(c.filter(function(e){return e.id!==(null==t?void 0:t.id)}))),C=(0,g.useCallback)(function(e){1===e?j(function(e){return e+1}):j(function(e){return e-1})},[]);return i?(0,X.jsx)(X.Fragment,{}):(0,X.jsx)(ep.h,{children:(0,X.jsxs)(l.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:i$,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,X.jsx)(l.k,{alignItems:"flex-end",justify:"flex-end",children:(0,X.jsx)(J.z,{variant:"ghost",size:"sm",rightIcon:(0,X.jsx)(p.G,{icon:f?iK.gc:iB.on}),onClick:function(){return h(function(e){return!e})},children:f?(0,X.jsx)(a.cC,{id:"yz7wBu"}):(0,X.jsx)(a.cC,{id:"x6tIe+"})})}),(0,X.jsx)(l.k,{justify:"flex-start",align:"flex-start",bgColor:i$,w:"100%",children:f&&(0,X.jsxs)(q.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,X.jsx)(D.h,{"aria-label":"Left",onClick:function(){return C(-1)},variant:"ghost",isDisabled:0===x,icon:(0,X.jsx)(p.G,{icon:iq.Ey})}),(0,X.jsx)(ry.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(b,", calc(100% / ").concat(b," - 1em))")],gap:"0 1em",bgColor:i$,children:y.map(function(e,t){return(0,X.jsx)(iQ,{index:t,startIndex:x,isChecked:e.id===o,theme:e,onClick:function(){r(e)}},e.id)})}),(0,X.jsx)(D.h,{"aria-label":"Right",variant:"ghost",isDisabled:x+b>y.length,onClick:function(){return C(1)},icon:(0,X.jsx)(p.G,{icon:iH.yO})})]})})]})})},i1=n(22595),i2=n(26886),i5=n(53589),i3=n(68690),i6=n(10344),i4=n(70091),i8=n(78357),i7=n(27486),i9=[{description:(0,X.jsx)(a.cC,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,X.jsx)(a.cC,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,X.jsx)(a.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,X.jsx)(a.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,X.jsx)(a.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,X.jsx)(a.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,X.jsx)(a.cC,{id:"K0Oq/D"}),shortcut:"R"}],se=function(e){var t=e.editorWrapperEl,n=e.scrollingParentSelector,r=(0,i7.M)({editorWrapperEl:t,scrollingParentSelector:n}),o=r.enterSlideView,i=r.exitSlideView,s=r.setExitedFullscreenByClick,l=r.isFullscreen,d=r.enterFullscreen,u=r.exitFullscreen,f=(0,_.CG)(L.gh),m=(0,g.useRef)(f);return(0,g.useEffect)(function(){m.current=f},[f]),(0,X.jsxs)(V.U,{children:[(0,X.jsxs)(tV.h,{isAttached:!0,size:"sm",children:[(0,X.jsx)(h.kH,{label:f===tO.q.DOC_VIEW?(0,X.jsx)(a.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}}):(0,X.jsx)(a.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}}),children:(0,X.jsx)(J.z,{variant:f===tO.q.DOC_VIEW?"solid":"plain",cursor:f===tO.q.SLIDE_VIEW?"pointer":"auto",onClick:function(){f===tO.q.SLIDE_VIEW&&i()},leftIcon:(0,X.jsx)(p.G,{icon:i3.cw}),children:(0,X.jsx)(a.cC,{id:"7Zdnlq"})})}),(0,X.jsx)(h.kH,{label:f===tO.q.SLIDE_VIEW?(0,X.jsx)(a.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}}):(0,X.jsx)(a.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:er.Yc}}),children:(0,X.jsx)(J.z,{variant:f===tO.q.SLIDE_VIEW?"solid":"plain",cursor:f===tO.q.DOC_VIEW?"pointer":"auto",onClick:function(){f===tO.q.DOC_VIEW&&o({fullscreen:!1})},leftIcon:(0,X.jsx)(p.G,{icon:i5.bg}),children:(0,X.jsx)(a.cC,{id:"FOoDGS"})})})]}),f===tO.q.SLIDE_VIEW&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Y.i,{orientation:"vertical"}),(0,X.jsx)(h.kH,{label:l?(0,X.jsx)(a.cC,{id:"IkOhTI"}):(0,X.jsx)(a.cC,{id:"q8ARHN"}),children:(0,X.jsx)(D.h,{size:"sm","aria-label":l?c.ag._({id:"IkOhTI"}):c.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,X.jsx)(p.G,{icon:l?i2.Qj:i1.TL}),onClick:l?function(){s(!0),u()}:d})}),(0,X.jsxs)(E.J,{children:[(0,X.jsx)(P.x,{children:(0,X.jsx)(J.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,X.jsx)(a.cC,{id:"77Emn0"})})}),(0,X.jsxs)(A.y,{border:"1px solid #eee !important",children:[(0,X.jsx)(i6.Q,{}),(0,X.jsx)(i4.u,{}),(0,X.jsx)(T.b,{children:(0,X.jsx)(i8.A,{list:i9})})]})]})]})]})},st=(0,g.memo)(function(e){var t=e.scrollingParentSelector,n=e.editorWrapperEl;(0,_.CG)(t_.yx);var r=(0,g.useRef)(null);return(0,X.jsx)(l.k,{ref:r,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,X.jsx)(l.k,{direction:"column",w:"100%",children:(0,X.jsx)(se,{editorWrapperEl:n,scrollingParentSelector:t})})})}),sn="doc-root",sr=(0,tR.eT)(function(e){var t,n=e.docEditorType,r=void 0===n?tT.Z.COLLABORATIVE:n,o=(0,tR._i)(),i=o.docId,s=o.setCollaborativeEditorInstance,a=o.editor,c=(0,_.CG)(t_.yx);iz(i,r),(0,iI.j)(),(0,oK.P)(),(0,oK.J)(),(0,rc.Zd)(a,".".concat(sn)),rx(a),(0,tD.V)(),iZ(a),(0,b.DD)(c,r===tT.Z.COLLABORATIVE);var d=(0,g.useRef)(null),f=null==c?void 0:c.theme,p=(0,g.useState)(function(){return f}),h=p[0],m=p[1],v=(0,_.TL)(),y=(0,g.useRef)(!1),C=(0,j.EDv)({variables:{docId:i,snapshotId:null==c?void 0:c.currentSnapshotId},skip:!(null!=c&&c.currentSnapshotId)}).data,w=null==C?void 0:null===(t=C.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,g.useEffect)(function(){f&&!y.current&&(m(f),y.current=!0)},[f]),(0,g.useEffect)(function(){if(a){var e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){w&&a.commands.setContent(w);return}a.commands.updateThemeAccentImages(e)}},[a,h,w]);var O=(0,ei.Pp)(oq.Q);iC({toggleToCPanel:O.togglePanel,isToCPanelOpen:O.isPanelOpen,initializeToCPanel:O.initPanel}),(0,g.useEffect)(function(){return function(){v((0,ec.qo)())}},[v]);var k=(0,ei.Xy)(),S=k.leftPanelLifecycle;return k.globalPanelLifecycle,(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,X.jsx)(x(),{children:(0,X.jsxs)("title",{children:["".concat(c?(0,iV.$)(c.title)+" | ":""),"Gamma"]})}),(0,X.jsxs)(l.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,children:[(0,X.jsx)(es.Av,{panelLifecycle:S}),(0,X.jsxs)(l.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[a&&(0,X.jsx)(st,{scrollingParentSelector:".".concat(sn),editorWrapperEl:d.current,setTheme:m,currentThemeId:(null==h?void 0:h.id)||(null==f?void 0:f.id),templateTheme:f}),(0,X.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:sn,children:[(0,X.jsx)(ru,{docId:i,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(sn),onCreate:s,theme:h,showMadeWithGammaBadge:!1}),(0,X.jsx)(os,{editor:a,showNavigationControls:!0})]})]}),(0,X.jsx)(tu,{editor:a}),(0,X.jsx)(i0,{setTheme:m,currentThemeId:(null==h?void 0:h.id)||(null==f?void 0:f.id),templateTheme:f})]})]})}),so=n(28165),si=n(82779),ss=n(49725),sa="body",sc=n(56648),sl=n(60670),sd=n(24657),su=n(27914),sf=n(12436),sp=n.n(sf),sh=function(e){var t=(0,o4.As)(e),n=(0,g.useState)("up"),r=n[0],o=n[1];return(0,g.useEffect)(function(){var e=document.querySelector(t.scrollSelector);if(e){var n=(null==e?void 0:e.scrollTop)||0,r=function(){var t=(null==e?void 0:e.scrollTop)||0;Math.abs(t-n)>0&&(o(!(t>n)||n>0&&0===t||t>0&&0===n?"up":"down"),n=t>0?t:0)},i=sp()(function(){return window.requestAnimationFrame(r)},500,{leading:!0});return null==e||e.addEventListener("scroll",i),function(){return null==e?void 0:e.removeEventListener("scroll",i)}}},[t.scrollSelector]),r},sm=n(1153);function sx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sx(Object(n),!0).forEach(function(t){(0,O.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sv=function(e){var t,n,r,o=e.doc,i=e.onCommentFeedOpen,s=e.onTocOpen,a=e.commentsEnabled,c=(0,sm.X)(z.H.lastHomeUrl,"/"),l=(0,k.Z)(c,1)[0],u=(0,tP.SE)().user,f=(null==o?void 0:null===(t=o.comments)||void 0===t?void 0:t.filter(function(e){return e.status===j.Ux9.Open}).length)||0,h=sh("editor"),m=(0,v.v9)(L.Pu),x=(0,su.Jh)(m),g=null!==(n=m.config.bodyColor)&&void 0!==n?n:(0,tY.wj)(m)?"white":"gray.800",b=null!==(r=m.accentColor)&&void 0!==r?r:(0,tY.wj)(m)?"trueblue.300":"trueblue.700";return(0,X.jsxs)(V.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==h?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==h?1:0,zIndex:"sticky",sx:sg(sg({},(0,su.Oj)(x,m)),{},{border:"none",filter:"none",borderRadius:0}),color:g,children:[u&&(0,X.jsx)(nw(),{href:l,passHref:!0,legacyBehavior:!0,children:(0,X.jsx)(D.h,{as:eS.r,"aria-label":"Home",color:g,_hover:{bg:"transparent",color:b},icon:(0,X.jsx)(p.G,{icon:sd.J9,size:"1x"}),variant:"ghost"})}),(0,X.jsx)(d.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:g,children:null==o?void 0:o.title}),(0,X.jsxs)(tV.h,{variant:"ghost",children:[(void 0===a||a)&&(0,X.jsx)(J.z,{color:g,_hover:{bg:"transparent",color:b},fontSize:"sm",onClick:i,leftIcon:(0,X.jsx)(p.G,{icon:sl.Mz}),children:f}),(0,X.jsx)(D.h,{color:g,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:b},onClick:s,icon:(0,X.jsx)(p.G,{icon:sc.xi})})]})]})},sj=function(e){var t=e.doc,n=e.docEditorType,r=e.commentsEnabled,o=void 0===r||r,i=(0,tR._i)(),s=i.docId,a=i.setCollaborativeEditorInstance,c=i.editor,d=(0,I.q)({id:"mobile-comment-feed-panel-drawer"}),u=d.isOpen,f=d.onOpen,p=d.onClose,m=(0,I.q)({id:"mobile-toc-drawer"}),x=m.isOpen,v=m.onOpen,j=m.onClose,b=(0,g.useState)(null),y=b[0],C=b[1];return console.debug("%c[MobileEditorWrapper] RENDER - ".concat(s),"background-color: gold"),(0,X.jsxs)(l.k,{ref:(0,g.useCallback)(function(e){return C(e)},[]),direction:"column",flex:1,children:[(0,X.jsx)(sv,{doc:t,onCommentFeedOpen:f,onTocOpen:v,commentsEnabled:o}),n===tT.Z.PUBLIC_STATIC?(0,X.jsx)(ru,{docId:s,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:sa,onCreate:a}):n===tT.Z.EXAMPLE_STATIC?(0,X.jsx)(ra,{docId:s,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:sa,onCreate:a}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eu.Ge,{doc:t,docId:s,readOnly:!0,onCreate:a,scrollingParentSelector:sa}),c&&(0,X.jsx)(tE,{editor:c})]}),o&&u&&(0,X.jsx)(h.Aj,{isOpen:u,onClose:p,drawerProps:{autoFocus:!1},children:(0,X.jsx)(si.m,{onClose:p,editor:c})}),x&&(0,X.jsx)(h.Aj,{isOpen:x,onClose:j,children:(0,X.jsx)(ss.o,{rootElement:y,handleClose:j})}),(0,X.jsx)(tp.a,{children:(0,X.jsx)(n4,{editor:c})})]})},sb=(0,tR.eT)(function(e){var t=e.docEditorType,n=void 0===t?tT.Z.COLLABORATIVE:t,r=(0,tR._i)(),o=r.docId,i=r.isUnauthorized,s=r.editor;iz(o,n),ig(o,s),(0,iI.j)();var a=(0,g.useRef)(null),c=(0,v.v9)(t_.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(o),"background-color: gold");var d=n===tT.Z.COLLABORATIVE;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(x(),{children:[(0,X.jsxs)("title",{children:["".concat(c?(0,iV.$)(c.title)+" | ":""),"Gamma"]}),(0,X.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,X.jsx)(so.Global,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),i?(0,X.jsxs)(l.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",er.Yc,"."]}):(0,X.jsx)(l.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:a,flex:"1",children:(0,X.jsx)(sj,{doc:c,docEditorType:n,commentsEnabled:d})})]})})},13504:function(e,t,n){n.d(t,{V:function(){return i}});var r=n(2784),o="drag-in-progress",i=function(){(0,r.useEffect)(function(){var e=function(){document.body.classList.add(o)},t=function(){document.body.classList.remove(o)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),function(){document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])}}}]);
//# sourceMappingURL=5710-ddab29fd1610c951.js.map